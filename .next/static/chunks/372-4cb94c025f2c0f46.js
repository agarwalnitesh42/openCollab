"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[372],{26930:function(e,t,a){var r=a(57437),s=a(54796),n=a(57999);t.Z=e=>{let{children:t,child:a,className:c="",variant:o="default",isLoad:l=!1,...i}=e;return(0,r.jsxs)("button",{...i,className:(0,n.Z)("".concat({shiny:"py-2.5 px-3 font-medium text-center text-black active:shadow-none rounded-lg shadow bg-orange-500 hover:bg-orange-600 text-white duration-150",default:"py-2.5 px-3 rounded-lg duration-150 font-medium text-center text-sm text-black bg-orange-500"}[o]," ").concat(l?"flex items-center justify-center pointer-events-none opacity-70":""," ").concat(c)),children:[l?(0,r.jsx)(s.yM,{}):"",!l&&a?(0,r.jsx)("div",{className:"-ml-1 mr-3",children:a}):"",t]})}},21149:function(e,t,a){a.d(t,{Z:function(){return l}});var r=a(57437),s=a(2265),n=a(54796),c=a(65928),o=a(38080),l=e=>{let{className:t,categories:a=[],setCategory:l=()=>[]}=e,[i,u]=(0,s.useState)([]),d=(0,c.A)(),p=new o.Z(d).getAll(),[g,m]=(0,s.useState)([]),[h,_]=(0,s.useState)(!1),[f,w]=(0,s.useState)("");return(0,s.useEffect)(()=>{p.then(e=>{u([...e])})},[]),(0,r.jsxs)("div",{className:"relative ".concat(t),children:[(0,r.jsxs)("ul",{className:"flex flex-wrap items-center gap-2 w-full px-3 py-2 border border-slate-800 rounded-lg",children:[a.map((e,t)=>(0,r.jsxs)("li",{className:"flex-none inline-flex items-center px-3 py-2 bg-slate-800 rounded-lg font-medium text-xs text-black",children:[e.name,(0,r.jsx)("button",{onClick:()=>l(a.filter((e,a)=>a!==t)),children:(0,r.jsx)(n.k9,{className:"w-3 h-3 ml-2"})})]},t)),(0,r.jsx)("li",{children:(0,r.jsx)("input",{type:"text",value:f,placeholder:"Add a category",className:"text-sm text-black0 placeholder-slate-500 py-2 border-0 outline-none bg-transparent appearance-none",onFocus:()=>_(!0),onBlur:()=>{setTimeout(()=>_(!1),200)},onKeyDown:e=>{let t=a.length;"Backspace"===e.key&&t>0&&!f&&l(a.slice(0,t-1))},onChange:e=>{let t=e.target.value;w(t);let a=i.filter(e=>{var a;return null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(t.toLowerCase())});m(a)}})})]}),h&&(0,r.jsx)("div",{className:"absolute z-10 top-14 w-full rounded-lg bg-slate-800 shadow-md border border-slate-800 text-sm text-black",children:(0,r.jsx)("div",{className:"p-2",children:f?g.length>0?g.map((e,t)=>(0,r.jsx)("button",{className:"w-full text-left p-2 hover:bg-slate-700 active:bg-slate-600 rounded-lg duration-150",onClick:()=>l([...a,e]),children:e.name},t)):(0,r.jsx)("div",{className:"text-sm text-black p-2",children:"No categories found"}):i.map((e,t)=>(0,r.jsx)("button",{className:"w-full text-left p-2 hover:bg-slate-700 active:bg-slate-600 rounded-lg duration-150",onClick:()=>l([...a,e]),children:e.name},t))})})]})}},33331:function(e,t,a){a.d(t,{c:function(){return n},G:function(){return c}});var r=a(57437),s=a(57999);let n=e=>{let{children:t,className:a="",number:n,title:c,description:o}=e;return(0,r.jsxs)("li",{className:"flex items-start space-x-4 mt-4 ".concat((0,s.Z)(a)),children:[(0,r.jsx)("div",{className:"flex-none flex items-center justify-center w-7 h-7 rounded-full bg-slate-800 text-black font-medium text-sm",children:n}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg text-black",children:c}),(0,r.jsx)("p",{className:"text-sm text-black mt-1",children:o})]}),(0,r.jsx)("div",{className:"mt-6 space-y-4",children:t})]})]})},c=e=>{let{children:t,className:a="",...n}=e;return(0,r.jsx)("form",{...n,children:(0,r.jsx)("ul",{className:"space-y-10 ".concat((0,s.Z)(a)),children:t})})}},45222:function(e,t,a){a.d(t,{m:function(){return l},W:function(){return o}});var r=a(57437),s=a(54796),n=a(57999),c=a(2265);let o=e=>{let{children:t,className:a="",onChange:o,max:l=3,files:i=[],required:u=!1,isLoad:d=!1}=e,p=(0,c.useRef)(null);return(0,r.jsxs)("div",{className:(0,n.Z)("flex flex-wrap gap-3 ".concat(a)),children:[t,(null==i?void 0:i.length)<l?(0,r.jsx)("label",{htmlFor:"image-upload",className:"".concat(d?" pointer-events-none":""," relative flex-none flex items-center justify-center w-full max-w-[13rem] h-36 rounded-md overflow-hidden border border-dashed border-slate-700 cursor-pointer"),children:d?(0,r.jsx)(s.yM,{className:"absolute inset-0 m-auto text-orange-500"}):(0,r.jsxs)("div",{className:"text-sm text-black space-y-1",children:[(0,r.jsx)(s.SC,{className:"mx-auto w-6 h-6"}),"Upload"]})}):"",(0,r.jsx)("input",{ref:p,required:u,id:"image-upload",name:"file-upload",type:"file",className:"sr-only",accept:"image/*",onChange:o})]})},l=e=>{let{className:t="",src:a,onRemove:c}=e;return(0,r.jsxs)("div",{className:(0,n.Z)("relative flex-none w-full max-w-[13rem] h-36 rounded-md overflow-hidden border border-slate-700 group duration-150 ".concat(t)),children:[(0,r.jsx)("img",{src:a,className:"w-full h-full object-cover",loading:"lazy"}),(0,r.jsx)("button",{type:"button",onClick:c,className:"opacity-0 w-7 h-7 rounded-full flex items-center justify-center absolute inset-0 m-auto text-black bg-slate-50 hover:text-red-500 group-hover:opacity-100 duration-150",children:(0,r.jsx)(s.k9,{className:"w-6 h-6"})})]})}},51478:function(e,t,a){a.d(t,{Z:function(){return n}});var r=a(57437),s=a(57999),n=e=>{let{className:t,required:a,validate:n,...c}=e;return(0,r.jsx)("input",{...c,...n,className:(0,s.Z)("px-3 py-2 bg-white hover:bg-gray-800/40 focus:bg-gray-800/40 text-sm text-black placeholder-slate-500 outline-none focus:border-slate-600 shadow-sm rounded-lg duration-200 ".concat(t))})}},59789:function(e,t,a){var r=a(57437),s=a(57999);t.Z=e=>{let{className:t,children:a}=e;return(0,r.jsx)("span",{className:(0,s.Z)("text-sm font-medium text-red-500 block ".concat(t)),children:a})}},20257:function(e,t,a){var r=a(57437),s=a(57999);t.Z=e=>{let{children:t,className:a,...n}=e;return(0,r.jsx)("label",{...n,className:(0,s.Z)("text-sm text-black font-medium ".concat(a)),children:t})}},86087:function(e,t,a){a.d(t,{Z:function(){return r.Z}});var r=a(20257)},87725:function(e,t,a){var r=a(57437),s=a(2265),n=a(26930),c=a(54796);t.Z=e=>{let{src:t,required:a=!1,isLoad:o=!1,onChange:l}=e,i=(0,s.useRef)(null);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex gap-3 items-center flex-wrap sm:gap-6",children:[(0,r.jsxs)("label",{htmlFor:"logo-upload",className:"relative flex-none cursor-pointer w-24 h-24 rounded-full border border-slate-700 border-dashed",children:[t?(0,r.jsx)("img",{src:t,className:"w-full h-full rounded-full"}):"",o?(0,r.jsx)(c.yM,{className:"absolute inset-0 m-auto text-orange-500"}):""]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-black",children:"Tool logo"}),(0,r.jsx)("p",{className:"text-sm text-black",children:"Recommended size: 220x220 or 210x210 pixels"})]}),(0,r.jsx)("div",{className:"flex items-center gap-x-2",children:(0,r.jsx)(n.Z,{type:"button",className:" bg-slate-800 hover:bg-slate-800/50 text-xs",onClick:()=>i.current.click(),children:"Select an image"})})]}),(0,r.jsx)("input",{ref:i,id:"logo-upload",name:"logo-upload",type:"file",className:"sr-only ",accept:"image/*",onChange:l})]})}},71786:function(e,t,a){a.d(t,{Z:function(){return n}});var r=a(57437),s=a(57999),n=e=>{let{className:t="",validate:a,...n}=e;return(0,r.jsx)("input",{...n,...a,type:"radio",className:(0,s.Z)("form-radio border-gray-700 text-orange-500 ring-offset-gray-400 ring-gray-800 focus:ring-orange-500 bg-gray-700 checked:bg-gray-700 duration-150 ".concat(t))})}},94562:function(e,t,a){a.d(t,{Z:function(){return n}});var r=a(57437),s=a(57999),n=e=>{let{className:t,validate:a,...n}=e;return(0,r.jsx)("textarea",{...n,...a,className:(0,s.Z)("px-3 py-2 bg-slate-800/70 hover:bg-slate-800/40 focus:bg-slate-800/40 text-sm text-black placeholder-slate-500 outline-none border border-slate-800 focus:border-slate-600 shadow-sm rounded-lg duration-200 ".concat(t))})}},6347:function(e,t,a){var r=a(29222);t.Z=async e=>{let{files:t,options:a}=e,s=new FormData,n=Date.now()+t.name.replaceAll(" ","-");s.append("image",t,n);try{let{data:e}=await r.Z.post("https://www.marsx.dev/api/UploadFile",s);return{file:e.file.url.replace(/'/g,"\\'").replace("https://marscode.s3.eu-north-1.amazonaws.com/assets/img","https://mars-images.imgix.net")+"?auto=compress&fit=max"+(a?"&".concat(a):"")}}catch(e){console.log(e)}}},73550:function(e,t,a){a.d(t,{Z:function(){return r}});class r{constructor(e){this.supabase=e}}},11639:function(e,t,a){a.d(t,{F:function(){return n}});var r=a(31199),s=a.n(r);let n=new class{async get(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,r=this._cache.get(e);if(null!=r)return r;let s=await t();return this._cache.set(e,s,a),s}async del(e){this._cache.del(e)}constructor(){this._cache=new(s())({stdTTL:30})}}},38080:function(e,t,a){a.d(t,{Z:function(){return n}});var r=a(73550),s=a(11639);class n extends r.Z{async getProducts(e){let{data:t,error:a}=await this.supabase.from("product_category_product").select("products(*)").eq("category_id",e).order("launch_date",{foreignTable:"products",ascending:!1});if(null!==a)throw Error(a.message);return t.map(e=>e.products)}async insert(e){let{data:t,error:a}=await this.supabase.from("product_categories").insert(e).select().single();if(null!==a)throw Error(a.message);return t}async insertProduct(e){let{data:t,error:a}=await this.supabase.from("product_category_product").insert(e).select().single();if(null!==a)throw Error(a.message);return t}async search(e){return s.F.get("categories-".concat(e),async()=>{let{data:t,error:a}=await this.supabase.from("product_categories").select().ilike("name","%".concat(e,"%")).limit(5);if(null!==a)throw Error(a.message);return t})}async getAll(){return s.F.get("all-categories",async()=>{let{data:e,error:t}=await this.supabase.from("product_categories").select();if(null!==t)throw Error(t.message);return e},3600)}}},29992:function(e,t,a){a.d(t,{Z:function(){return s}});var r=a(73550);class s extends r.Z{async getAll(){let{data:e,error:t}=await this.supabase.from("product_pricing_types").select().limit(10);if(null!==t)throw Error(t.message);return e}}},39232:function(e,t,a){a.d(t,{Z:function(){return n}});var r=a(73550),s=a(11639);class n extends r.Z{async getWeekNumber(e,t){let a="week-number-".concat(e,"-").concat(t);return s.F.get(a,async()=>{let{data:a,error:r}=await this.supabase.rpc("get_week_number",{date_in:e,start_day:t});if(null!==r)throw Error(r.message);return a})}async getWeeks(e,t){let{data:a,error:r}=await this.supabase.rpc("get_weeks",{year_in:e,start_day:t});if(null!==r)throw Error(r.message);return a.map(e=>({week:e.week_number,startDate:e.start_date,endDate:e.end_date}))}async getPrevLaunchDays(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{data:a,error:r}=await this.supabase.rpc("get_prev_launch_days",{_launch_date:e.toISOString(),_limit:t});if(null!==r)throw Error(r.message);return a.map(e=>({launchDate:new Date(e.launch_date),products:(e.products||[]).map(e=>({...e.product,product_pricing_types:e.product_pricing_types,product_categories:e.product_categories}))}))}async getNextLaunchDays(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{data:a,error:r}=await this.supabase.rpc("get_next_launch_days",{_launch_date:e.toISOString(),_limit:t});if(null!==r)throw Error(r.message);return a.map(e=>({launchDate:new Date(e.launch_date),products:(e.products||[]).map(e=>({...e.product,product_pricing_types:e.product_pricing_types,product_categories:e.product_categories}))}))}async getWeeklyWinners(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,{data:t,error:a}=await this.supabase.from("weekly_winners").select();if(null!==a)throw Error(a.message);return t.filter(t=>t.week!==e).map(e=>({...e.product_data.product,product_pricing_types:e.product_data.product_pricing_types,product_categories:e.product_data.product_categories}))}async getPrevLaunchWeeks(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,{data:s,error:n}=await this.supabase.rpc("get_prev_launch_weeks",{_year:e,_start_day:t,_launch_week:a,_limit:r});if(null!==n)throw Error(n.message);return s.map(e=>({week:e.week,startDate:new Date(e.start_date),endDate:new Date(e.end_date),products:(e.products||[]).map(e=>({...e.product,product_pricing_types:e.product_pricing_types,product_categories:e.product_categories}))}))}async getNextLaunchWeeks(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,{data:s,error:n}=await this.supabase.rpc("get_next_launch_weeks",{_year:e,_start_day:t,_launch_week:a,_limit:r});if(null!==n)throw Error(n.message);return s.map(e=>({week:e.week,startDate:new Date(e.start_date),endDate:new Date(e.end_date),products:(e.products||[]).map(e=>({...e.product,product_pricing_types:e.product_pricing_types,product_categories:e.product_categories}))}))}async getProductsCountByDay(e,t){let{data:a,error:r}=await this.supabase.rpc("get_products_count_by_date",{_start_date:e.toISOString(),_end_date:t.toISOString()});if(null!==r)throw Error(r.message);return a.map(e=>({date:new Date(e.date),count:e.product_count}))}async getProductsCountByWeek(e,t,a){let r=async(e,t,a)=>{let{data:r,error:s}=await this.supabase.rpc("get_products_count_by_week",{start_week:e,end_week:t,year_in:a,start_day:2});if(null!==s)throw Error(s.message);return r.map(e=>({week:e.week_number,startDate:new Date(e.start_date),endDate:new Date(e.end_date),count:e.product_count}))},s=[];if(t<=52)s=await r(e,t,a);else{let n=await r(e,52,a),c=await r(1,t-52,a+1);s=[...n,...c]}return s}getProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"votes_count",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4?arguments[4]:void 0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.EXTENDED_PRODUCT_SELECT,o="products-".concat(e,"-").concat(t,"-").concat(n,"-").concat(r,"-").concat(a,"-").concat(c);return s.F.get(o,async()=>{let s=this.supabase.from("products").select(c).eq("deleted",!1);return n&&(s=s.eq("product_categories.id",n)),s.range(a*(r-1),a*r-1).order(e,{ascending:t})})}async getSimilarProducts(e){let{data:t,error:a}=await this.supabase.rpc("get_similar_products",{_product_id:e});if(null!==a)throw Error(a.message);return t}async getTopProducts(e,t){let{data:a,error:r}=await this.getProducts(e,t);if(r)throw Error(r.message);return a}async getMostDiscussedProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,{data:t,error:a}=await this.supabase.from("products").select(this.EXTENDED_PRODUCT_SELECT).eq("deleted",!1).order("comments_count",{ascending:!1}).limit(e);if(null!==a)throw Error(a.message);return t}async getRelatedProducts(e,t,a,r){let{data:s,error:n}=await this.getProducts(a,r).neq("id",e);if(n)return console.error(n),[];let c=s.filter(e=>{var a;return null===(a=e.product_categories)||void 0===a?void 0:a.some(e=>t.includes(e.name))}).slice(0,8);return c}async getUserProductsById(e){let{data:t}=await this.supabase.from("products").select(this.DEFULT_PRODUCT_SELECT).eq("owner_id",e).eq("deleted",!1);return t}async getUserVoteById(e,t){if(!e||!t)return 0;let{data:a}=await this.supabase.from("product_votes").select().eq("user_id",e).eq("product_id",t).maybeSingle();return a}async getRandomTools(e){let{data:t}=await this.supabase.from("products").select(this.EXTENDED_PRODUCT_SELECT).eq("deleted",!1).limit(e);return t}async getToolsByNameOrDescription(e,t){let a="product-search-by-text-".concat(e,"-").concat(t);return s.F.get(a,async()=>{let a="%".concat(e,"%"),{data:r}=await this.supabase.from("products").select(this.EXTENDED_PRODUCT_SELECT).eq("deleted",!1).or("description.ilike.".concat(a,",slogan.ilike.").concat(a,",name.ilike.").concat(a)).limit(t).order("votes_count",{ascending:!1});return r})}async getById(e){let t="product-details-id-".concat(e);return s.F.get(t,async()=>this._getOne("id",e))}async getBySlug(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="product-details-slug-".concat(e),r=await s.F.get(a,async()=>{let{data:t}=await this.supabase.from("products").select(this.DEFULT_PRODUCT_SELECT).eq("slug",e).single();return t});return t&&r&&!r.deleted&&this.viewed(r.id),r}async toggleVote(e,t){let{data:a}=await this.supabase.rpc("toggleProductVote",{_product_id:e,_user_id:t});return null!=a?a:0}async viewed(e){let{data:t}=await this.supabase.rpc("updateViews",{_product_id:e});return null!=t?t:0}async insert(e,t){let{data:a,error:r}=await this.supabase.from("products").insert(e).select().single();if(null!==r)throw Error(r.message);return 0!==t.length&&await Promise.all(t.map(async e=>await this._addProductToCategory(a.id,e))),a}async update(e,t){var a;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=(a=["deleted_at","deleted"],Object.fromEntries(Object.entries(t).filter(e=>{let[t,r]=e;return!a.includes(t)}))),{data:n,error:c}=await this.supabase.from("products").update(s).eq("id",e).select().single();if(await this.supabase.from("product_category_product").delete().eq("product_id",e),await Promise.all(r.map(async t=>await this._addProductToCategory(e,t))),null!=c)throw Error(c.message);return n}async delete(e){let{error:t}=await this.supabase.from("products").update({deleted:!0,deleted_at:new Date().toISOString()}).eq("id",e);if(null!==t)throw Error(t.message)}async search(e){let{data:t,error:a}=await this.supabase.from("products").select("*").ilike("name","%".concat(e,"%")).eq("deleted",!1).limit(8);if(null!==a)throw Error(a.message);return t}async _addProductToCategory(e,t){let{error:a}=await this.supabase.from("product_category_product").insert({product_id:e,category_id:t});if(null!=a)throw Error(a.message);return!0}async _getOne(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.DEFULT_PRODUCT_SELECT,{data:r}=await this.supabase.from("products").select(a).eq("deleted",!1).eq(e,t).single();return r}constructor(...e){super(...e),this.DEFULT_PRODUCT_SELECT="*, product_pricing_types(*), product_categories(name, id)",this.EXTENDED_PRODUCT_SELECT="*, product_pricing_types(*), product_categories(*), profiles (full_name)",this.EXTENDED_PRODUCT_SELECT_WITH_CATEGORIES="*, product_pricing_types(*), product_categories!inner(*), profiles (full_name)"}}}}]);