{"version":3,"file":"middleware.js","mappings":"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","sources":["webpack://_N_E/./node_modules/next/dist/esm/server/web/globals.js","webpack://_N_E/./node_modules/next/dist/esm/server/web/error.js","webpack://_N_E/./node_modules/next/dist/esm/server/web/utils.js","webpack://_N_E/./node_modules/next/dist/esm/server/web/spec-extension/fetch-event.js","webpack://_N_E/./node_modules/next/dist/esm/shared/lib/i18n/detect-domain-locale.js","webpack://_N_E/./node_modules/next/dist/esm/shared/lib/router/utils/remove-trailing-slash.js","webpack://_N_E/./node_modules/next/dist/esm/shared/lib/router/utils/parse-path.js","webpack://_N_E/./node_modules/next/dist/esm/shared/lib/router/utils/add-path-prefix.js","webpack://_N_E/./node_modules/next/dist/esm/shared/lib/router/utils/add-path-suffix.js","webpack://_N_E/./node_modules/next/dist/esm/shared/lib/router/utils/path-has-prefix.js","webpack://_N_E/./node_modules/next/dist/esm/shared/lib/router/utils/add-locale.js","webpack://_N_E/./node_modules/next/dist/esm/shared/lib/router/utils/format-next-pathname-info.js","webpack://_N_E/./node_modules/next/dist/esm/shared/lib/get-hostname.js","webpack://_N_E/./node_modules/next/dist/esm/shared/lib/i18n/normalize-locale-path.js","webpack://_N_E/./node_modules/next/dist/esm/shared/lib/router/utils/remove-path-prefix.js","webpack://_N_E/./node_modules/next/dist/esm/shared/lib/router/utils/get-next-pathname-info.js","webpack://_N_E/./node_modules/next/dist/esm/server/web/next-url.js","webpack://_N_E/./node_modules/next/dist/esm/server/web/spec-extension/cookies.js","webpack://_N_E/./node_modules/next/dist/esm/server/web/spec-extension/request.js","webpack://_N_E/./node_modules/next/dist/esm/server/web/spec-extension/response.js","webpack://_N_E/./node_modules/next/dist/esm/shared/lib/router/utils/relativize-url.js","webpack://_N_E/./node_modules/next/dist/esm/client/components/app-router-headers.js","webpack://_N_E/./node_modules/next/dist/esm/server/internal-utils.js","webpack://_N_E/./node_modules/next/dist/esm/shared/lib/router/utils/app-paths.js","webpack://_N_E/./node_modules/next/dist/esm/lib/constants.js","webpack://_N_E/./node_modules/next/dist/esm/server/web/spec-extension/adapters/reflect.js","webpack://_N_E/./node_modules/next/dist/esm/server/web/spec-extension/adapters/headers.js","webpack://_N_E/./node_modules/next/dist/esm/server/web/spec-extension/adapters/request-cookies.js","webpack://_N_E/./node_modules/next/dist/esm/server/api-utils/index.js","webpack://_N_E/./node_modules/next/dist/esm/server/async-storage/draft-mode-provider.js","webpack://_N_E/./node_modules/next/dist/esm/server/async-storage/request-async-storage-wrapper.js","webpack://_N_E/./node_modules/next/dist/esm/client/components/async-local-storage.js","webpack://_N_E/./node_modules/next/dist/esm/client/components/request-async-storage.external.js","webpack://_N_E/./node_modules/next/dist/esm/server/web/adapter.js","webpack://_N_E/./node_modules/next/dist/esm/server/web/exports/next-response.js","webpack://_N_E/./middleware.ts","webpack://_N_E/","webpack://_N_E/./node_modules/@supabase/auth-helpers-nextjs/dist/index.js","webpack://_N_E/./node_modules/cross-fetch/dist/browser-ponyfill.js","webpack://_N_E/./node_modules/es5-ext/global.js","webpack://_N_E/./node_modules/next/dist/compiled/@edge-runtime/cookies/index.js","webpack://_N_E/./node_modules/next/dist/compiled/cookie/index.js","webpack://_N_E/./node_modules/set-cookie-parser/lib/set-cookie.js","webpack://_N_E/./node_modules/websocket/lib/browser.js","webpack://_N_E/./node_modules/websocket/lib/version.js","webpack://_N_E/./node_modules/jose/dist/browser/lib/buffer_utils.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/base64url.js","webpack://_N_E/./node_modules/jose/dist/browser/util/errors.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/webcrypto.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/random.js","webpack://_N_E/./node_modules/jose/dist/browser/lib/iv.js","webpack://_N_E/./node_modules/jose/dist/browser/lib/check_iv_length.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/check_cek_length.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/decrypt.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/zlib.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/bogus.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/aeskw.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/ecdhes.js","webpack://_N_E/./node_modules/jose/dist/browser/lib/check_p2s.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/pbes2kw.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/subtle_rsaes.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/rsaes.js","webpack://_N_E/./node_modules/jose/dist/browser/lib/cek.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/asn1.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/jwk_to_key.js","webpack://_N_E/./node_modules/jose/dist/browser/key/import.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/encrypt.js","webpack://_N_E/./node_modules/jose/dist/browser/lib/aesgcmkw.js","webpack://_N_E/./node_modules/jose/dist/browser/lib/decrypt_key_management.js","webpack://_N_E/./node_modules/jose/dist/browser/lib/validate_crit.js","webpack://_N_E/./node_modules/jose/dist/browser/jwe/flattened/decrypt.js","webpack://_N_E/./node_modules/jose/dist/browser/jwe/compact/decrypt.js","webpack://_N_E/./node_modules/jose/dist/browser/jwe/general/decrypt.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/key_to_jwk.js","webpack://_N_E/./node_modules/jose/dist/browser/key/export.js","webpack://_N_E/./node_modules/jose/dist/browser/lib/encrypt_key_management.js","webpack://_N_E/./node_modules/jose/dist/browser/jwe/flattened/encrypt.js","webpack://_N_E/./node_modules/jose/dist/browser/jwe/general/encrypt.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/subtle_dsa.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/verify.js","webpack://_N_E/./node_modules/jose/dist/browser/jws/flattened/verify.js","webpack://_N_E/./node_modules/jose/dist/browser/jws/compact/verify.js","webpack://_N_E/./node_modules/jose/dist/browser/jws/general/verify.js","webpack://_N_E/./node_modules/jose/dist/browser/lib/secs.js","webpack://_N_E/./node_modules/jose/dist/browser/lib/jwt_claims_set.js","webpack://_N_E/./node_modules/jose/dist/browser/jwt/verify.js","webpack://_N_E/./node_modules/jose/dist/browser/jwt/decrypt.js","webpack://_N_E/./node_modules/jose/dist/browser/jwe/compact/encrypt.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/sign.js","webpack://_N_E/./node_modules/jose/dist/browser/jws/flattened/sign.js","webpack://_N_E/./node_modules/jose/dist/browser/jws/compact/sign.js","webpack://_N_E/./node_modules/jose/dist/browser/jws/general/sign.js","webpack://_N_E/./node_modules/jose/dist/browser/jwt/produce.js","webpack://_N_E/./node_modules/jose/dist/browser/jwt/sign.js","webpack://_N_E/./node_modules/jose/dist/browser/jwt/encrypt.js","webpack://_N_E/./node_modules/jose/dist/browser/jwk/thumbprint.js","webpack://_N_E/./node_modules/jose/dist/browser/jwk/embedded.js","webpack://_N_E/./node_modules/jose/dist/browser/jwks/local.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/fetch_jwks.js","webpack://_N_E/./node_modules/jose/dist/browser/jwks/remote.js","webpack://_N_E/./node_modules/jose/dist/browser/jwt/unsecured.js","webpack://_N_E/./node_modules/jose/dist/browser/util/base64url.js","webpack://_N_E/./node_modules/jose/dist/browser/util/decode_protected_header.js","webpack://_N_E/./node_modules/jose/dist/browser/util/decode_jwt.js","webpack://_N_E/./node_modules/jose/dist/browser/runtime/generate.js","webpack://_N_E/./node_modules/jose/dist/browser/key/generate_key_pair.js","webpack://_N_E/./node_modules/jose/dist/browser/key/generate_secret.js","webpack://_N_E/./node_modules/jose/dist/browser/index.js","webpack://_N_E/./node_modules/@supabase/functions-js/dist/module/helper.js","webpack://_N_E/./node_modules/@supabase/functions-js/dist/module/types.js","webpack://_N_E/./node_modules/@supabase/functions-js/dist/module/FunctionsClient.js","webpack://_N_E/./node_modules/@supabase/postgrest-js/dist/module/PostgrestBuilder.js","webpack://_N_E/./node_modules/@supabase/postgrest-js/dist/module/PostgrestTransformBuilder.js","webpack://_N_E/./node_modules/@supabase/postgrest-js/dist/module/PostgrestFilterBuilder.js","webpack://_N_E/./node_modules/@supabase/postgrest-js/dist/module/PostgrestQueryBuilder.js","webpack://_N_E/./node_modules/@supabase/postgrest-js/dist/module/version.js","webpack://_N_E/./node_modules/@supabase/postgrest-js/dist/module/constants.js","webpack://_N_E/./node_modules/@supabase/postgrest-js/dist/module/PostgrestClient.js","webpack://_N_E/./node_modules/@supabase/postgrest-js/dist/module/index.js","webpack://_N_E/./node_modules/@supabase/realtime-js/dist/module/lib/version.js","webpack://_N_E/./node_modules/@supabase/realtime-js/dist/module/lib/constants.js","webpack://_N_E/./node_modules/@supabase/realtime-js/dist/module/lib/timer.js","webpack://_N_E/./node_modules/@supabase/realtime-js/dist/module/lib/serializer.js","webpack://_N_E/./node_modules/@supabase/realtime-js/dist/module/lib/push.js","webpack://_N_E/./node_modules/@supabase/realtime-js/dist/module/RealtimePresence.js","webpack://_N_E/./node_modules/@supabase/realtime-js/dist/module/lib/transformers.js","webpack://_N_E/./node_modules/@supabase/realtime-js/dist/module/RealtimeChannel.js","webpack://_N_E/./node_modules/@supabase/realtime-js/dist/module/RealtimeClient.js","webpack://_N_E/./node_modules/@supabase/realtime-js/dist/module/index.js","webpack://_N_E/./node_modules/@supabase/storage-js/dist/module/lib/errors.js","webpack://_N_E/./node_modules/@supabase/storage-js/dist/module/lib/helpers.js","webpack://_N_E/./node_modules/@supabase/storage-js/dist/module/lib/fetch.js","webpack://_N_E/./node_modules/@supabase/storage-js/dist/module/packages/StorageFileApi.js","webpack://_N_E/./node_modules/@supabase/storage-js/dist/module/lib/version.js","webpack://_N_E/./node_modules/@supabase/storage-js/dist/module/lib/constants.js","webpack://_N_E/./node_modules/@supabase/storage-js/dist/module/packages/StorageBucketApi.js","webpack://_N_E/./node_modules/@supabase/storage-js/dist/module/StorageClient.js","webpack://_N_E/./node_modules/@supabase/supabase-js/dist/module/lib/version.js","webpack://_N_E/./node_modules/@supabase/supabase-js/dist/module/lib/constants.js","webpack://_N_E/./node_modules/@supabase/supabase-js/dist/module/lib/fetch.js","webpack://_N_E/./node_modules/@supabase/supabase-js/dist/module/lib/helpers.js","webpack://_N_E/./node_modules/@supabase/gotrue-js/dist/module/lib/helpers.js","webpack://_N_E/./node_modules/@supabase/gotrue-js/dist/module/lib/errors.js","webpack://_N_E/./node_modules/@supabase/gotrue-js/dist/module/lib/fetch.js","webpack://_N_E/./node_modules/@supabase/gotrue-js/dist/module/GoTrueAdminApi.js","webpack://_N_E/./node_modules/@supabase/gotrue-js/dist/module/lib/version.js","webpack://_N_E/./node_modules/@supabase/gotrue-js/dist/module/lib/constants.js","webpack://_N_E/./node_modules/@supabase/gotrue-js/dist/module/lib/local-storage.js","webpack://_N_E/./node_modules/@supabase/gotrue-js/dist/module/lib/polyfills.js","webpack://_N_E/./node_modules/@supabase/gotrue-js/dist/module/GoTrueClient.js","webpack://_N_E/./node_modules/@supabase/gotrue-js/dist/module/index.js","webpack://_N_E/./node_modules/@supabase/supabase-js/dist/module/lib/SupabaseAuthClient.js","webpack://_N_E/./node_modules/@supabase/supabase-js/dist/module/SupabaseClient.js","webpack://_N_E/./node_modules/@supabase/supabase-js/dist/module/index.js","webpack://_N_E/./node_modules/@supabase/auth-helpers-shared/dist/index.mjs"],"sourcesContent":["async function registerInstrumentation() {\n    if (\"_ENTRIES\" in globalThis && _ENTRIES.middleware_instrumentation && _ENTRIES.middleware_instrumentation.register) {\n        try {\n            await _ENTRIES.middleware_instrumentation.register();\n        } catch (err) {\n            err.message = `An error occurred while loading instrumentation hook: ${err.message}`;\n            throw err;\n        }\n    }\n}\nlet registerInstrumentationPromise = null;\nexport function ensureInstrumentationRegistered() {\n    if (!registerInstrumentationPromise) {\n        registerInstrumentationPromise = registerInstrumentation();\n    }\n    return registerInstrumentationPromise;\n}\nfunction getUnsupportedModuleErrorMessage(module) {\n    // warning: if you change these messages, you must adjust how react-dev-overlay's middleware detects modules not found\n    return `The edge runtime does not support Node.js '${module}' module.\nLearn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`;\n}\nfunction __import_unsupported(moduleName) {\n    const proxy = new Proxy(function() {}, {\n        get (_obj, prop) {\n            if (prop === \"then\") {\n                return {};\n            }\n            throw new Error(getUnsupportedModuleErrorMessage(moduleName));\n        },\n        construct () {\n            throw new Error(getUnsupportedModuleErrorMessage(moduleName));\n        },\n        apply (_target, _this, args) {\n            if (typeof args[0] === \"function\") {\n                return args[0](proxy);\n            }\n            throw new Error(getUnsupportedModuleErrorMessage(moduleName));\n        }\n    });\n    return new Proxy({}, {\n        get: ()=>proxy\n    });\n}\nfunction enhanceGlobals() {\n    // The condition is true when the \"process\" module is provided\n    if (process !== global.process) {\n        // prefer local process but global.process has correct \"env\"\n        process.env = global.process.env;\n        global.process = process;\n    }\n    // to allow building code that import but does not use node.js modules,\n    // webpack will expect this function to exist in global scope\n    Object.defineProperty(globalThis, \"__import_unsupported\", {\n        value: __import_unsupported,\n        enumerable: false,\n        configurable: false\n    });\n    // Eagerly fire instrumentation hook to make the startup faster.\n    void ensureInstrumentationRegistered();\n}\nenhanceGlobals();\n\n//# sourceMappingURL=globals.js.map","export class PageSignatureError extends Error {\n    constructor({ page }){\n        super(`The middleware \"${page}\" accepts an async API directly with the form:\n  \n  export function middleware(request, event) {\n    return NextResponse.redirect('/new-location')\n  }\n  \n  Read more: https://nextjs.org/docs/messages/middleware-new-signature\n  `);\n    }\n}\nexport class RemovedPageError extends Error {\n    constructor(){\n        super(`The request.page has been deprecated in favour of \\`URLPattern\\`.\n  Read more: https://nextjs.org/docs/messages/middleware-request-page\n  `);\n    }\n}\nexport class RemovedUAError extends Error {\n    constructor(){\n        super(`The request.ua has been removed in favour of \\`userAgent\\` function.\n  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent\n  `);\n    }\n}\n\n//# sourceMappingURL=error.js.map","/**\n * Converts a Node.js IncomingHttpHeaders object to a Headers object. Any\n * headers with multiple values will be joined with a comma and space. Any\n * headers that have an undefined value will be ignored and others will be\n * coerced to strings.\n *\n * @param nodeHeaders the headers object to convert\n * @returns the converted headers object\n */ export function fromNodeOutgoingHttpHeaders(nodeHeaders) {\n    const headers = new Headers();\n    for (let [key, value] of Object.entries(nodeHeaders)){\n        const values = Array.isArray(value) ? value : [\n            value\n        ];\n        for (let v of values){\n            if (typeof v === \"undefined\") continue;\n            if (typeof v === \"number\") {\n                v = v.toString();\n            }\n            headers.append(key, v);\n        }\n    }\n    return headers;\n}\n/*\n  Set-Cookie header field-values are sometimes comma joined in one string. This splits them without choking on commas\n  that are within a single set-cookie field-value, such as in the Expires portion.\n  This is uncommon, but explicitly allowed - see https://tools.ietf.org/html/rfc2616#section-4.2\n  Node.js does this for every header *except* set-cookie - see https://github.com/nodejs/node/blob/d5e363b77ebaf1caf67cd7528224b651c86815c1/lib/_http_incoming.js#L128\n  React Native's fetch does this for *every* header, including set-cookie.\n  \n  Based on: https://github.com/google/j2objc/commit/16820fdbc8f76ca0c33472810ce0cb03d20efe25\n  Credits to: https://github.com/tomball for original and https://github.com/chrusart for JavaScript implementation\n*/ export function splitCookiesString(cookiesString) {\n    var cookiesStrings = [];\n    var pos = 0;\n    var start;\n    var ch;\n    var lastComma;\n    var nextStart;\n    var cookiesSeparatorFound;\n    function skipWhitespace() {\n        while(pos < cookiesString.length && /\\s/.test(cookiesString.charAt(pos))){\n            pos += 1;\n        }\n        return pos < cookiesString.length;\n    }\n    function notSpecialChar() {\n        ch = cookiesString.charAt(pos);\n        return ch !== \"=\" && ch !== \";\" && ch !== \",\";\n    }\n    while(pos < cookiesString.length){\n        start = pos;\n        cookiesSeparatorFound = false;\n        while(skipWhitespace()){\n            ch = cookiesString.charAt(pos);\n            if (ch === \",\") {\n                // ',' is a cookie separator if we have later first '=', not ';' or ','\n                lastComma = pos;\n                pos += 1;\n                skipWhitespace();\n                nextStart = pos;\n                while(pos < cookiesString.length && notSpecialChar()){\n                    pos += 1;\n                }\n                // currently special character\n                if (pos < cookiesString.length && cookiesString.charAt(pos) === \"=\") {\n                    // we found cookies separator\n                    cookiesSeparatorFound = true;\n                    // pos is inside the next cookie, so back up and return it.\n                    pos = nextStart;\n                    cookiesStrings.push(cookiesString.substring(start, lastComma));\n                    start = pos;\n                } else {\n                    // in param ',' or param separator ';',\n                    // we continue from that comma\n                    pos = lastComma + 1;\n                }\n            } else {\n                pos += 1;\n            }\n        }\n        if (!cookiesSeparatorFound || pos >= cookiesString.length) {\n            cookiesStrings.push(cookiesString.substring(start, cookiesString.length));\n        }\n    }\n    return cookiesStrings;\n}\n/**\n * Converts a Headers object to a Node.js OutgoingHttpHeaders object. This is\n * required to support the set-cookie header, which may have multiple values.\n *\n * @param headers the headers object to convert\n * @returns the converted headers object\n */ export function toNodeOutgoingHttpHeaders(headers) {\n    const nodeHeaders = {};\n    const cookies = [];\n    if (headers) {\n        for (const [key, value] of headers.entries()){\n            if (key.toLowerCase() === \"set-cookie\") {\n                // We may have gotten a comma joined string of cookies, or multiple\n                // set-cookie headers. We need to merge them into one header array\n                // to represent all the cookies.\n                cookies.push(...splitCookiesString(value));\n                nodeHeaders[key] = cookies.length === 1 ? cookies[0] : cookies;\n            } else {\n                nodeHeaders[key] = value;\n            }\n        }\n    }\n    return nodeHeaders;\n}\n/**\n * Validate the correctness of a user-provided URL.\n */ export function validateURL(url) {\n    try {\n        return String(new URL(String(url)));\n    } catch (error) {\n        throw new Error(`URL is malformed \"${String(url)}\". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`, {\n            cause: error\n        });\n    }\n}\n\n//# sourceMappingURL=utils.js.map","import { PageSignatureError } from \"../error\";\nconst responseSymbol = Symbol(\"response\");\nconst passThroughSymbol = Symbol(\"passThrough\");\nexport const waitUntilSymbol = Symbol(\"waitUntil\");\nclass FetchEvent {\n    // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n    constructor(_request){\n        this[waitUntilSymbol] = [];\n        this[passThroughSymbol] = false;\n    }\n    respondWith(response) {\n        if (!this[responseSymbol]) {\n            this[responseSymbol] = Promise.resolve(response);\n        }\n    }\n    passThroughOnException() {\n        this[passThroughSymbol] = true;\n    }\n    waitUntil(promise) {\n        this[waitUntilSymbol].push(promise);\n    }\n}\nexport class NextFetchEvent extends FetchEvent {\n    constructor(params){\n        super(params.request);\n        this.sourcePage = params.page;\n    }\n    /**\n   * @deprecated The `request` is now the first parameter and the API is now async.\n   *\n   * Read more: https://nextjs.org/docs/messages/middleware-new-signature\n   */ get request() {\n        throw new PageSignatureError({\n            page: this.sourcePage\n        });\n    }\n    /**\n   * @deprecated Using `respondWith` is no longer needed.\n   *\n   * Read more: https://nextjs.org/docs/messages/middleware-new-signature\n   */ respondWith() {\n        throw new PageSignatureError({\n            page: this.sourcePage\n        });\n    }\n}\n\n//# sourceMappingURL=fetch-event.js.map","export function detectDomainLocale(domainItems, hostname, detectedLocale) {\n    if (!domainItems) return;\n    if (detectedLocale) {\n        detectedLocale = detectedLocale.toLowerCase();\n    }\n    for (const item of domainItems){\n        var _item_domain, _item_locales;\n        // remove port if present\n        const domainHostname = (_item_domain = item.domain) == null ? void 0 : _item_domain.split(\":\")[0].toLowerCase();\n        if (hostname === domainHostname || detectedLocale === item.defaultLocale.toLowerCase() || ((_item_locales = item.locales) == null ? void 0 : _item_locales.some((locale)=>locale.toLowerCase() === detectedLocale))) {\n            return item;\n        }\n    }\n}\n\n//# sourceMappingURL=detect-domain-locale.js.map","/**\n * Removes the trailing slash for a given route or page path. Preserves the\n * root page. Examples:\n *   - `/foo/bar/` -> `/foo/bar`\n *   - `/foo/bar` -> `/foo/bar`\n *   - `/` -> `/`\n */ export function removeTrailingSlash(route) {\n    return route.replace(/\\/$/, \"\") || \"/\";\n}\n\n//# sourceMappingURL=remove-trailing-slash.js.map","/**\n * Given a path this function will find the pathname, query and hash and return\n * them. This is useful to parse full paths on the client side.\n * @param path A path to parse e.g. /foo/bar?id=1#hash\n */ export function parsePath(path) {\n    const hashIndex = path.indexOf(\"#\");\n    const queryIndex = path.indexOf(\"?\");\n    const hasQuery = queryIndex > -1 && (hashIndex < 0 || queryIndex < hashIndex);\n    if (hasQuery || hashIndex > -1) {\n        return {\n            pathname: path.substring(0, hasQuery ? queryIndex : hashIndex),\n            query: hasQuery ? path.substring(queryIndex, hashIndex > -1 ? hashIndex : undefined) : \"\",\n            hash: hashIndex > -1 ? path.slice(hashIndex) : \"\"\n        };\n    }\n    return {\n        pathname: path,\n        query: \"\",\n        hash: \"\"\n    };\n}\n\n//# sourceMappingURL=parse-path.js.map","import { parsePath } from \"./parse-path\";\n/**\n * Adds the provided prefix to the given path. It first ensures that the path\n * is indeed starting with a slash.\n */ export function addPathPrefix(path, prefix) {\n    if (!path.startsWith(\"/\") || !prefix) {\n        return path;\n    }\n    const { pathname, query, hash } = parsePath(path);\n    return \"\" + prefix + pathname + query + hash;\n}\n\n//# sourceMappingURL=add-path-prefix.js.map","import { parsePath } from \"./parse-path\";\n/**\n * Similarly to `addPathPrefix`, this function adds a suffix at the end on the\n * provided path. It also works only for paths ensuring the argument starts\n * with a slash.\n */ export function addPathSuffix(path, suffix) {\n    if (!path.startsWith(\"/\") || !suffix) {\n        return path;\n    }\n    const { pathname, query, hash } = parsePath(path);\n    return \"\" + pathname + suffix + query + hash;\n}\n\n//# sourceMappingURL=add-path-suffix.js.map","import { parsePath } from \"./parse-path\";\n/**\n * Checks if a given path starts with a given prefix. It ensures it matches\n * exactly without containing extra chars. e.g. prefix /docs should replace\n * for /docs, /docs/, /docs/a but not /docsss\n * @param path The path to check.\n * @param prefix The prefix to check against.\n */ export function pathHasPrefix(path, prefix) {\n    if (typeof path !== \"string\") {\n        return false;\n    }\n    const { pathname } = parsePath(path);\n    return pathname === prefix || pathname.startsWith(prefix + \"/\");\n}\n\n//# sourceMappingURL=path-has-prefix.js.map","import { addPathPrefix } from \"./add-path-prefix\";\nimport { pathHasPrefix } from \"./path-has-prefix\";\n/**\n * For a given path and a locale, if the locale is given, it will prefix the\n * locale. The path shouldn't be an API path. If a default locale is given the\n * prefix will be omitted if the locale is already the default locale.\n */ export function addLocale(path, locale, defaultLocale, ignorePrefix) {\n    // If no locale was given or the locale is the default locale, we don't need\n    // to prefix the path.\n    if (!locale || locale === defaultLocale) return path;\n    const lower = path.toLowerCase();\n    // If the path is an API path or the path already has the locale prefix, we\n    // don't need to prefix the path.\n    if (!ignorePrefix) {\n        if (pathHasPrefix(lower, \"/api\")) return path;\n        if (pathHasPrefix(lower, \"/\" + locale.toLowerCase())) return path;\n    }\n    // Add the locale prefix to the path.\n    return addPathPrefix(path, \"/\" + locale);\n}\n\n//# sourceMappingURL=add-locale.js.map","import { removeTrailingSlash } from \"./remove-trailing-slash\";\nimport { addPathPrefix } from \"./add-path-prefix\";\nimport { addPathSuffix } from \"./add-path-suffix\";\nimport { addLocale } from \"./add-locale\";\nexport function formatNextPathnameInfo(info) {\n    let pathname = addLocale(info.pathname, info.locale, info.buildId ? undefined : info.defaultLocale, info.ignorePrefix);\n    if (info.buildId || !info.trailingSlash) {\n        pathname = removeTrailingSlash(pathname);\n    }\n    if (info.buildId) {\n        pathname = addPathSuffix(addPathPrefix(pathname, \"/_next/data/\" + info.buildId), info.pathname === \"/\" ? \"index.json\" : \".json\");\n    }\n    pathname = addPathPrefix(pathname, info.basePath);\n    return !info.buildId && info.trailingSlash ? !pathname.endsWith(\"/\") ? addPathSuffix(pathname, \"/\") : pathname : removeTrailingSlash(pathname);\n}\n\n//# sourceMappingURL=format-next-pathname-info.js.map","/**\n * Takes an object with a hostname property (like a parsed URL) and some\n * headers that may contain Host and returns the preferred hostname.\n * @param parsed An object containing a hostname property.\n * @param headers A dictionary with headers containing a `host`.\n */ export function getHostname(parsed, headers) {\n    // Get the hostname from the headers if it exists, otherwise use the parsed\n    // hostname.\n    let hostname;\n    if ((headers == null ? void 0 : headers.host) && !Array.isArray(headers.host)) {\n        hostname = headers.host.toString().split(\":\")[0];\n    } else if (parsed.hostname) {\n        hostname = parsed.hostname;\n    } else return;\n    return hostname.toLowerCase();\n}\n\n//# sourceMappingURL=get-hostname.js.map","/**\n * For a pathname that may include a locale from a list of locales, it\n * removes the locale from the pathname returning it alongside with the\n * detected locale.\n *\n * @param pathname A pathname that may include a locale.\n * @param locales A list of locales.\n * @returns The detected locale and pathname without locale\n */ export function normalizeLocalePath(pathname, locales) {\n    let detectedLocale;\n    // first item will be empty string from splitting at first char\n    const pathnameParts = pathname.split(\"/\");\n    (locales || []).some((locale)=>{\n        if (pathnameParts[1] && pathnameParts[1].toLowerCase() === locale.toLowerCase()) {\n            detectedLocale = locale;\n            pathnameParts.splice(1, 1);\n            pathname = pathnameParts.join(\"/\") || \"/\";\n            return true;\n        }\n        return false;\n    });\n    return {\n        pathname,\n        detectedLocale\n    };\n}\n\n//# sourceMappingURL=normalize-locale-path.js.map","import { pathHasPrefix } from \"./path-has-prefix\";\n/**\n * Given a path and a prefix it will remove the prefix when it exists in the\n * given path. It ensures it matches exactly without containing extra chars\n * and if the prefix is not there it will be noop.\n *\n * @param path The path to remove the prefix from.\n * @param prefix The prefix to be removed.\n */ export function removePathPrefix(path, prefix) {\n    // If the path doesn't start with the prefix we can return it as is. This\n    // protects us from situations where the prefix is a substring of the path\n    // prefix such as:\n    //\n    // For prefix: /blog\n    //\n    //   /blog -> true\n    //   /blog/ -> true\n    //   /blog/1 -> true\n    //   /blogging -> false\n    //   /blogging/ -> false\n    //   /blogging/1 -> false\n    if (!pathHasPrefix(path, prefix)) {\n        return path;\n    }\n    // Remove the prefix from the path via slicing.\n    const withoutPrefix = path.slice(prefix.length);\n    // If the path without the prefix starts with a `/` we can return it as is.\n    if (withoutPrefix.startsWith(\"/\")) {\n        return withoutPrefix;\n    }\n    // If the path without the prefix doesn't start with a `/` we need to add it\n    // back to the path to make sure it's a valid path.\n    return \"/\" + withoutPrefix;\n}\n\n//# sourceMappingURL=remove-path-prefix.js.map","import { normalizeLocalePath } from \"../../i18n/normalize-locale-path\";\nimport { removePathPrefix } from \"./remove-path-prefix\";\nimport { pathHasPrefix } from \"./path-has-prefix\";\nexport function getNextPathnameInfo(pathname, options) {\n    var _options_nextConfig;\n    const { basePath, i18n, trailingSlash } = (_options_nextConfig = options.nextConfig) != null ? _options_nextConfig : {};\n    const info = {\n        pathname,\n        trailingSlash: pathname !== \"/\" ? pathname.endsWith(\"/\") : trailingSlash\n    };\n    if (basePath && pathHasPrefix(info.pathname, basePath)) {\n        info.pathname = removePathPrefix(info.pathname, basePath);\n        info.basePath = basePath;\n    }\n    let pathnameNoDataPrefix = info.pathname;\n    if (info.pathname.startsWith(\"/_next/data/\") && info.pathname.endsWith(\".json\")) {\n        const paths = info.pathname.replace(/^\\/_next\\/data\\//, \"\").replace(/\\.json$/, \"\").split(\"/\");\n        const buildId = paths[0];\n        info.buildId = buildId;\n        pathnameNoDataPrefix = paths[1] !== \"index\" ? \"/\" + paths.slice(1).join(\"/\") : \"/\";\n        // update pathname with normalized if enabled although\n        // we use normalized to populate locale info still\n        if (options.parseData === true) {\n            info.pathname = pathnameNoDataPrefix;\n        }\n    }\n    // If provided, use the locale route normalizer to detect the locale instead\n    // of the function below.\n    if (i18n) {\n        let result = options.i18nProvider ? options.i18nProvider.analyze(info.pathname) : normalizeLocalePath(info.pathname, i18n.locales);\n        info.locale = result.detectedLocale;\n        var _result_pathname;\n        info.pathname = (_result_pathname = result.pathname) != null ? _result_pathname : info.pathname;\n        if (!result.detectedLocale && info.buildId) {\n            result = options.i18nProvider ? options.i18nProvider.analyze(pathnameNoDataPrefix) : normalizeLocalePath(pathnameNoDataPrefix, i18n.locales);\n            if (result.detectedLocale) {\n                info.locale = result.detectedLocale;\n            }\n        }\n    }\n    return info;\n}\n\n//# sourceMappingURL=get-next-pathname-info.js.map","import { detectDomainLocale } from \"../../shared/lib/i18n/detect-domain-locale\";\nimport { formatNextPathnameInfo } from \"../../shared/lib/router/utils/format-next-pathname-info\";\nimport { getHostname } from \"../../shared/lib/get-hostname\";\nimport { getNextPathnameInfo } from \"../../shared/lib/router/utils/get-next-pathname-info\";\nconst REGEX_LOCALHOST_HOSTNAME = /(?!^https?:\\/\\/)(127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\\[::1\\]|localhost)/;\nfunction parseURL(url, base) {\n    return new URL(String(url).replace(REGEX_LOCALHOST_HOSTNAME, \"localhost\"), base && String(base).replace(REGEX_LOCALHOST_HOSTNAME, \"localhost\"));\n}\nconst Internal = Symbol(\"NextURLInternal\");\nexport class NextURL {\n    constructor(input, baseOrOpts, opts){\n        let base;\n        let options;\n        if (typeof baseOrOpts === \"object\" && \"pathname\" in baseOrOpts || typeof baseOrOpts === \"string\") {\n            base = baseOrOpts;\n            options = opts || {};\n        } else {\n            options = opts || baseOrOpts || {};\n        }\n        this[Internal] = {\n            url: parseURL(input, base ?? options.base),\n            options: options,\n            basePath: \"\"\n        };\n        this.analyze();\n    }\n    analyze() {\n        var _this_Internal_options_nextConfig_i18n, _this_Internal_options_nextConfig, _this_Internal_domainLocale, _this_Internal_options_nextConfig_i18n1, _this_Internal_options_nextConfig1;\n        const info = getNextPathnameInfo(this[Internal].url.pathname, {\n            nextConfig: this[Internal].options.nextConfig,\n            parseData: !process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE,\n            i18nProvider: this[Internal].options.i18nProvider\n        });\n        const hostname = getHostname(this[Internal].url, this[Internal].options.headers);\n        this[Internal].domainLocale = this[Internal].options.i18nProvider ? this[Internal].options.i18nProvider.detectDomainLocale(hostname) : detectDomainLocale((_this_Internal_options_nextConfig = this[Internal].options.nextConfig) == null ? void 0 : (_this_Internal_options_nextConfig_i18n = _this_Internal_options_nextConfig.i18n) == null ? void 0 : _this_Internal_options_nextConfig_i18n.domains, hostname);\n        const defaultLocale = ((_this_Internal_domainLocale = this[Internal].domainLocale) == null ? void 0 : _this_Internal_domainLocale.defaultLocale) || ((_this_Internal_options_nextConfig1 = this[Internal].options.nextConfig) == null ? void 0 : (_this_Internal_options_nextConfig_i18n1 = _this_Internal_options_nextConfig1.i18n) == null ? void 0 : _this_Internal_options_nextConfig_i18n1.defaultLocale);\n        this[Internal].url.pathname = info.pathname;\n        this[Internal].defaultLocale = defaultLocale;\n        this[Internal].basePath = info.basePath ?? \"\";\n        this[Internal].buildId = info.buildId;\n        this[Internal].locale = info.locale ?? defaultLocale;\n        this[Internal].trailingSlash = info.trailingSlash;\n    }\n    formatPathname() {\n        return formatNextPathnameInfo({\n            basePath: this[Internal].basePath,\n            buildId: this[Internal].buildId,\n            defaultLocale: !this[Internal].options.forceLocale ? this[Internal].defaultLocale : undefined,\n            locale: this[Internal].locale,\n            pathname: this[Internal].url.pathname,\n            trailingSlash: this[Internal].trailingSlash\n        });\n    }\n    formatSearch() {\n        return this[Internal].url.search;\n    }\n    get buildId() {\n        return this[Internal].buildId;\n    }\n    set buildId(buildId) {\n        this[Internal].buildId = buildId;\n    }\n    get locale() {\n        return this[Internal].locale ?? \"\";\n    }\n    set locale(locale) {\n        var _this_Internal_options_nextConfig_i18n, _this_Internal_options_nextConfig;\n        if (!this[Internal].locale || !((_this_Internal_options_nextConfig = this[Internal].options.nextConfig) == null ? void 0 : (_this_Internal_options_nextConfig_i18n = _this_Internal_options_nextConfig.i18n) == null ? void 0 : _this_Internal_options_nextConfig_i18n.locales.includes(locale))) {\n            throw new TypeError(`The NextURL configuration includes no locale \"${locale}\"`);\n        }\n        this[Internal].locale = locale;\n    }\n    get defaultLocale() {\n        return this[Internal].defaultLocale;\n    }\n    get domainLocale() {\n        return this[Internal].domainLocale;\n    }\n    get searchParams() {\n        return this[Internal].url.searchParams;\n    }\n    get host() {\n        return this[Internal].url.host;\n    }\n    set host(value) {\n        this[Internal].url.host = value;\n    }\n    get hostname() {\n        return this[Internal].url.hostname;\n    }\n    set hostname(value) {\n        this[Internal].url.hostname = value;\n    }\n    get port() {\n        return this[Internal].url.port;\n    }\n    set port(value) {\n        this[Internal].url.port = value;\n    }\n    get protocol() {\n        return this[Internal].url.protocol;\n    }\n    set protocol(value) {\n        this[Internal].url.protocol = value;\n    }\n    get href() {\n        const pathname = this.formatPathname();\n        const search = this.formatSearch();\n        return `${this.protocol}//${this.host}${pathname}${search}${this.hash}`;\n    }\n    set href(url) {\n        this[Internal].url = parseURL(url);\n        this.analyze();\n    }\n    get origin() {\n        return this[Internal].url.origin;\n    }\n    get pathname() {\n        return this[Internal].url.pathname;\n    }\n    set pathname(value) {\n        this[Internal].url.pathname = value;\n    }\n    get hash() {\n        return this[Internal].url.hash;\n    }\n    set hash(value) {\n        this[Internal].url.hash = value;\n    }\n    get search() {\n        return this[Internal].url.search;\n    }\n    set search(value) {\n        this[Internal].url.search = value;\n    }\n    get password() {\n        return this[Internal].url.password;\n    }\n    set password(value) {\n        this[Internal].url.password = value;\n    }\n    get username() {\n        return this[Internal].url.username;\n    }\n    set username(value) {\n        this[Internal].url.username = value;\n    }\n    get basePath() {\n        return this[Internal].basePath;\n    }\n    set basePath(value) {\n        this[Internal].basePath = value.startsWith(\"/\") ? value : `/${value}`;\n    }\n    toString() {\n        return this.href;\n    }\n    toJSON() {\n        return this.href;\n    }\n    [Symbol.for(\"edge-runtime.inspect.custom\")]() {\n        return {\n            href: this.href,\n            origin: this.origin,\n            protocol: this.protocol,\n            username: this.username,\n            password: this.password,\n            host: this.host,\n            hostname: this.hostname,\n            port: this.port,\n            pathname: this.pathname,\n            search: this.search,\n            searchParams: this.searchParams,\n            hash: this.hash\n        };\n    }\n    clone() {\n        return new NextURL(String(this), this[Internal].options);\n    }\n}\n\n//# sourceMappingURL=next-url.js.map","export { RequestCookies, ResponseCookies } from \"next/dist/compiled/@edge-runtime/cookies\";\n\n//# sourceMappingURL=cookies.js.map","import { NextURL } from \"../next-url\";\nimport { toNodeOutgoingHttpHeaders, validateURL } from \"../utils\";\nimport { RemovedUAError, RemovedPageError } from \"../error\";\nimport { RequestCookies } from \"./cookies\";\nexport const INTERNALS = Symbol(\"internal request\");\nexport class NextRequest extends Request {\n    constructor(input, init = {}){\n        const url = typeof input !== \"string\" && \"url\" in input ? input.url : String(input);\n        validateURL(url);\n        if (input instanceof Request) super(input, init);\n        else super(url, init);\n        const nextUrl = new NextURL(url, {\n            headers: toNodeOutgoingHttpHeaders(this.headers),\n            nextConfig: init.nextConfig\n        });\n        this[INTERNALS] = {\n            cookies: new RequestCookies(this.headers),\n            geo: init.geo || {},\n            ip: init.ip,\n            nextUrl,\n            url: process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE ? url : nextUrl.toString()\n        };\n    }\n    [Symbol.for(\"edge-runtime.inspect.custom\")]() {\n        return {\n            cookies: this.cookies,\n            geo: this.geo,\n            ip: this.ip,\n            nextUrl: this.nextUrl,\n            url: this.url,\n            // rest of props come from Request\n            bodyUsed: this.bodyUsed,\n            cache: this.cache,\n            credentials: this.credentials,\n            destination: this.destination,\n            headers: Object.fromEntries(this.headers),\n            integrity: this.integrity,\n            keepalive: this.keepalive,\n            method: this.method,\n            mode: this.mode,\n            redirect: this.redirect,\n            referrer: this.referrer,\n            referrerPolicy: this.referrerPolicy,\n            signal: this.signal\n        };\n    }\n    get cookies() {\n        return this[INTERNALS].cookies;\n    }\n    get geo() {\n        return this[INTERNALS].geo;\n    }\n    get ip() {\n        return this[INTERNALS].ip;\n    }\n    get nextUrl() {\n        return this[INTERNALS].nextUrl;\n    }\n    /**\n   * @deprecated\n   * `page` has been deprecated in favour of `URLPattern`.\n   * Read more: https://nextjs.org/docs/messages/middleware-request-page\n   */ get page() {\n        throw new RemovedPageError();\n    }\n    /**\n   * @deprecated\n   * `ua` has been removed in favour of \\`userAgent\\` function.\n   * Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent\n   */ get ua() {\n        throw new RemovedUAError();\n    }\n    get url() {\n        return this[INTERNALS].url;\n    }\n}\n\n//# sourceMappingURL=request.js.map","import { NextURL } from \"../next-url\";\nimport { toNodeOutgoingHttpHeaders, validateURL } from \"../utils\";\nimport { ResponseCookies } from \"./cookies\";\nconst INTERNALS = Symbol(\"internal response\");\nconst REDIRECTS = new Set([\n    301,\n    302,\n    303,\n    307,\n    308\n]);\nfunction handleMiddlewareField(init, headers) {\n    var _init_request;\n    if (init == null ? void 0 : (_init_request = init.request) == null ? void 0 : _init_request.headers) {\n        if (!(init.request.headers instanceof Headers)) {\n            throw new Error(\"request.headers must be an instance of Headers\");\n        }\n        const keys = [];\n        for (const [key, value] of init.request.headers){\n            headers.set(\"x-middleware-request-\" + key, value);\n            keys.push(key);\n        }\n        headers.set(\"x-middleware-override-headers\", keys.join(\",\"));\n    }\n}\nexport class NextResponse extends Response {\n    constructor(body, init = {}){\n        super(body, init);\n        this[INTERNALS] = {\n            cookies: new ResponseCookies(this.headers),\n            url: init.url ? new NextURL(init.url, {\n                headers: toNodeOutgoingHttpHeaders(this.headers),\n                nextConfig: init.nextConfig\n            }) : undefined\n        };\n    }\n    [Symbol.for(\"edge-runtime.inspect.custom\")]() {\n        return {\n            cookies: this.cookies,\n            url: this.url,\n            // rest of props come from Response\n            body: this.body,\n            bodyUsed: this.bodyUsed,\n            headers: Object.fromEntries(this.headers),\n            ok: this.ok,\n            redirected: this.redirected,\n            status: this.status,\n            statusText: this.statusText,\n            type: this.type\n        };\n    }\n    get cookies() {\n        return this[INTERNALS].cookies;\n    }\n    static json(body, init) {\n        const response = Response.json(body, init);\n        return new NextResponse(response.body, response);\n    }\n    static redirect(url, init) {\n        const status = typeof init === \"number\" ? init : (init == null ? void 0 : init.status) ?? 307;\n        if (!REDIRECTS.has(status)) {\n            throw new RangeError('Failed to execute \"redirect\" on \"response\": Invalid status code');\n        }\n        const initObj = typeof init === \"object\" ? init : {};\n        const headers = new Headers(initObj == null ? void 0 : initObj.headers);\n        headers.set(\"Location\", validateURL(url));\n        return new NextResponse(null, {\n            ...initObj,\n            headers,\n            status\n        });\n    }\n    static rewrite(destination, init) {\n        const headers = new Headers(init == null ? void 0 : init.headers);\n        headers.set(\"x-middleware-rewrite\", validateURL(destination));\n        handleMiddlewareField(init, headers);\n        return new NextResponse(null, {\n            ...init,\n            headers\n        });\n    }\n    static next(init) {\n        const headers = new Headers(init == null ? void 0 : init.headers);\n        headers.set(\"x-middleware-next\", \"1\");\n        handleMiddlewareField(init, headers);\n        return new NextResponse(null, {\n            ...init,\n            headers\n        });\n    }\n}\n\n//# sourceMappingURL=response.js.map","/**\n * Given a URL as a string and a base URL it will make the URL relative\n * if the parsed protocol and host is the same as the one in the base\n * URL. Otherwise it returns the same URL string.\n */ export function relativizeURL(url, base) {\n    const baseURL = typeof base === \"string\" ? new URL(base) : base;\n    const relative = new URL(url, base);\n    const origin = baseURL.protocol + \"//\" + baseURL.host;\n    return relative.protocol + \"//\" + relative.host === origin ? relative.toString().replace(origin, \"\") : relative.toString();\n}\n\n//# sourceMappingURL=relativize-url.js.map","export const RSC = \"RSC\";\nexport const ACTION = \"Next-Action\";\nexport const NEXT_ROUTER_STATE_TREE = \"Next-Router-State-Tree\";\nexport const NEXT_ROUTER_PREFETCH = \"Next-Router-Prefetch\";\nexport const NEXT_URL = \"Next-Url\";\nexport const RSC_CONTENT_TYPE_HEADER = \"text/x-component\";\nexport const RSC_VARY_HEADER = RSC + \", \" + NEXT_ROUTER_STATE_TREE + \", \" + NEXT_ROUTER_PREFETCH + \", \" + NEXT_URL;\nexport const FLIGHT_PARAMETERS = [\n    [\n        RSC\n    ],\n    [\n        NEXT_ROUTER_STATE_TREE\n    ],\n    [\n        NEXT_ROUTER_PREFETCH\n    ]\n];\nexport const NEXT_RSC_UNION_QUERY = \"_rsc\";\n\n//# sourceMappingURL=app-router-headers.js.map","import { NEXT_RSC_UNION_QUERY } from \"../client/components/app-router-headers\";\nconst INTERNAL_QUERY_NAMES = [\n    \"__nextFallback\",\n    \"__nextLocale\",\n    \"__nextInferredLocaleFromDefault\",\n    \"__nextDefaultLocale\",\n    \"__nextIsNotFound\",\n    NEXT_RSC_UNION_QUERY\n];\nconst EDGE_EXTENDED_INTERNAL_QUERY_NAMES = [\n    \"__nextDataReq\"\n];\nexport function stripInternalQueries(query) {\n    for (const name of INTERNAL_QUERY_NAMES){\n        delete query[name];\n    }\n}\nexport function stripInternalSearchParams(url, isEdge) {\n    const isStringUrl = typeof url === \"string\";\n    const instance = isStringUrl ? new URL(url) : url;\n    for (const name of INTERNAL_QUERY_NAMES){\n        instance.searchParams.delete(name);\n    }\n    if (isEdge) {\n        for (const name of EDGE_EXTENDED_INTERNAL_QUERY_NAMES){\n            instance.searchParams.delete(name);\n        }\n    }\n    return isStringUrl ? instance.toString() : instance;\n}\n/**\n * Headers that are set by the Next.js server and should be stripped from the\n * request headers going to the user's application.\n */ const INTERNAL_HEADERS = [\n    \"x-invoke-path\",\n    \"x-invoke-status\",\n    \"x-invoke-error\",\n    \"x-invoke-query\",\n    \"x-invoke-output\",\n    \"x-middleware-invoke\"\n];\n/**\n * Strip internal headers from the request headers.\n *\n * @param headers the headers to strip of internal headers\n */ export function stripInternalHeaders(headers) {\n    for (const key of INTERNAL_HEADERS){\n        delete headers[key];\n    }\n}\n\n//# sourceMappingURL=internal-utils.js.map","import { ensureLeadingSlash } from \"../../page-path/ensure-leading-slash\";\nimport { isGroupSegment } from \"../../segment\";\n/**\n * Normalizes an app route so it represents the actual request path. Essentially\n * performing the following transformations:\n *\n * - `/(dashboard)/user/[id]/page` to `/user/[id]`\n * - `/(dashboard)/account/page` to `/account`\n * - `/user/[id]/page` to `/user/[id]`\n * - `/account/page` to `/account`\n * - `/page` to `/`\n * - `/(dashboard)/user/[id]/route` to `/user/[id]`\n * - `/(dashboard)/account/route` to `/account`\n * - `/user/[id]/route` to `/user/[id]`\n * - `/account/route` to `/account`\n * - `/route` to `/`\n * - `/` to `/`\n *\n * @param route the app route to normalize\n * @returns the normalized pathname\n */ export function normalizeAppPath(route) {\n    return ensureLeadingSlash(route.split(\"/\").reduce((pathname, segment, index, segments)=>{\n        // Empty segments are ignored.\n        if (!segment) {\n            return pathname;\n        }\n        // Groups are ignored.\n        if (isGroupSegment(segment)) {\n            return pathname;\n        }\n        // Parallel segments are ignored.\n        if (segment[0] === \"@\") {\n            return pathname;\n        }\n        // The last segment (if it's a leaf) should be ignored.\n        if ((segment === \"page\" || segment === \"route\") && index === segments.length - 1) {\n            return pathname;\n        }\n        return pathname + \"/\" + segment;\n    }, \"\"));\n}\n/**\n * Strips the `.rsc` extension if it's in the pathname.\n * Since this function is used on full urls it checks `?` for searchParams handling.\n */ export function normalizeRscPath(pathname, enabled) {\n    return enabled ? pathname.replace(/\\.rsc($|\\?)/, // $1 ensures `?` is preserved\n    \"$1\") : pathname;\n}\n\n//# sourceMappingURL=app-paths.js.map","export const NEXT_QUERY_PARAM_PREFIX = \"nxtP\";\nexport const PRERENDER_REVALIDATE_HEADER = \"x-prerender-revalidate\";\nexport const PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER = \"x-prerender-revalidate-if-generated\";\nexport const NEXT_CACHE_TAGS_HEADER = \"x-next-cache-tags\";\nexport const NEXT_CACHE_SOFT_TAGS_HEADER = \"x-next-cache-soft-tags\";\nexport const NEXT_CACHE_REVALIDATED_TAGS_HEADER = \"x-next-revalidated-tags\";\nexport const NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER = \"x-next-revalidate-tag-token\";\nexport const NEXT_CACHE_TAG_MAX_LENGTH = 256;\nexport const NEXT_CACHE_SOFT_TAG_MAX_LENGTH = 1024;\nexport const NEXT_CACHE_IMPLICIT_TAG_ID = \"_N_T_\";\n// in seconds\nexport const CACHE_ONE_YEAR = 31536000;\n// Patterns to detect middleware files\nexport const MIDDLEWARE_FILENAME = \"middleware\";\nexport const MIDDLEWARE_LOCATION_REGEXP = `(?:src/)?${MIDDLEWARE_FILENAME}`;\n// Pattern to detect instrumentation hooks file\nexport const INSTRUMENTATION_HOOK_FILENAME = \"instrumentation\";\n// Because on Windows absolute paths in the generated code can break because of numbers, eg 1 in the path,\n// we have to use a private alias\nexport const PAGES_DIR_ALIAS = \"private-next-pages\";\nexport const DOT_NEXT_ALIAS = \"private-dot-next\";\nexport const ROOT_DIR_ALIAS = \"private-next-root-dir\";\nexport const APP_DIR_ALIAS = \"private-next-app-dir\";\nexport const RSC_MOD_REF_PROXY_ALIAS = \"private-next-rsc-mod-ref-proxy\";\nexport const RSC_ACTION_VALIDATE_ALIAS = \"private-next-rsc-action-validate\";\nexport const RSC_ACTION_PROXY_ALIAS = \"private-next-rsc-action-proxy\";\nexport const RSC_ACTION_CLIENT_WRAPPER_ALIAS = \"private-next-rsc-action-client-wrapper\";\nexport const PUBLIC_DIR_MIDDLEWARE_CONFLICT = `You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict`;\nexport const SSG_GET_INITIAL_PROPS_CONFLICT = `You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps`;\nexport const SERVER_PROPS_GET_INIT_PROPS_CONFLICT = `You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.`;\nexport const SERVER_PROPS_SSG_CONFLICT = `You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps`;\nexport const STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR = `can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props`;\nexport const SERVER_PROPS_EXPORT_ERROR = `pages with \\`getServerSideProps\\` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export`;\nexport const GSP_NO_RETURNED_VALUE = \"Your `getStaticProps` function did not return an object. Did you forget to add a `return`?\";\nexport const GSSP_NO_RETURNED_VALUE = \"Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?\";\nexport const UNSTABLE_REVALIDATE_RENAME_ERROR = \"The `unstable_revalidate` property is available for general use.\\n\" + \"Please use `revalidate` instead.\";\nexport const GSSP_COMPONENT_MEMBER_ERROR = `can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member`;\nexport const NON_STANDARD_NODE_ENV = `You are using a non-standard \"NODE_ENV\" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env`;\nexport const SSG_FALLBACK_EXPORT_ERROR = `Pages with \\`fallback\\` enabled in \\`getStaticPaths\\` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export`;\nexport const ESLINT_DEFAULT_DIRS = [\n    \"app\",\n    \"pages\",\n    \"components\",\n    \"lib\",\n    \"src\"\n];\nexport const ESLINT_PROMPT_VALUES = [\n    {\n        title: \"Strict\",\n        recommended: true,\n        config: {\n            extends: \"next/core-web-vitals\"\n        }\n    },\n    {\n        title: \"Base\",\n        config: {\n            extends: \"next\"\n        }\n    },\n    {\n        title: \"Cancel\",\n        config: null\n    }\n];\nexport const SERVER_RUNTIME = {\n    edge: \"edge\",\n    experimentalEdge: \"experimental-edge\",\n    nodejs: \"nodejs\"\n};\n/**\n * The names of the webpack layers. These layers are the primitives for the\n * webpack chunks.\n */ const WEBPACK_LAYERS_NAMES = {\n    /**\n   * The layer for the shared code between the client and server bundles.\n   */ shared: \"shared\",\n    /**\n   * React Server Components layer (rsc).\n   */ reactServerComponents: \"rsc\",\n    /**\n   * Server Side Rendering layer for app (ssr).\n   */ serverSideRendering: \"ssr\",\n    /**\n   * The browser client bundle layer for actions.\n   */ actionBrowser: \"action-browser\",\n    /**\n   * The layer for the API routes.\n   */ api: \"api\",\n    /**\n   * The layer for the middleware code.\n   */ middleware: \"middleware\",\n    /**\n   * The layer for assets on the edge.\n   */ edgeAsset: \"edge-asset\",\n    /**\n   * The browser client bundle layer for App directory.\n   */ appPagesBrowser: \"app-pages-browser\",\n    /**\n   * The server bundle layer for metadata routes.\n   */ appMetadataRoute: \"app-metadata-route\",\n    /**\n   * The layer for the server bundle for App Route handlers.\n   */ appRouteHandler: \"app-route-handler\"\n};\nconst WEBPACK_LAYERS = {\n    ...WEBPACK_LAYERS_NAMES,\n    GROUP: {\n        server: [\n            WEBPACK_LAYERS_NAMES.reactServerComponents,\n            WEBPACK_LAYERS_NAMES.actionBrowser,\n            WEBPACK_LAYERS_NAMES.appMetadataRoute,\n            WEBPACK_LAYERS_NAMES.appRouteHandler\n        ],\n        nonClientServerTarget: [\n            // plus middleware and pages api\n            WEBPACK_LAYERS_NAMES.middleware,\n            WEBPACK_LAYERS_NAMES.api\n        ],\n        app: [\n            WEBPACK_LAYERS_NAMES.reactServerComponents,\n            WEBPACK_LAYERS_NAMES.actionBrowser,\n            WEBPACK_LAYERS_NAMES.appMetadataRoute,\n            WEBPACK_LAYERS_NAMES.appRouteHandler,\n            WEBPACK_LAYERS_NAMES.serverSideRendering,\n            WEBPACK_LAYERS_NAMES.appPagesBrowser\n        ]\n    }\n};\nconst WEBPACK_RESOURCE_QUERIES = {\n    edgeSSREntry: \"__next_edge_ssr_entry__\",\n    metadata: \"__next_metadata__\",\n    metadataRoute: \"__next_metadata_route__\",\n    metadataImageMeta: \"__next_metadata_image_meta__\"\n};\nexport { WEBPACK_LAYERS, WEBPACK_RESOURCE_QUERIES };\n\n//# sourceMappingURL=constants.js.map","export class ReflectAdapter {\n    static get(target, prop, receiver) {\n        const value = Reflect.get(target, prop, receiver);\n        if (typeof value === \"function\") {\n            return value.bind(target);\n        }\n        return value;\n    }\n    static set(target, prop, value, receiver) {\n        return Reflect.set(target, prop, value, receiver);\n    }\n    static has(target, prop) {\n        return Reflect.has(target, prop);\n    }\n    static deleteProperty(target, prop) {\n        return Reflect.deleteProperty(target, prop);\n    }\n}\n\n//# sourceMappingURL=reflect.js.map","import { ReflectAdapter } from \"./reflect\";\n/**\n * @internal\n */ export class ReadonlyHeadersError extends Error {\n    constructor(){\n        super(\"Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers\");\n    }\n    static callable() {\n        throw new ReadonlyHeadersError();\n    }\n}\nexport class HeadersAdapter extends Headers {\n    constructor(headers){\n        // We've already overridden the methods that would be called, so we're just\n        // calling the super constructor to ensure that the instanceof check works.\n        super();\n        this.headers = new Proxy(headers, {\n            get (target, prop, receiver) {\n                // Because this is just an object, we expect that all \"get\" operations\n                // are for properties. If it's a \"get\" for a symbol, we'll just return\n                // the symbol.\n                if (typeof prop === \"symbol\") {\n                    return ReflectAdapter.get(target, prop, receiver);\n                }\n                const lowercased = prop.toLowerCase();\n                // Let's find the original casing of the key. This assumes that there is\n                // no mixed case keys (e.g. \"Content-Type\" and \"content-type\") in the\n                // headers object.\n                const original = Object.keys(headers).find((o)=>o.toLowerCase() === lowercased);\n                // If the original casing doesn't exist, return undefined.\n                if (typeof original === \"undefined\") return;\n                // If the original casing exists, return the value.\n                return ReflectAdapter.get(target, original, receiver);\n            },\n            set (target, prop, value, receiver) {\n                if (typeof prop === \"symbol\") {\n                    return ReflectAdapter.set(target, prop, value, receiver);\n                }\n                const lowercased = prop.toLowerCase();\n                // Let's find the original casing of the key. This assumes that there is\n                // no mixed case keys (e.g. \"Content-Type\" and \"content-type\") in the\n                // headers object.\n                const original = Object.keys(headers).find((o)=>o.toLowerCase() === lowercased);\n                // If the original casing doesn't exist, use the prop as the key.\n                return ReflectAdapter.set(target, original ?? prop, value, receiver);\n            },\n            has (target, prop) {\n                if (typeof prop === \"symbol\") return ReflectAdapter.has(target, prop);\n                const lowercased = prop.toLowerCase();\n                // Let's find the original casing of the key. This assumes that there is\n                // no mixed case keys (e.g. \"Content-Type\" and \"content-type\") in the\n                // headers object.\n                const original = Object.keys(headers).find((o)=>o.toLowerCase() === lowercased);\n                // If the original casing doesn't exist, return false.\n                if (typeof original === \"undefined\") return false;\n                // If the original casing exists, return true.\n                return ReflectAdapter.has(target, original);\n            },\n            deleteProperty (target, prop) {\n                if (typeof prop === \"symbol\") return ReflectAdapter.deleteProperty(target, prop);\n                const lowercased = prop.toLowerCase();\n                // Let's find the original casing of the key. This assumes that there is\n                // no mixed case keys (e.g. \"Content-Type\" and \"content-type\") in the\n                // headers object.\n                const original = Object.keys(headers).find((o)=>o.toLowerCase() === lowercased);\n                // If the original casing doesn't exist, return true.\n                if (typeof original === \"undefined\") return true;\n                // If the original casing exists, delete the property.\n                return ReflectAdapter.deleteProperty(target, original);\n            }\n        });\n    }\n    /**\n   * Seals a Headers instance to prevent modification by throwing an error when\n   * any mutating method is called.\n   */ static seal(headers) {\n        return new Proxy(headers, {\n            get (target, prop, receiver) {\n                switch(prop){\n                    case \"append\":\n                    case \"delete\":\n                    case \"set\":\n                        return ReadonlyHeadersError.callable;\n                    default:\n                        return ReflectAdapter.get(target, prop, receiver);\n                }\n            }\n        });\n    }\n    /**\n   * Merges a header value into a string. This stores multiple values as an\n   * array, so we need to merge them into a string.\n   *\n   * @param value a header value\n   * @returns a merged header value (a string)\n   */ merge(value) {\n        if (Array.isArray(value)) return value.join(\", \");\n        return value;\n    }\n    /**\n   * Creates a Headers instance from a plain object or a Headers instance.\n   *\n   * @param headers a plain object or a Headers instance\n   * @returns a headers instance\n   */ static from(headers) {\n        if (headers instanceof Headers) return headers;\n        return new HeadersAdapter(headers);\n    }\n    append(name, value) {\n        const existing = this.headers[name];\n        if (typeof existing === \"string\") {\n            this.headers[name] = [\n                existing,\n                value\n            ];\n        } else if (Array.isArray(existing)) {\n            existing.push(value);\n        } else {\n            this.headers[name] = value;\n        }\n    }\n    delete(name) {\n        delete this.headers[name];\n    }\n    get(name) {\n        const value = this.headers[name];\n        if (typeof value !== \"undefined\") return this.merge(value);\n        return null;\n    }\n    has(name) {\n        return typeof this.headers[name] !== \"undefined\";\n    }\n    set(name, value) {\n        this.headers[name] = value;\n    }\n    forEach(callbackfn, thisArg) {\n        for (const [name, value] of this.entries()){\n            callbackfn.call(thisArg, value, name, this);\n        }\n    }\n    *entries() {\n        for (const key of Object.keys(this.headers)){\n            const name = key.toLowerCase();\n            // We assert here that this is a string because we got it from the\n            // Object.keys() call above.\n            const value = this.get(name);\n            yield [\n                name,\n                value\n            ];\n        }\n    }\n    *keys() {\n        for (const key of Object.keys(this.headers)){\n            const name = key.toLowerCase();\n            yield name;\n        }\n    }\n    *values() {\n        for (const key of Object.keys(this.headers)){\n            // We assert here that this is a string because we got it from the\n            // Object.keys() call above.\n            const value = this.get(key);\n            yield value;\n        }\n    }\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n}\n\n//# sourceMappingURL=headers.js.map","import { ResponseCookies } from \"../cookies\";\nimport { ReflectAdapter } from \"./reflect\";\n/**\n * @internal\n */ export class ReadonlyRequestCookiesError extends Error {\n    constructor(){\n        super(\"Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options\");\n    }\n    static callable() {\n        throw new ReadonlyRequestCookiesError();\n    }\n}\nexport class RequestCookiesAdapter {\n    static seal(cookies) {\n        return new Proxy(cookies, {\n            get (target, prop, receiver) {\n                switch(prop){\n                    case \"clear\":\n                    case \"delete\":\n                    case \"set\":\n                        return ReadonlyRequestCookiesError.callable;\n                    default:\n                        return ReflectAdapter.get(target, prop, receiver);\n                }\n            }\n        });\n    }\n}\nconst SYMBOL_MODIFY_COOKIE_VALUES = Symbol.for(\"next.mutated.cookies\");\nexport function getModifiedCookieValues(cookies) {\n    const modified = cookies[SYMBOL_MODIFY_COOKIE_VALUES];\n    if (!modified || !Array.isArray(modified) || modified.length === 0) {\n        return [];\n    }\n    return modified;\n}\nexport function appendMutableCookies(headers, mutableCookies) {\n    const modifiedCookieValues = getModifiedCookieValues(mutableCookies);\n    if (modifiedCookieValues.length === 0) {\n        return false;\n    }\n    // Return a new response that extends the response with\n    // the modified cookies as fallbacks. `res` cookies\n    // will still take precedence.\n    const resCookies = new ResponseCookies(headers);\n    const returnedCookies = resCookies.getAll();\n    // Set the modified cookies as fallbacks.\n    for (const cookie of modifiedCookieValues){\n        resCookies.set(cookie);\n    }\n    // Set the original cookies as the final values.\n    for (const cookie of returnedCookies){\n        resCookies.set(cookie);\n    }\n    return true;\n}\nexport class MutableRequestCookiesAdapter {\n    static wrap(cookies, onUpdateCookies) {\n        const responseCookes = new ResponseCookies(new Headers());\n        for (const cookie of cookies.getAll()){\n            responseCookes.set(cookie);\n        }\n        let modifiedValues = [];\n        const modifiedCookies = new Set();\n        const updateResponseCookies = ()=>{\n            var _fetch___nextGetStaticStore;\n            // TODO-APP: change method of getting staticGenerationAsyncStore\n            const staticGenerationAsyncStore = fetch.__nextGetStaticStore == null ? void 0 : (_fetch___nextGetStaticStore = fetch.__nextGetStaticStore.call(fetch)) == null ? void 0 : _fetch___nextGetStaticStore.getStore();\n            if (staticGenerationAsyncStore) {\n                staticGenerationAsyncStore.pathWasRevalidated = true;\n            }\n            const allCookies = responseCookes.getAll();\n            modifiedValues = allCookies.filter((c)=>modifiedCookies.has(c.name));\n            if (onUpdateCookies) {\n                const serializedCookies = [];\n                for (const cookie of modifiedValues){\n                    const tempCookies = new ResponseCookies(new Headers());\n                    tempCookies.set(cookie);\n                    serializedCookies.push(tempCookies.toString());\n                }\n                onUpdateCookies(serializedCookies);\n            }\n        };\n        return new Proxy(responseCookes, {\n            get (target, prop, receiver) {\n                switch(prop){\n                    // A special symbol to get the modified cookie values\n                    case SYMBOL_MODIFY_COOKIE_VALUES:\n                        return modifiedValues;\n                    // TODO: Throw error if trying to set a cookie after the response\n                    // headers have been set.\n                    case \"delete\":\n                        return function(...args) {\n                            modifiedCookies.add(typeof args[0] === \"string\" ? args[0] : args[0].name);\n                            try {\n                                target.delete(...args);\n                            } finally{\n                                updateResponseCookies();\n                            }\n                        };\n                    case \"set\":\n                        return function(...args) {\n                            modifiedCookies.add(typeof args[0] === \"string\" ? args[0] : args[0].name);\n                            try {\n                                return target.set(...args);\n                            } finally{\n                                updateResponseCookies();\n                            }\n                        };\n                    default:\n                        return ReflectAdapter.get(target, prop, receiver);\n                }\n            }\n        });\n    }\n}\n\n//# sourceMappingURL=request-cookies.js.map","import { HeadersAdapter } from \"../web/spec-extension/adapters/headers\";\nimport { PRERENDER_REVALIDATE_HEADER, PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER } from \"../../lib/constants\";\n/**\n *\n * @param res response object\n * @param statusCode `HTTP` status code of response\n */ export function sendStatusCode(res, statusCode) {\n    res.statusCode = statusCode;\n    return res;\n}\n/**\n *\n * @param res response object\n * @param [statusOrUrl] `HTTP` status code of redirect\n * @param url URL of redirect\n */ export function redirect(res, statusOrUrl, url) {\n    if (typeof statusOrUrl === \"string\") {\n        url = statusOrUrl;\n        statusOrUrl = 307;\n    }\n    if (typeof statusOrUrl !== \"number\" || typeof url !== \"string\") {\n        throw new Error(`Invalid redirect arguments. Please use a single argument URL, e.g. res.redirect('/destination') or use a status code and URL, e.g. res.redirect(307, '/destination').`);\n    }\n    res.writeHead(statusOrUrl, {\n        Location: url\n    });\n    res.write(url);\n    res.end();\n    return res;\n}\nexport function checkIsOnDemandRevalidate(req, previewProps) {\n    const headers = HeadersAdapter.from(req.headers);\n    const previewModeId = headers.get(PRERENDER_REVALIDATE_HEADER);\n    const isOnDemandRevalidate = previewModeId === previewProps.previewModeId;\n    const revalidateOnlyGenerated = headers.has(PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER);\n    return {\n        isOnDemandRevalidate,\n        revalidateOnlyGenerated\n    };\n}\nexport const COOKIE_NAME_PRERENDER_BYPASS = `__prerender_bypass`;\nexport const COOKIE_NAME_PRERENDER_DATA = `__next_preview_data`;\nexport const RESPONSE_LIMIT_DEFAULT = 4 * 1024 * 1024;\nexport const SYMBOL_PREVIEW_DATA = Symbol(COOKIE_NAME_PRERENDER_DATA);\nexport const SYMBOL_CLEARED_COOKIES = Symbol(COOKIE_NAME_PRERENDER_BYPASS);\nexport function clearPreviewData(res, options = {}) {\n    if (SYMBOL_CLEARED_COOKIES in res) {\n        return res;\n    }\n    const { serialize } = require(\"next/dist/compiled/cookie\");\n    const previous = res.getHeader(\"Set-Cookie\");\n    res.setHeader(`Set-Cookie`, [\n        ...typeof previous === \"string\" ? [\n            previous\n        ] : Array.isArray(previous) ? previous : [],\n        serialize(COOKIE_NAME_PRERENDER_BYPASS, \"\", {\n            // To delete a cookie, set `expires` to a date in the past:\n            // https://tools.ietf.org/html/rfc6265#section-4.1.1\n            // `Max-Age: 0` is not valid, thus ignored, and the cookie is persisted.\n            expires: new Date(0),\n            httpOnly: true,\n            sameSite: process.env.NODE_ENV !== \"development\" ? \"none\" : \"lax\",\n            secure: process.env.NODE_ENV !== \"development\",\n            path: \"/\",\n            ...options.path !== undefined ? {\n                path: options.path\n            } : undefined\n        }),\n        serialize(COOKIE_NAME_PRERENDER_DATA, \"\", {\n            // To delete a cookie, set `expires` to a date in the past:\n            // https://tools.ietf.org/html/rfc6265#section-4.1.1\n            // `Max-Age: 0` is not valid, thus ignored, and the cookie is persisted.\n            expires: new Date(0),\n            httpOnly: true,\n            sameSite: process.env.NODE_ENV !== \"development\" ? \"none\" : \"lax\",\n            secure: process.env.NODE_ENV !== \"development\",\n            path: \"/\",\n            ...options.path !== undefined ? {\n                path: options.path\n            } : undefined\n        })\n    ]);\n    Object.defineProperty(res, SYMBOL_CLEARED_COOKIES, {\n        value: true,\n        enumerable: false\n    });\n    return res;\n}\n/**\n * Custom error class\n */ export class ApiError extends Error {\n    constructor(statusCode, message){\n        super(message);\n        this.statusCode = statusCode;\n    }\n}\n/**\n * Sends error in `response`\n * @param res response object\n * @param statusCode of response\n * @param message of response\n */ export function sendError(res, statusCode, message) {\n    res.statusCode = statusCode;\n    res.statusMessage = message;\n    res.end(message);\n}\n/**\n * Execute getter function only if its needed\n * @param LazyProps `req` and `params` for lazyProp\n * @param prop name of property\n * @param getter function to get data\n */ export function setLazyProp({ req }, prop, getter) {\n    const opts = {\n        configurable: true,\n        enumerable: true\n    };\n    const optsReset = {\n        ...opts,\n        writable: true\n    };\n    Object.defineProperty(req, prop, {\n        ...opts,\n        get: ()=>{\n            const value = getter();\n            // we set the property on the object to avoid recalculating it\n            Object.defineProperty(req, prop, {\n                ...optsReset,\n                value\n            });\n            return value;\n        },\n        set: (value)=>{\n            Object.defineProperty(req, prop, {\n                ...optsReset,\n                value\n            });\n        }\n    });\n}\n\n//# sourceMappingURL=index.js.map","import { COOKIE_NAME_PRERENDER_BYPASS, checkIsOnDemandRevalidate } from \"../api-utils\";\nexport class DraftModeProvider {\n    constructor(previewProps, req, cookies, mutableCookies){\n        var _cookies_get;\n        // The logic for draftMode() is very similar to tryGetPreviewData()\n        // but Draft Mode does not have any data associated with it.\n        const isOnDemandRevalidate = previewProps && checkIsOnDemandRevalidate(req, previewProps).isOnDemandRevalidate;\n        const cookieValue = (_cookies_get = cookies.get(COOKIE_NAME_PRERENDER_BYPASS)) == null ? void 0 : _cookies_get.value;\n        this.isEnabled = Boolean(!isOnDemandRevalidate && cookieValue && previewProps && cookieValue === previewProps.previewModeId);\n        this._previewModeId = previewProps == null ? void 0 : previewProps.previewModeId;\n        this._mutableCookies = mutableCookies;\n    }\n    enable() {\n        if (!this._previewModeId) {\n            throw new Error(\"Invariant: previewProps missing previewModeId this should never happen\");\n        }\n        this._mutableCookies.set({\n            name: COOKIE_NAME_PRERENDER_BYPASS,\n            value: this._previewModeId,\n            httpOnly: true,\n            sameSite: process.env.NODE_ENV !== \"development\" ? \"none\" : \"lax\",\n            secure: process.env.NODE_ENV !== \"development\",\n            path: \"/\"\n        });\n    }\n    disable() {\n        // To delete a cookie, set `expires` to a date in the past:\n        // https://tools.ietf.org/html/rfc6265#section-4.1.1\n        // `Max-Age: 0` is not valid, thus ignored, and the cookie is persisted.\n        this._mutableCookies.set({\n            name: COOKIE_NAME_PRERENDER_BYPASS,\n            value: \"\",\n            httpOnly: true,\n            sameSite: process.env.NODE_ENV !== \"development\" ? \"none\" : \"lax\",\n            secure: process.env.NODE_ENV !== \"development\",\n            path: \"/\",\n            expires: new Date(0)\n        });\n    }\n}\n\n//# sourceMappingURL=draft-mode-provider.js.map","import { FLIGHT_PARAMETERS } from \"../../client/components/app-router-headers\";\nimport { HeadersAdapter } from \"../web/spec-extension/adapters/headers\";\nimport { MutableRequestCookiesAdapter, RequestCookiesAdapter } from \"../web/spec-extension/adapters/request-cookies\";\nimport { RequestCookies } from \"../web/spec-extension/cookies\";\nimport { DraftModeProvider } from \"./draft-mode-provider\";\nfunction getHeaders(headers) {\n    const cleaned = HeadersAdapter.from(headers);\n    for (const param of FLIGHT_PARAMETERS){\n        cleaned.delete(param.toString().toLowerCase());\n    }\n    return HeadersAdapter.seal(cleaned);\n}\nfunction getCookies(headers) {\n    const cookies = new RequestCookies(HeadersAdapter.from(headers));\n    return RequestCookiesAdapter.seal(cookies);\n}\nfunction getMutableCookies(headers, onUpdateCookies) {\n    const cookies = new RequestCookies(HeadersAdapter.from(headers));\n    return MutableRequestCookiesAdapter.wrap(cookies, onUpdateCookies);\n}\nexport const RequestAsyncStorageWrapper = {\n    /**\n   * Wrap the callback with the given store so it can access the underlying\n   * store using hooks.\n   *\n   * @param storage underlying storage object returned by the module\n   * @param context context to seed the store\n   * @param callback function to call within the scope of the context\n   * @returns the result returned by the callback\n   */ wrap (storage, { req, res, renderOpts }, callback) {\n        let previewProps = undefined;\n        if (renderOpts && \"previewProps\" in renderOpts) {\n            // TODO: investigate why previewProps isn't on RenderOpts\n            previewProps = renderOpts.previewProps;\n        }\n        function defaultOnUpdateCookies(cookies) {\n            if (res) {\n                res.setHeader(\"Set-Cookie\", cookies);\n            }\n        }\n        const cache = {};\n        const store = {\n            get headers () {\n                if (!cache.headers) {\n                    // Seal the headers object that'll freeze out any methods that could\n                    // mutate the underlying data.\n                    cache.headers = getHeaders(req.headers);\n                }\n                return cache.headers;\n            },\n            get cookies () {\n                if (!cache.cookies) {\n                    // Seal the cookies object that'll freeze out any methods that could\n                    // mutate the underlying data.\n                    cache.cookies = getCookies(req.headers);\n                }\n                return cache.cookies;\n            },\n            get mutableCookies () {\n                if (!cache.mutableCookies) {\n                    cache.mutableCookies = getMutableCookies(req.headers, (renderOpts == null ? void 0 : renderOpts.onUpdateCookies) || (res ? defaultOnUpdateCookies : undefined));\n                }\n                return cache.mutableCookies;\n            },\n            get draftMode () {\n                if (!cache.draftMode) {\n                    cache.draftMode = new DraftModeProvider(previewProps, req, this.cookies, this.mutableCookies);\n                }\n                return cache.draftMode;\n            }\n        };\n        return storage.run(store, callback, store);\n    }\n};\n\n//# sourceMappingURL=request-async-storage-wrapper.js.map","const sharedAsyncLocalStorageNotAvailableError = new Error(\"Invariant: AsyncLocalStorage accessed in runtime where it is not available\");\nclass FakeAsyncLocalStorage {\n    disable() {\n        throw sharedAsyncLocalStorageNotAvailableError;\n    }\n    getStore() {\n        // This fake implementation of AsyncLocalStorage always returns `undefined`.\n        return undefined;\n    }\n    run() {\n        throw sharedAsyncLocalStorageNotAvailableError;\n    }\n    exit() {\n        throw sharedAsyncLocalStorageNotAvailableError;\n    }\n    enterWith() {\n        throw sharedAsyncLocalStorageNotAvailableError;\n    }\n}\nconst maybeGlobalAsyncLocalStorage = globalThis.AsyncLocalStorage;\nexport function createAsyncLocalStorage() {\n    if (maybeGlobalAsyncLocalStorage) {\n        return new maybeGlobalAsyncLocalStorage();\n    }\n    return new FakeAsyncLocalStorage();\n}\n\n//# sourceMappingURL=async-local-storage.js.map","import { createAsyncLocalStorage } from \"./async-local-storage\";\nexport const requestAsyncStorage = createAsyncLocalStorage();\n\n//# sourceMappingURL=request-async-storage.external.js.map","import { PageSignatureError } from \"./error\";\nimport { fromNodeOutgoingHttpHeaders } from \"./utils\";\nimport { NextFetchEvent } from \"./spec-extension/fetch-event\";\nimport { NextRequest } from \"./spec-extension/request\";\nimport { NextResponse } from \"./spec-extension/response\";\nimport { relativizeURL } from \"../../shared/lib/router/utils/relativize-url\";\nimport { waitUntilSymbol } from \"./spec-extension/fetch-event\";\nimport { NextURL } from \"./next-url\";\nimport { stripInternalSearchParams } from \"../internal-utils\";\nimport { normalizeRscPath } from \"../../shared/lib/router/utils/app-paths\";\nimport { NEXT_ROUTER_PREFETCH, NEXT_ROUTER_STATE_TREE, RSC } from \"../../client/components/app-router-headers\";\nimport { NEXT_QUERY_PARAM_PREFIX } from \"../../lib/constants\";\nimport { ensureInstrumentationRegistered } from \"./globals\";\nimport { RequestAsyncStorageWrapper } from \"../async-storage/request-async-storage-wrapper\";\nimport { requestAsyncStorage } from \"../../client/components/request-async-storage.external\";\nclass NextRequestHint extends NextRequest {\n    constructor(params){\n        super(params.input, params.init);\n        this.sourcePage = params.page;\n    }\n    get request() {\n        throw new PageSignatureError({\n            page: this.sourcePage\n        });\n    }\n    respondWith() {\n        throw new PageSignatureError({\n            page: this.sourcePage\n        });\n    }\n    waitUntil() {\n        throw new PageSignatureError({\n            page: this.sourcePage\n        });\n    }\n}\nconst FLIGHT_PARAMETERS = [\n    [\n        RSC\n    ],\n    [\n        NEXT_ROUTER_STATE_TREE\n    ],\n    [\n        NEXT_ROUTER_PREFETCH\n    ]\n];\nexport async function adapter(params) {\n    await ensureInstrumentationRegistered();\n    // TODO-APP: use explicit marker for this\n    const isEdgeRendering = typeof self.__BUILD_MANIFEST !== \"undefined\";\n    const prerenderManifest = typeof self.__PRERENDER_MANIFEST === \"string\" ? JSON.parse(self.__PRERENDER_MANIFEST) : undefined;\n    params.request.url = normalizeRscPath(params.request.url, true);\n    const requestUrl = new NextURL(params.request.url, {\n        headers: params.request.headers,\n        nextConfig: params.request.nextConfig\n    });\n    // Iterator uses an index to keep track of the current iteration. Because of deleting and appending below we can't just use the iterator.\n    // Instead we use the keys before iteration.\n    const keys = [\n        ...requestUrl.searchParams.keys()\n    ];\n    for (const key of keys){\n        const value = requestUrl.searchParams.getAll(key);\n        if (key !== NEXT_QUERY_PARAM_PREFIX && key.startsWith(NEXT_QUERY_PARAM_PREFIX)) {\n            const normalizedKey = key.substring(NEXT_QUERY_PARAM_PREFIX.length);\n            requestUrl.searchParams.delete(normalizedKey);\n            for (const val of value){\n                requestUrl.searchParams.append(normalizedKey, val);\n            }\n            requestUrl.searchParams.delete(key);\n        }\n    }\n    // Ensure users only see page requests, never data requests.\n    const buildId = requestUrl.buildId;\n    requestUrl.buildId = \"\";\n    const isDataReq = params.request.headers[\"x-nextjs-data\"];\n    if (isDataReq && requestUrl.pathname === \"/index\") {\n        requestUrl.pathname = \"/\";\n    }\n    const requestHeaders = fromNodeOutgoingHttpHeaders(params.request.headers);\n    const flightHeaders = new Map();\n    // Parameters should only be stripped for middleware\n    if (!isEdgeRendering) {\n        for (const param of FLIGHT_PARAMETERS){\n            const key = param.toString().toLowerCase();\n            const value = requestHeaders.get(key);\n            if (value) {\n                flightHeaders.set(key, requestHeaders.get(key));\n                requestHeaders.delete(key);\n            }\n        }\n    }\n    const normalizeUrl = process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE ? new URL(params.request.url) : requestUrl;\n    const request = new NextRequestHint({\n        page: params.page,\n        // Strip internal query parameters off the request.\n        input: stripInternalSearchParams(normalizeUrl, true).toString(),\n        init: {\n            body: params.request.body,\n            geo: params.request.geo,\n            headers: requestHeaders,\n            ip: params.request.ip,\n            method: params.request.method,\n            nextConfig: params.request.nextConfig,\n            signal: params.request.signal\n        }\n    });\n    /**\n   * This allows to identify the request as a data request. The user doesn't\n   * need to know about this property neither use it. We add it for testing\n   * purposes.\n   */ if (isDataReq) {\n        Object.defineProperty(request, \"__isData\", {\n            enumerable: false,\n            value: true\n        });\n    }\n    if (!globalThis.__incrementalCache && params.IncrementalCache) {\n        globalThis.__incrementalCache = new params.IncrementalCache({\n            appDir: true,\n            fetchCache: true,\n            minimalMode: process.env.NODE_ENV !== \"development\",\n            fetchCacheKeyPrefix: process.env.__NEXT_FETCH_CACHE_KEY_PREFIX,\n            dev: process.env.NODE_ENV === \"development\",\n            requestHeaders: params.request.headers,\n            requestProtocol: \"https\",\n            getPrerenderManifest: ()=>{\n                return {\n                    version: -1,\n                    routes: {},\n                    dynamicRoutes: {},\n                    notFoundRoutes: [],\n                    preview: {\n                        previewModeId: \"development-id\"\n                    }\n                };\n            }\n        });\n    }\n    const event = new NextFetchEvent({\n        request,\n        page: params.page\n    });\n    let response;\n    let cookiesFromResponse;\n    // we only care to make async storage available for middleware\n    const isMiddleware = params.page === \"/middleware\" || params.page === \"/src/middleware\";\n    if (isMiddleware) {\n        response = await RequestAsyncStorageWrapper.wrap(requestAsyncStorage, {\n            req: request,\n            renderOpts: {\n                onUpdateCookies: (cookies)=>{\n                    cookiesFromResponse = cookies;\n                },\n                // @ts-expect-error: TODO: investigate why previewProps isn't on RenderOpts\n                previewProps: (prerenderManifest == null ? void 0 : prerenderManifest.preview) || {\n                    previewModeId: \"development-id\",\n                    previewModeEncryptionKey: \"\",\n                    previewModeSigningKey: \"\"\n                }\n            }\n        }, ()=>params.handler(request, event));\n    } else {\n        response = await params.handler(request, event);\n    }\n    // check if response is a Response object\n    if (response && !(response instanceof Response)) {\n        throw new TypeError(\"Expected an instance of Response to be returned\");\n    }\n    if (response && cookiesFromResponse) {\n        response.headers.set(\"set-cookie\", cookiesFromResponse);\n    }\n    /**\n   * For rewrites we must always include the locale in the final pathname\n   * so we re-create the NextURL forcing it to include it when the it is\n   * an internal rewrite. Also we make sure the outgoing rewrite URL is\n   * a data URL if the request was a data request.\n   */ const rewrite = response == null ? void 0 : response.headers.get(\"x-middleware-rewrite\");\n    if (response && rewrite) {\n        const rewriteUrl = new NextURL(rewrite, {\n            forceLocale: true,\n            headers: params.request.headers,\n            nextConfig: params.request.nextConfig\n        });\n        if (!process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE) {\n            if (rewriteUrl.host === request.nextUrl.host) {\n                rewriteUrl.buildId = buildId || rewriteUrl.buildId;\n                response.headers.set(\"x-middleware-rewrite\", String(rewriteUrl));\n            }\n        }\n        /**\n     * When the request is a data request we must show if there was a rewrite\n     * with an internal header so the client knows which component to load\n     * from the data request.\n     */ const relativizedRewrite = relativizeURL(String(rewriteUrl), String(requestUrl));\n        if (isDataReq && // if the rewrite is external and external rewrite\n        // resolving config is enabled don't add this header\n        // so the upstream app can set it instead\n        !(process.env.__NEXT_EXTERNAL_MIDDLEWARE_REWRITE_RESOLVE && relativizedRewrite.match(/http(s)?:\\/\\//))) {\n            response.headers.set(\"x-nextjs-rewrite\", relativizedRewrite);\n        }\n    }\n    /**\n   * For redirects we will not include the locale in case when it is the\n   * default and we must also make sure the outgoing URL is a data one if\n   * the incoming request was a data request.\n   */ const redirect = response == null ? void 0 : response.headers.get(\"Location\");\n    if (response && redirect && !isEdgeRendering) {\n        const redirectURL = new NextURL(redirect, {\n            forceLocale: false,\n            headers: params.request.headers,\n            nextConfig: params.request.nextConfig\n        });\n        /**\n     * Responses created from redirects have immutable headers so we have\n     * to clone the response to be able to modify it.\n     */ response = new Response(response.body, response);\n        if (!process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE) {\n            if (redirectURL.host === request.nextUrl.host) {\n                redirectURL.buildId = buildId || redirectURL.buildId;\n                response.headers.set(\"Location\", String(redirectURL));\n            }\n        }\n        /**\n     * When the request is a data request we can't use the location header as\n     * it may end up with CORS error. Instead we map to an internal header so\n     * the client knows the destination.\n     */ if (isDataReq) {\n            response.headers.delete(\"Location\");\n            response.headers.set(\"x-nextjs-redirect\", relativizeURL(String(redirectURL), String(requestUrl)));\n        }\n    }\n    const finalResponse = response ? response : NextResponse.next();\n    // Flight headers are not overridable / removable so they are applied at the end.\n    const middlewareOverrideHeaders = finalResponse.headers.get(\"x-middleware-override-headers\");\n    const overwrittenHeaders = [];\n    if (middlewareOverrideHeaders) {\n        for (const [key, value] of flightHeaders){\n            finalResponse.headers.set(`x-middleware-request-${key}`, value);\n            overwrittenHeaders.push(key);\n        }\n        if (overwrittenHeaders.length > 0) {\n            finalResponse.headers.set(\"x-middleware-override-headers\", middlewareOverrideHeaders + \",\" + overwrittenHeaders.join(\",\"));\n        }\n    }\n    return {\n        response: finalResponse,\n        waitUntil: Promise.all(event[waitUntilSymbol])\n    };\n}\n\n//# sourceMappingURL=adapter.js.map","// This file is for modularized imports for next/server to get fully-treeshaking.\nexport { NextResponse as default } from \"../spec-extension/response\";\n\n//# sourceMappingURL=next-response.js.map","import { createMiddlewareClient } from '@supabase/auth-helpers-nextjs';\r\nimport { type NextRequest, NextResponse } from 'next/server';\r\n\r\nimport type { Database } from '@/utils/supabase/types';\r\n\r\nexport async function middleware(req: NextRequest): Promise<NextResponse> {\r\n  const res = NextResponse.next();\r\n  const supabase = createMiddlewareClient<Database>({ req, res });\r\n\r\n  const {\r\n    data: { session },\r\n  } = await supabase.auth.getSession(); // destructure the data object to obtain the session object\r\n  if (session === null) return NextResponse.redirect(new URL('/login', req.nextUrl));\r\n  return res;\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\r\n    // add the routes you wish the middleware to run in. You can also use regex\r\n  ],\r\n};\r\n","\n        import 'next/dist/esm/server/web/globals'\n        import { adapter } from 'next/dist/esm/server/web/adapter'\n        import * as _mod from \"private-next-root-dir/middleware.ts\"\n\n        const mod = { ..._mod }\n        const handler = mod.middleware || mod.default\n\n        if (typeof handler !== 'function') {\n          throw new Error('The Middleware \"pages/middleware\" must export a `middleware` or a `default` function');\n        }\n\n        export default function (opts) {\n          return adapter({\n            ...opts,\n            page: \"/middleware\",\n            handler,\n          })\n        }\n    ","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  createBrowserSupabaseClient: () => createBrowserSupabaseClient,\n  createClientComponentClient: () => createClientComponentClient,\n  createMiddlewareClient: () => createMiddlewareClient,\n  createMiddlewareSupabaseClient: () => createMiddlewareSupabaseClient,\n  createPagesBrowserClient: () => createPagesBrowserClient,\n  createPagesServerClient: () => createPagesServerClient,\n  createRouteHandlerClient: () => createRouteHandlerClient,\n  createServerActionClient: () => createServerActionClient,\n  createServerComponentClient: () => createServerComponentClient,\n  createServerSupabaseClient: () => createServerSupabaseClient\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/clientComponentClient.ts\nvar import_auth_helpers_shared = require(\"@supabase/auth-helpers-shared\");\nvar supabase;\nfunction createClientComponentClient({\n  supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL,\n  supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,\n  options,\n  cookieOptions,\n  isSingleton = true\n} = {}) {\n  if (!supabaseUrl || !supabaseKey) {\n    throw new Error(\n      \"either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!\"\n    );\n  }\n  const createNewClient = () => {\n    var _a;\n    return (0, import_auth_helpers_shared.createSupabaseClient)(supabaseUrl, supabaseKey, {\n      ...options,\n      global: {\n        ...options == null ? void 0 : options.global,\n        headers: {\n          ...(_a = options == null ? void 0 : options.global) == null ? void 0 : _a.headers,\n          \"X-Client-Info\": `${\"@supabase/auth-helpers-nextjs\"}@${\"0.7.2\"}`\n        }\n      },\n      auth: {\n        storageKey: cookieOptions == null ? void 0 : cookieOptions.name,\n        storage: new import_auth_helpers_shared.BrowserCookieAuthStorageAdapter(cookieOptions)\n      }\n    });\n  };\n  if (isSingleton) {\n    const _supabase = supabase ?? createNewClient();\n    if (typeof window === \"undefined\")\n      return _supabase;\n    if (!supabase)\n      supabase = _supabase;\n    return supabase;\n  }\n  return createNewClient();\n}\n\n// src/pagesBrowserClient.ts\nvar createPagesBrowserClient = createClientComponentClient;\n\n// src/pagesServerClient.ts\nvar import_auth_helpers_shared2 = require(\"@supabase/auth-helpers-shared\");\nvar import_set_cookie_parser = require(\"set-cookie-parser\");\nvar NextServerAuthStorageAdapter = class extends import_auth_helpers_shared2.CookieAuthStorageAdapter {\n  constructor(context, cookieOptions) {\n    super(cookieOptions);\n    this.context = context;\n  }\n  getCookie(name) {\n    var _a;\n    const setCookie = (0, import_set_cookie_parser.splitCookiesString)(((_a = this.context.res.getHeader(\"set-cookie\")) == null ? void 0 : _a.toString()) ?? \"\").map((c) => (0, import_auth_helpers_shared2.parseCookies)(c)[name]).find((c) => !!c);\n    const value = setCookie ?? this.context.req.cookies[name];\n    return value;\n  }\n  setCookie(name, value) {\n    this._setCookie(name, value);\n  }\n  deleteCookie(name) {\n    this._setCookie(name, \"\", {\n      maxAge: 0\n    });\n  }\n  _setCookie(name, value, options) {\n    var _a;\n    const setCookies = (0, import_set_cookie_parser.splitCookiesString)(\n      ((_a = this.context.res.getHeader(\"set-cookie\")) == null ? void 0 : _a.toString()) ?? \"\"\n    ).filter((c) => !(name in (0, import_auth_helpers_shared2.parseCookies)(c)));\n    const cookieStr = (0, import_auth_helpers_shared2.serializeCookie)(name, value, {\n      ...this.cookieOptions,\n      ...options,\n      httpOnly: false\n    });\n    this.context.res.setHeader(\"set-cookie\", [...setCookies, cookieStr]);\n  }\n};\nfunction createPagesServerClient(context, {\n  supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL,\n  supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,\n  options,\n  cookieOptions\n} = {}) {\n  var _a;\n  if (!supabaseUrl || !supabaseKey) {\n    throw new Error(\n      \"either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!\"\n    );\n  }\n  return (0, import_auth_helpers_shared2.createSupabaseClient)(supabaseUrl, supabaseKey, {\n    ...options,\n    global: {\n      ...options == null ? void 0 : options.global,\n      headers: {\n        ...(_a = options == null ? void 0 : options.global) == null ? void 0 : _a.headers,\n        \"X-Client-Info\": `${\"@supabase/auth-helpers-nextjs\"}@${\"0.7.2\"}`\n      }\n    },\n    auth: {\n      storageKey: cookieOptions == null ? void 0 : cookieOptions.name,\n      storage: new NextServerAuthStorageAdapter(context, cookieOptions)\n    }\n  });\n}\n\n// src/middlewareClient.ts\nvar import_auth_helpers_shared3 = require(\"@supabase/auth-helpers-shared\");\nvar import_set_cookie_parser2 = require(\"set-cookie-parser\");\nvar NextMiddlewareAuthStorageAdapter = class extends import_auth_helpers_shared3.CookieAuthStorageAdapter {\n  constructor(context, cookieOptions) {\n    super(cookieOptions);\n    this.context = context;\n  }\n  getCookie(name) {\n    var _a;\n    const setCookie = (0, import_set_cookie_parser2.splitCookiesString)(\n      ((_a = this.context.res.headers.get(\"set-cookie\")) == null ? void 0 : _a.toString()) ?? \"\"\n    ).map((c) => (0, import_auth_helpers_shared3.parseCookies)(c)[name]).find((c) => !!c);\n    if (setCookie) {\n      return setCookie;\n    }\n    const cookies = (0, import_auth_helpers_shared3.parseCookies)(this.context.req.headers.get(\"cookie\") ?? \"\");\n    return cookies[name];\n  }\n  setCookie(name, value) {\n    this._setCookie(name, value);\n  }\n  deleteCookie(name) {\n    this._setCookie(name, \"\", {\n      maxAge: 0\n    });\n  }\n  _setCookie(name, value, options) {\n    const newSessionStr = (0, import_auth_helpers_shared3.serializeCookie)(name, value, {\n      ...this.cookieOptions,\n      ...options,\n      httpOnly: false\n    });\n    if (this.context.res.headers) {\n      this.context.res.headers.append(\"set-cookie\", newSessionStr);\n      this.context.res.headers.append(\"cookie\", newSessionStr);\n    }\n  }\n};\nfunction createMiddlewareClient(context, {\n  supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL,\n  supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,\n  options,\n  cookieOptions\n} = {}) {\n  var _a;\n  if (!supabaseUrl || !supabaseKey) {\n    throw new Error(\n      \"either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!\"\n    );\n  }\n  return (0, import_auth_helpers_shared3.createSupabaseClient)(supabaseUrl, supabaseKey, {\n    ...options,\n    global: {\n      ...options == null ? void 0 : options.global,\n      headers: {\n        ...(_a = options == null ? void 0 : options.global) == null ? void 0 : _a.headers,\n        \"X-Client-Info\": `${\"@supabase/auth-helpers-nextjs\"}@${\"0.7.2\"}`\n      }\n    },\n    auth: {\n      storageKey: cookieOptions == null ? void 0 : cookieOptions.name,\n      storage: new NextMiddlewareAuthStorageAdapter(context, cookieOptions)\n    }\n  });\n}\n\n// src/serverComponentClient.ts\nvar import_auth_helpers_shared4 = require(\"@supabase/auth-helpers-shared\");\nvar NextServerComponentAuthStorageAdapter = class extends import_auth_helpers_shared4.CookieAuthStorageAdapter {\n  constructor(context, cookieOptions) {\n    super(cookieOptions);\n    this.context = context;\n  }\n  getCookie(name) {\n    var _a;\n    const nextCookies = this.context.cookies();\n    return (_a = nextCookies.get(name)) == null ? void 0 : _a.value;\n  }\n  setCookie(name, value) {\n  }\n  deleteCookie(name) {\n  }\n};\nfunction createServerComponentClient(context, {\n  supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL,\n  supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,\n  options,\n  cookieOptions\n} = {}) {\n  var _a;\n  if (!supabaseUrl || !supabaseKey) {\n    throw new Error(\n      \"either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!\"\n    );\n  }\n  return (0, import_auth_helpers_shared4.createSupabaseClient)(supabaseUrl, supabaseKey, {\n    ...options,\n    global: {\n      ...options == null ? void 0 : options.global,\n      headers: {\n        ...(_a = options == null ? void 0 : options.global) == null ? void 0 : _a.headers,\n        \"X-Client-Info\": `${\"@supabase/auth-helpers-nextjs\"}@${\"0.7.2\"}`\n      }\n    },\n    auth: {\n      storageKey: cookieOptions == null ? void 0 : cookieOptions.name,\n      storage: new NextServerComponentAuthStorageAdapter(context, cookieOptions)\n    }\n  });\n}\n\n// src/routeHandlerClient.ts\nvar import_auth_helpers_shared5 = require(\"@supabase/auth-helpers-shared\");\nvar NextRouteHandlerAuthStorageAdapter = class extends import_auth_helpers_shared5.CookieAuthStorageAdapter {\n  constructor(context, cookieOptions) {\n    super(cookieOptions);\n    this.context = context;\n  }\n  getCookie(name) {\n    var _a;\n    const nextCookies = this.context.cookies();\n    return (_a = nextCookies.get(name)) == null ? void 0 : _a.value;\n  }\n  setCookie(name, value) {\n    const nextCookies = this.context.cookies();\n    nextCookies.set(name, value);\n  }\n  deleteCookie(name) {\n    const nextCookies = this.context.cookies();\n    nextCookies.set(name, \"\", {\n      maxAge: 0\n    });\n  }\n};\nfunction createRouteHandlerClient(context, {\n  supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL,\n  supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,\n  options,\n  cookieOptions\n} = {}) {\n  var _a;\n  if (!supabaseUrl || !supabaseKey) {\n    throw new Error(\n      \"either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!\"\n    );\n  }\n  return (0, import_auth_helpers_shared5.createSupabaseClient)(supabaseUrl, supabaseKey, {\n    ...options,\n    global: {\n      ...options == null ? void 0 : options.global,\n      headers: {\n        ...(_a = options == null ? void 0 : options.global) == null ? void 0 : _a.headers,\n        \"X-Client-Info\": `${\"@supabase/auth-helpers-nextjs\"}@${\"0.7.2\"}`\n      }\n    },\n    auth: {\n      storageKey: cookieOptions == null ? void 0 : cookieOptions.name,\n      storage: new NextRouteHandlerAuthStorageAdapter(context, cookieOptions)\n    }\n  });\n}\n\n// src/serverActionClient.ts\nvar createServerActionClient = createRouteHandlerClient;\n\n// src/deprecated.ts\nfunction createBrowserSupabaseClient({\n  supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL,\n  supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,\n  options,\n  cookieOptions\n} = {}) {\n  console.warn(\n    \"Please utilize the `createPagesBrowserClient` function instead of the deprecated `createBrowserSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages\"\n  );\n  return createPagesBrowserClient({\n    supabaseUrl,\n    supabaseKey,\n    options,\n    cookieOptions\n  });\n}\nfunction createServerSupabaseClient(context, {\n  supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL,\n  supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,\n  options,\n  cookieOptions\n} = {}) {\n  console.warn(\n    \"Please utilize the `createPagesServerClient` function instead of the deprecated `createServerSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages\"\n  );\n  return createPagesServerClient(context, {\n    supabaseUrl,\n    supabaseKey,\n    options,\n    cookieOptions\n  });\n}\nfunction createMiddlewareSupabaseClient(context, {\n  supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL,\n  supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,\n  options,\n  cookieOptions\n} = {}) {\n  console.warn(\n    \"Please utilize the `createMiddlewareClient` function instead of the deprecated `createMiddlewareSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs#middleware\"\n  );\n  return createMiddlewareClient(context, {\n    supabaseUrl,\n    supabaseKey,\n    options,\n    cookieOptions\n  });\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  createBrowserSupabaseClient,\n  createClientComponentClient,\n  createMiddlewareClient,\n  createMiddlewareSupabaseClient,\n  createPagesBrowserClient,\n  createPagesServerClient,\n  createRouteHandlerClient,\n  createServerActionClient,\n  createServerComponentClient,\n  createServerSupabaseClient\n});\n//# sourceMappingURL=index.js.map","var global = typeof self !== 'undefined' ? self : this;\nvar __self__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = global.DOMException\n}\nF.prototype = global;\nreturn new F();\n})();\n(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n})({});\n})(__self__);\n__self__.fetch.ponyfill = true;\n// Remove \"polyfill\" property added by whatwg-fetch\ndelete __self__.fetch.polyfill;\n// Choose between native implementation (global) or custom implementation (__self__)\n// var ctx = global.fetch ? global : __self__;\nvar ctx = __self__; // this line disable service worker support temporarily\nexports = ctx.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers\nexports.Request = ctx.Request\nexports.Response = ctx.Response\nmodule.exports = exports\n","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  RequestCookies: () => RequestCookies,\n  ResponseCookies: () => ResponseCookies,\n  parseCookie: () => parseCookie,\n  parseSetCookie: () => parseSetCookie,\n  splitCookiesString: () => splitCookiesString,\n  stringifyCookie: () => stringifyCookie\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/serialize.ts\nfunction stringifyCookie(c) {\n  var _a;\n  const attrs = [\n    \"path\" in c && c.path && `Path=${c.path}`,\n    \"expires\" in c && (c.expires || c.expires === 0) && `Expires=${(typeof c.expires === \"number\" ? new Date(c.expires) : c.expires).toUTCString()}`,\n    \"maxAge\" in c && typeof c.maxAge === \"number\" && `Max-Age=${c.maxAge}`,\n    \"domain\" in c && c.domain && `Domain=${c.domain}`,\n    \"secure\" in c && c.secure && \"Secure\",\n    \"httpOnly\" in c && c.httpOnly && \"HttpOnly\",\n    \"sameSite\" in c && c.sameSite && `SameSite=${c.sameSite}`\n  ].filter(Boolean);\n  return `${c.name}=${encodeURIComponent((_a = c.value) != null ? _a : \"\")}; ${attrs.join(\"; \")}`;\n}\nfunction parseCookie(cookie) {\n  const map = /* @__PURE__ */ new Map();\n  for (const pair of cookie.split(/; */)) {\n    if (!pair)\n      continue;\n    const splitAt = pair.indexOf(\"=\");\n    if (splitAt === -1) {\n      map.set(pair, \"true\");\n      continue;\n    }\n    const [key, value] = [pair.slice(0, splitAt), pair.slice(splitAt + 1)];\n    try {\n      map.set(key, decodeURIComponent(value != null ? value : \"true\"));\n    } catch {\n    }\n  }\n  return map;\n}\nfunction parseSetCookie(setCookie) {\n  if (!setCookie) {\n    return void 0;\n  }\n  const [[name, value], ...attributes] = parseCookie(setCookie);\n  const { domain, expires, httponly, maxage, path, samesite, secure } = Object.fromEntries(\n    attributes.map(([key, value2]) => [key.toLowerCase(), value2])\n  );\n  const cookie = {\n    name,\n    value: decodeURIComponent(value),\n    domain,\n    ...expires && { expires: new Date(expires) },\n    ...httponly && { httpOnly: true },\n    ...typeof maxage === \"string\" && { maxAge: Number(maxage) },\n    path,\n    ...samesite && { sameSite: parseSameSite(samesite) },\n    ...secure && { secure: true }\n  };\n  return compact(cookie);\n}\nfunction compact(t) {\n  const newT = {};\n  for (const key in t) {\n    if (t[key]) {\n      newT[key] = t[key];\n    }\n  }\n  return newT;\n}\nvar SAME_SITE = [\"strict\", \"lax\", \"none\"];\nfunction parseSameSite(string) {\n  string = string.toLowerCase();\n  return SAME_SITE.includes(string) ? string : void 0;\n}\nfunction splitCookiesString(cookiesString) {\n  if (!cookiesString)\n    return [];\n  var cookiesStrings = [];\n  var pos = 0;\n  var start;\n  var ch;\n  var lastComma;\n  var nextStart;\n  var cookiesSeparatorFound;\n  function skipWhitespace() {\n    while (pos < cookiesString.length && /\\s/.test(cookiesString.charAt(pos))) {\n      pos += 1;\n    }\n    return pos < cookiesString.length;\n  }\n  function notSpecialChar() {\n    ch = cookiesString.charAt(pos);\n    return ch !== \"=\" && ch !== \";\" && ch !== \",\";\n  }\n  while (pos < cookiesString.length) {\n    start = pos;\n    cookiesSeparatorFound = false;\n    while (skipWhitespace()) {\n      ch = cookiesString.charAt(pos);\n      if (ch === \",\") {\n        lastComma = pos;\n        pos += 1;\n        skipWhitespace();\n        nextStart = pos;\n        while (pos < cookiesString.length && notSpecialChar()) {\n          pos += 1;\n        }\n        if (pos < cookiesString.length && cookiesString.charAt(pos) === \"=\") {\n          cookiesSeparatorFound = true;\n          pos = nextStart;\n          cookiesStrings.push(cookiesString.substring(start, lastComma));\n          start = pos;\n        } else {\n          pos = lastComma + 1;\n        }\n      } else {\n        pos += 1;\n      }\n    }\n    if (!cookiesSeparatorFound || pos >= cookiesString.length) {\n      cookiesStrings.push(cookiesString.substring(start, cookiesString.length));\n    }\n  }\n  return cookiesStrings;\n}\n\n// src/request-cookies.ts\nvar RequestCookies = class {\n  constructor(requestHeaders) {\n    /** @internal */\n    this._parsed = /* @__PURE__ */ new Map();\n    this._headers = requestHeaders;\n    const header = requestHeaders.get(\"cookie\");\n    if (header) {\n      const parsed = parseCookie(header);\n      for (const [name, value] of parsed) {\n        this._parsed.set(name, { name, value });\n      }\n    }\n  }\n  [Symbol.iterator]() {\n    return this._parsed[Symbol.iterator]();\n  }\n  /**\n   * The amount of cookies received from the client\n   */\n  get size() {\n    return this._parsed.size;\n  }\n  get(...args) {\n    const name = typeof args[0] === \"string\" ? args[0] : args[0].name;\n    return this._parsed.get(name);\n  }\n  getAll(...args) {\n    var _a;\n    const all = Array.from(this._parsed);\n    if (!args.length) {\n      return all.map(([_, value]) => value);\n    }\n    const name = typeof args[0] === \"string\" ? args[0] : (_a = args[0]) == null ? void 0 : _a.name;\n    return all.filter(([n]) => n === name).map(([_, value]) => value);\n  }\n  has(name) {\n    return this._parsed.has(name);\n  }\n  set(...args) {\n    const [name, value] = args.length === 1 ? [args[0].name, args[0].value] : args;\n    const map = this._parsed;\n    map.set(name, { name, value });\n    this._headers.set(\n      \"cookie\",\n      Array.from(map).map(([_, value2]) => stringifyCookie(value2)).join(\"; \")\n    );\n    return this;\n  }\n  /**\n   * Delete the cookies matching the passed name or names in the request.\n   */\n  delete(names) {\n    const map = this._parsed;\n    const result = !Array.isArray(names) ? map.delete(names) : names.map((name) => map.delete(name));\n    this._headers.set(\n      \"cookie\",\n      Array.from(map).map(([_, value]) => stringifyCookie(value)).join(\"; \")\n    );\n    return result;\n  }\n  /**\n   * Delete all the cookies in the cookies in the request.\n   */\n  clear() {\n    this.delete(Array.from(this._parsed.keys()));\n    return this;\n  }\n  /**\n   * Format the cookies in the request as a string for logging\n   */\n  [Symbol.for(\"edge-runtime.inspect.custom\")]() {\n    return `RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`;\n  }\n  toString() {\n    return [...this._parsed.values()].map((v) => `${v.name}=${encodeURIComponent(v.value)}`).join(\"; \");\n  }\n};\n\n// src/response-cookies.ts\nvar ResponseCookies = class {\n  constructor(responseHeaders) {\n    /** @internal */\n    this._parsed = /* @__PURE__ */ new Map();\n    var _a, _b;\n    this._headers = responseHeaders;\n    const setCookie = (_a = responseHeaders.getSetCookie) == null ? void 0 : _a.call(responseHeaders);\n    (_b = responseHeaders.get(\"set-cookie\")) != null ? _b : [];\n    const cookieStrings = Array.isArray(setCookie) ? setCookie : (\n      // TODO: remove splitCookiesString when `getSetCookie` adoption is high enough in Node.js\n      // https://developer.mozilla.org/en-US/docs/Web/API/Headers/getSetCookie#browser_compatibility\n      splitCookiesString(setCookie)\n    );\n    for (const cookieString of cookieStrings) {\n      const parsed = parseSetCookie(cookieString);\n      if (parsed)\n        this._parsed.set(parsed.name, parsed);\n    }\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-get CookieStore#get} without the Promise.\n   */\n  get(...args) {\n    const key = typeof args[0] === \"string\" ? args[0] : args[0].name;\n    return this._parsed.get(key);\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-getAll CookieStore#getAll} without the Promise.\n   */\n  getAll(...args) {\n    var _a;\n    const all = Array.from(this._parsed.values());\n    if (!args.length) {\n      return all;\n    }\n    const key = typeof args[0] === \"string\" ? args[0] : (_a = args[0]) == null ? void 0 : _a.name;\n    return all.filter((c) => c.name === key);\n  }\n  has(name) {\n    return this._parsed.has(name);\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-set CookieStore#set} without the Promise.\n   */\n  set(...args) {\n    const [name, value, cookie] = args.length === 1 ? [args[0].name, args[0].value, args[0]] : args;\n    const map = this._parsed;\n    map.set(name, normalizeCookie({ name, value, ...cookie }));\n    replace(map, this._headers);\n    return this;\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-delete CookieStore#delete} without the Promise.\n   */\n  delete(...args) {\n    const [name, path, domain] = typeof args[0] === \"string\" ? [args[0]] : [args[0].name, args[0].path, args[0].domain];\n    return this.set({ name, path, domain, value: \"\", expires: /* @__PURE__ */ new Date(0) });\n  }\n  [Symbol.for(\"edge-runtime.inspect.custom\")]() {\n    return `ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`;\n  }\n  toString() {\n    return [...this._parsed.values()].map(stringifyCookie).join(\"; \");\n  }\n};\nfunction replace(bag, headers) {\n  headers.delete(\"set-cookie\");\n  for (const [, value] of bag) {\n    const serialized = stringifyCookie(value);\n    headers.append(\"set-cookie\", serialized);\n  }\n}\nfunction normalizeCookie(cookie = { name: \"\", value: \"\" }) {\n  if (typeof cookie.expires === \"number\") {\n    cookie.expires = new Date(cookie.expires);\n  }\n  if (cookie.maxAge) {\n    cookie.expires = new Date(Date.now() + cookie.maxAge * 1e3);\n  }\n  if (cookie.path === null || cookie.path === void 0) {\n    cookie.path = \"/\";\n  }\n  return cookie;\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  RequestCookies,\n  ResponseCookies,\n  parseCookie,\n  parseSetCookie,\n  splitCookiesString,\n  stringifyCookie\n});\n","(()=>{\"use strict\";if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var e={};(()=>{var r=e;\n/*!\n * cookie\n * Copyright(c) 2012-2014 Roman Shtylman\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */r.parse=parse;r.serialize=serialize;var i=decodeURIComponent;var t=encodeURIComponent;var a=/; */;var n=/^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;function parse(e,r){if(typeof e!==\"string\"){throw new TypeError(\"argument str must be a string\")}var t={};var n=r||{};var o=e.split(a);var s=n.decode||i;for(var p=0;p<o.length;p++){var f=o[p];var u=f.indexOf(\"=\");if(u<0){continue}var v=f.substr(0,u).trim();var c=f.substr(++u,f.length).trim();if('\"'==c[0]){c=c.slice(1,-1)}if(undefined==t[v]){t[v]=tryDecode(c,s)}}return t}function serialize(e,r,i){var a=i||{};var o=a.encode||t;if(typeof o!==\"function\"){throw new TypeError(\"option encode is invalid\")}if(!n.test(e)){throw new TypeError(\"argument name is invalid\")}var s=o(r);if(s&&!n.test(s)){throw new TypeError(\"argument val is invalid\")}var p=e+\"=\"+s;if(null!=a.maxAge){var f=a.maxAge-0;if(isNaN(f)||!isFinite(f)){throw new TypeError(\"option maxAge is invalid\")}p+=\"; Max-Age=\"+Math.floor(f)}if(a.domain){if(!n.test(a.domain)){throw new TypeError(\"option domain is invalid\")}p+=\"; Domain=\"+a.domain}if(a.path){if(!n.test(a.path)){throw new TypeError(\"option path is invalid\")}p+=\"; Path=\"+a.path}if(a.expires){if(typeof a.expires.toUTCString!==\"function\"){throw new TypeError(\"option expires is invalid\")}p+=\"; Expires=\"+a.expires.toUTCString()}if(a.httpOnly){p+=\"; HttpOnly\"}if(a.secure){p+=\"; Secure\"}if(a.sameSite){var u=typeof a.sameSite===\"string\"?a.sameSite.toLowerCase():a.sameSite;switch(u){case true:p+=\"; SameSite=Strict\";break;case\"lax\":p+=\"; SameSite=Lax\";break;case\"strict\":p+=\"; SameSite=Strict\";break;case\"none\":p+=\"; SameSite=None\";break;default:throw new TypeError(\"option sameSite is invalid\")}}return p}function tryDecode(e,r){try{return r(e)}catch(r){return e}}})();module.exports=e})();","\"use strict\";\n\nvar defaultParseOptions = {\n  decodeValues: true,\n  map: false,\n  silent: false,\n};\n\nfunction isNonEmptyString(str) {\n  return typeof str === \"string\" && !!str.trim();\n}\n\nfunction parseString(setCookieValue, options) {\n  var parts = setCookieValue.split(\";\").filter(isNonEmptyString);\n\n  var nameValuePairStr = parts.shift();\n  var parsed = parseNameValuePair(nameValuePairStr);\n  var name = parsed.name;\n  var value = parsed.value;\n\n  options = options\n    ? Object.assign({}, defaultParseOptions, options)\n    : defaultParseOptions;\n\n  try {\n    value = options.decodeValues ? decodeURIComponent(value) : value; // decode cookie value\n  } catch (e) {\n    console.error(\n      \"set-cookie-parser encountered an error while decoding a cookie with value '\" +\n        value +\n        \"'. Set options.decodeValues to false to disable this feature.\",\n      e\n    );\n  }\n\n  var cookie = {\n    name: name,\n    value: value,\n  };\n\n  parts.forEach(function (part) {\n    var sides = part.split(\"=\");\n    var key = sides.shift().trimLeft().toLowerCase();\n    var value = sides.join(\"=\");\n    if (key === \"expires\") {\n      cookie.expires = new Date(value);\n    } else if (key === \"max-age\") {\n      cookie.maxAge = parseInt(value, 10);\n    } else if (key === \"secure\") {\n      cookie.secure = true;\n    } else if (key === \"httponly\") {\n      cookie.httpOnly = true;\n    } else if (key === \"samesite\") {\n      cookie.sameSite = value;\n    } else {\n      cookie[key] = value;\n    }\n  });\n\n  return cookie;\n}\n\nfunction parseNameValuePair(nameValuePairStr) {\n  // Parses name-value-pair according to rfc6265bis draft\n\n  var name = \"\";\n  var value = \"\";\n  var nameValueArr = nameValuePairStr.split(\"=\");\n  if (nameValueArr.length > 1) {\n    name = nameValueArr.shift();\n    value = nameValueArr.join(\"=\"); // everything after the first =, joined by a \"=\" if there was more than one part\n  } else {\n    value = nameValuePairStr;\n  }\n\n  return { name: name, value: value };\n}\n\nfunction parse(input, options) {\n  options = options\n    ? Object.assign({}, defaultParseOptions, options)\n    : defaultParseOptions;\n\n  if (!input) {\n    if (!options.map) {\n      return [];\n    } else {\n      return {};\n    }\n  }\n\n  if (input.headers) {\n    if (typeof input.headers.getSetCookie === \"function\") {\n      // for fetch responses - they combine headers of the same type in the headers array,\n      // but getSetCookie returns an uncombined array\n      input = input.headers.getSetCookie();\n    } else if (input.headers[\"set-cookie\"]) {\n      // fast-path for node.js (which automatically normalizes header names to lower-case\n      input = input.headers[\"set-cookie\"];\n    } else {\n      // slow-path for other environments - see #25\n      var sch =\n        input.headers[\n          Object.keys(input.headers).find(function (key) {\n            return key.toLowerCase() === \"set-cookie\";\n          })\n        ];\n      // warn if called on a request-like object with a cookie header rather than a set-cookie header - see #34, 36\n      if (!sch && input.headers.cookie && !options.silent) {\n        console.warn(\n          \"Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning.\"\n        );\n      }\n      input = sch;\n    }\n  }\n  if (!Array.isArray(input)) {\n    input = [input];\n  }\n\n  options = options\n    ? Object.assign({}, defaultParseOptions, options)\n    : defaultParseOptions;\n\n  if (!options.map) {\n    return input.filter(isNonEmptyString).map(function (str) {\n      return parseString(str, options);\n    });\n  } else {\n    var cookies = {};\n    return input.filter(isNonEmptyString).reduce(function (cookies, str) {\n      var cookie = parseString(str, options);\n      cookies[cookie.name] = cookie;\n      return cookies;\n    }, cookies);\n  }\n}\n\n/*\n  Set-Cookie header field-values are sometimes comma joined in one string. This splits them without choking on commas\n  that are within a single set-cookie field-value, such as in the Expires portion.\n\n  This is uncommon, but explicitly allowed - see https://tools.ietf.org/html/rfc2616#section-4.2\n  Node.js does this for every header *except* set-cookie - see https://github.com/nodejs/node/blob/d5e363b77ebaf1caf67cd7528224b651c86815c1/lib/_http_incoming.js#L128\n  React Native's fetch does this for *every* header, including set-cookie.\n\n  Based on: https://github.com/google/j2objc/commit/16820fdbc8f76ca0c33472810ce0cb03d20efe25\n  Credits to: https://github.com/tomball for original and https://github.com/chrusart for JavaScript implementation\n*/\nfunction splitCookiesString(cookiesString) {\n  if (Array.isArray(cookiesString)) {\n    return cookiesString;\n  }\n  if (typeof cookiesString !== \"string\") {\n    return [];\n  }\n\n  var cookiesStrings = [];\n  var pos = 0;\n  var start;\n  var ch;\n  var lastComma;\n  var nextStart;\n  var cookiesSeparatorFound;\n\n  function skipWhitespace() {\n    while (pos < cookiesString.length && /\\s/.test(cookiesString.charAt(pos))) {\n      pos += 1;\n    }\n    return pos < cookiesString.length;\n  }\n\n  function notSpecialChar() {\n    ch = cookiesString.charAt(pos);\n\n    return ch !== \"=\" && ch !== \";\" && ch !== \",\";\n  }\n\n  while (pos < cookiesString.length) {\n    start = pos;\n    cookiesSeparatorFound = false;\n\n    while (skipWhitespace()) {\n      ch = cookiesString.charAt(pos);\n      if (ch === \",\") {\n        // ',' is a cookie separator if we have later first '=', not ';' or ','\n        lastComma = pos;\n        pos += 1;\n\n        skipWhitespace();\n        nextStart = pos;\n\n        while (pos < cookiesString.length && notSpecialChar()) {\n          pos += 1;\n        }\n\n        // currently special character\n        if (pos < cookiesString.length && cookiesString.charAt(pos) === \"=\") {\n          // we found cookies separator\n          cookiesSeparatorFound = true;\n          // pos is inside the next cookie, so back up and return it.\n          pos = nextStart;\n          cookiesStrings.push(cookiesString.substring(start, lastComma));\n          start = pos;\n        } else {\n          // in param ',' or param separator ';',\n          // we continue from that comma\n          pos = lastComma + 1;\n        }\n      } else {\n        pos += 1;\n      }\n    }\n\n    if (!cookiesSeparatorFound || pos >= cookiesString.length) {\n      cookiesStrings.push(cookiesString.substring(start, cookiesString.length));\n    }\n  }\n\n  return cookiesStrings;\n}\n\nmodule.exports = parse;\nmodule.exports.parse = parse;\nmodule.exports.parseString = parseString;\nmodule.exports.splitCookiesString = splitCookiesString;\n","var _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = require('es5-ext/global');\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","module.exports = require('../package.json').version;\n","import digest from '../runtime/digest.js';\nexport const encoder = new TextEncoder();\nexport const decoder = new TextDecoder();\nconst MAX_INT32 = 2 ** 32;\nexport function concat(...buffers) {\n    const size = buffers.reduce((acc, { length }) => acc + length, 0);\n    const buf = new Uint8Array(size);\n    let i = 0;\n    buffers.forEach((buffer) => {\n        buf.set(buffer, i);\n        i += buffer.length;\n    });\n    return buf;\n}\nexport function p2s(alg, p2sInput) {\n    return concat(encoder.encode(alg), new Uint8Array([0]), p2sInput);\n}\nfunction writeUInt32BE(buf, value, offset) {\n    if (value < 0 || value >= MAX_INT32) {\n        throw new RangeError(`value must be >= 0 and <= ${MAX_INT32 - 1}. Received ${value}`);\n    }\n    buf.set([value >>> 24, value >>> 16, value >>> 8, value & 0xff], offset);\n}\nexport function uint64be(value) {\n    const high = Math.floor(value / MAX_INT32);\n    const low = value % MAX_INT32;\n    const buf = new Uint8Array(8);\n    writeUInt32BE(buf, high, 0);\n    writeUInt32BE(buf, low, 4);\n    return buf;\n}\nexport function uint32be(value) {\n    const buf = new Uint8Array(4);\n    writeUInt32BE(buf, value);\n    return buf;\n}\nexport function lengthAndInput(input) {\n    return concat(uint32be(input.length), input);\n}\nexport async function concatKdf(secret, bits, value) {\n    const iterations = Math.ceil((bits >> 3) / 32);\n    const res = new Uint8Array(iterations * 32);\n    for (let iter = 0; iter < iterations; iter++) {\n        const buf = new Uint8Array(4 + secret.length + value.length);\n        buf.set(uint32be(iter + 1));\n        buf.set(secret, 4);\n        buf.set(value, 4 + secret.length);\n        res.set(await digest('sha256', buf), iter * 32);\n    }\n    return res.slice(0, bits >> 3);\n}\n","import { encoder, decoder } from '../lib/buffer_utils.js';\nexport const encodeBase64 = (input) => {\n    let unencoded = input;\n    if (typeof unencoded === 'string') {\n        unencoded = encoder.encode(unencoded);\n    }\n    const CHUNK_SIZE = 0x8000;\n    const arr = [];\n    for (let i = 0; i < unencoded.length; i += CHUNK_SIZE) {\n        arr.push(String.fromCharCode.apply(null, unencoded.subarray(i, i + CHUNK_SIZE)));\n    }\n    return btoa(arr.join(''));\n};\nexport const encode = (input) => {\n    return encodeBase64(input).replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n};\nexport const decodeBase64 = (encoded) => {\n    const binary = atob(encoded);\n    const bytes = new Uint8Array(binary.length);\n    for (let i = 0; i < binary.length; i++) {\n        bytes[i] = binary.charCodeAt(i);\n    }\n    return bytes;\n};\nexport const decode = (input) => {\n    let encoded = input;\n    if (encoded instanceof Uint8Array) {\n        encoded = decoder.decode(encoded);\n    }\n    encoded = encoded.replace(/-/g, '+').replace(/_/g, '/').replace(/\\s/g, '');\n    try {\n        return decodeBase64(encoded);\n    }\n    catch (_a) {\n        throw new TypeError('The input to be decoded is not correctly encoded.');\n    }\n};\n","export class JOSEError extends Error {\n    static get code() {\n        return 'ERR_JOSE_GENERIC';\n    }\n    constructor(message) {\n        var _a;\n        super(message);\n        this.code = 'ERR_JOSE_GENERIC';\n        this.name = this.constructor.name;\n        (_a = Error.captureStackTrace) === null || _a === void 0 ? void 0 : _a.call(Error, this, this.constructor);\n    }\n}\nexport class JWTClaimValidationFailed extends JOSEError {\n    static get code() {\n        return 'ERR_JWT_CLAIM_VALIDATION_FAILED';\n    }\n    constructor(message, claim = 'unspecified', reason = 'unspecified') {\n        super(message);\n        this.code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';\n        this.claim = claim;\n        this.reason = reason;\n    }\n}\nexport class JWTExpired extends JOSEError {\n    static get code() {\n        return 'ERR_JWT_EXPIRED';\n    }\n    constructor(message, claim = 'unspecified', reason = 'unspecified') {\n        super(message);\n        this.code = 'ERR_JWT_EXPIRED';\n        this.claim = claim;\n        this.reason = reason;\n    }\n}\nexport class JOSEAlgNotAllowed extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JOSE_ALG_NOT_ALLOWED';\n    }\n    static get code() {\n        return 'ERR_JOSE_ALG_NOT_ALLOWED';\n    }\n}\nexport class JOSENotSupported extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JOSE_NOT_SUPPORTED';\n    }\n    static get code() {\n        return 'ERR_JOSE_NOT_SUPPORTED';\n    }\n}\nexport class JWEDecryptionFailed extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWE_DECRYPTION_FAILED';\n        this.message = 'decryption operation failed';\n    }\n    static get code() {\n        return 'ERR_JWE_DECRYPTION_FAILED';\n    }\n}\nexport class JWEInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWE_INVALID';\n    }\n    static get code() {\n        return 'ERR_JWE_INVALID';\n    }\n}\nexport class JWSInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWS_INVALID';\n    }\n    static get code() {\n        return 'ERR_JWS_INVALID';\n    }\n}\nexport class JWTInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWT_INVALID';\n    }\n    static get code() {\n        return 'ERR_JWT_INVALID';\n    }\n}\nexport class JWKInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWK_INVALID';\n    }\n    static get code() {\n        return 'ERR_JWK_INVALID';\n    }\n}\nexport class JWKSInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWKS_INVALID';\n    }\n    static get code() {\n        return 'ERR_JWKS_INVALID';\n    }\n}\nexport class JWKSNoMatchingKey extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWKS_NO_MATCHING_KEY';\n        this.message = 'no applicable key found in the JSON Web Key Set';\n    }\n    static get code() {\n        return 'ERR_JWKS_NO_MATCHING_KEY';\n    }\n}\nexport class JWKSMultipleMatchingKeys extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\n        this.message = 'multiple matching keys found in the JSON Web Key Set';\n    }\n    static get code() {\n        return 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\n    }\n}\nSymbol.asyncIterator;\nexport class JWKSTimeout extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWKS_TIMEOUT';\n        this.message = 'request timed out';\n    }\n    static get code() {\n        return 'ERR_JWKS_TIMEOUT';\n    }\n}\nexport class JWSSignatureVerificationFailed extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\n        this.message = 'signature verification failed';\n    }\n    static get code() {\n        return 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\n    }\n}\n","export default crypto;\nexport const isCryptoKey = (key) => key instanceof CryptoKey;\n","import crypto from './webcrypto.js';\nexport default crypto.getRandomValues.bind(crypto);\n","import { JOSENotSupported } from '../util/errors.js';\nimport random from '../runtime/random.js';\nexport function bitLength(alg) {\n    switch (alg) {\n        case 'A128GCM':\n        case 'A128GCMKW':\n        case 'A192GCM':\n        case 'A192GCMKW':\n        case 'A256GCM':\n        case 'A256GCMKW':\n            return 96;\n        case 'A128CBC-HS256':\n        case 'A192CBC-HS384':\n        case 'A256CBC-HS512':\n            return 128;\n        default:\n            throw new JOSENotSupported(`Unsupported JWE Algorithm: ${alg}`);\n    }\n}\nexport default (alg) => random(new Uint8Array(bitLength(alg) >> 3));\n","import { JWEInvalid } from '../util/errors.js';\nimport { bitLength } from './iv.js';\nconst checkIvLength = (enc, iv) => {\n    if (iv.length << 3 !== bitLength(enc)) {\n        throw new JWEInvalid('Invalid Initialization Vector length');\n    }\n};\nexport default checkIvLength;\n","import { JWEInvalid } from '../util/errors.js';\nconst checkCekLength = (cek, expected) => {\n    const actual = cek.byteLength << 3;\n    if (actual !== expected) {\n        throw new JWEInvalid(`Invalid Content Encryption Key length. Expected ${expected} bits, got ${actual} bits`);\n    }\n};\nexport default checkCekLength;\n","import { concat, uint64be } from '../lib/buffer_utils.js';\nimport checkIvLength from '../lib/check_iv_length.js';\nimport checkCekLength from './check_cek_length.js';\nimport timingSafeEqual from './timing_safe_equal.js';\nimport { JOSENotSupported, JWEDecryptionFailed } from '../util/errors.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nasync function cbcDecrypt(enc, cek, ciphertext, iv, tag, aad) {\n    if (!(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, 'Uint8Array'));\n    }\n    const keySize = parseInt(enc.slice(1, 4), 10);\n    const encKey = await crypto.subtle.importKey('raw', cek.subarray(keySize >> 3), 'AES-CBC', false, ['decrypt']);\n    const macKey = await crypto.subtle.importKey('raw', cek.subarray(0, keySize >> 3), {\n        hash: `SHA-${keySize << 1}`,\n        name: 'HMAC',\n    }, false, ['sign']);\n    const macData = concat(aad, iv, ciphertext, uint64be(aad.length << 3));\n    const expectedTag = new Uint8Array((await crypto.subtle.sign('HMAC', macKey, macData)).slice(0, keySize >> 3));\n    let macCheckPassed;\n    try {\n        macCheckPassed = timingSafeEqual(tag, expectedTag);\n    }\n    catch (_a) {\n    }\n    if (!macCheckPassed) {\n        throw new JWEDecryptionFailed();\n    }\n    let plaintext;\n    try {\n        plaintext = new Uint8Array(await crypto.subtle.decrypt({ iv, name: 'AES-CBC' }, encKey, ciphertext));\n    }\n    catch (_b) {\n    }\n    if (!plaintext) {\n        throw new JWEDecryptionFailed();\n    }\n    return plaintext;\n}\nasync function gcmDecrypt(enc, cek, ciphertext, iv, tag, aad) {\n    let encKey;\n    if (cek instanceof Uint8Array) {\n        encKey = await crypto.subtle.importKey('raw', cek, 'AES-GCM', false, ['decrypt']);\n    }\n    else {\n        checkEncCryptoKey(cek, enc, 'decrypt');\n        encKey = cek;\n    }\n    try {\n        return new Uint8Array(await crypto.subtle.decrypt({\n            additionalData: aad,\n            iv,\n            name: 'AES-GCM',\n            tagLength: 128,\n        }, encKey, concat(ciphertext, tag)));\n    }\n    catch (_a) {\n        throw new JWEDecryptionFailed();\n    }\n}\nconst decrypt = async (enc, cek, ciphertext, iv, tag, aad) => {\n    if (!isCryptoKey(cek) && !(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, ...types, 'Uint8Array'));\n    }\n    checkIvLength(enc, iv);\n    switch (enc) {\n        case 'A128CBC-HS256':\n        case 'A192CBC-HS384':\n        case 'A256CBC-HS512':\n            if (cek instanceof Uint8Array)\n                checkCekLength(cek, parseInt(enc.slice(-3), 10));\n            return cbcDecrypt(enc, cek, ciphertext, iv, tag, aad);\n        case 'A128GCM':\n        case 'A192GCM':\n        case 'A256GCM':\n            if (cek instanceof Uint8Array)\n                checkCekLength(cek, parseInt(enc.slice(1, 4), 10));\n            return gcmDecrypt(enc, cek, ciphertext, iv, tag, aad);\n        default:\n            throw new JOSENotSupported('Unsupported JWE Content Encryption Algorithm');\n    }\n};\nexport default decrypt;\n","import { JOSENotSupported } from '../util/errors.js';\nexport const inflate = async () => {\n    throw new JOSENotSupported('JWE \"zip\" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.');\n};\nexport const deflate = async () => {\n    throw new JOSENotSupported('JWE \"zip\" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.');\n};\n","const bogusWebCrypto = [\n    { hash: 'SHA-256', name: 'HMAC' },\n    true,\n    ['sign'],\n];\nexport default bogusWebCrypto;\n","import bogusWebCrypto from './bogus.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nfunction checkKeySize(key, alg) {\n    if (key.algorithm.length !== parseInt(alg.slice(1, 4), 10)) {\n        throw new TypeError(`Invalid key size for alg: ${alg}`);\n    }\n}\nfunction getCryptoKey(key, alg, usage) {\n    if (isCryptoKey(key)) {\n        checkEncCryptoKey(key, alg, usage);\n        return key;\n    }\n    if (key instanceof Uint8Array) {\n        return crypto.subtle.importKey('raw', key, 'AES-KW', true, [usage]);\n    }\n    throw new TypeError(invalidKeyInput(key, ...types, 'Uint8Array'));\n}\nexport const wrap = async (alg, key, cek) => {\n    const cryptoKey = await getCryptoKey(key, alg, 'wrapKey');\n    checkKeySize(cryptoKey, alg);\n    const cryptoKeyCek = await crypto.subtle.importKey('raw', cek, ...bogusWebCrypto);\n    return new Uint8Array(await crypto.subtle.wrapKey('raw', cryptoKeyCek, cryptoKey, 'AES-KW'));\n};\nexport const unwrap = async (alg, key, encryptedKey) => {\n    const cryptoKey = await getCryptoKey(key, alg, 'unwrapKey');\n    checkKeySize(cryptoKey, alg);\n    const cryptoKeyCek = await crypto.subtle.unwrapKey('raw', encryptedKey, cryptoKey, 'AES-KW', ...bogusWebCrypto);\n    return new Uint8Array(await crypto.subtle.exportKey('raw', cryptoKeyCek));\n};\n","import { encoder, concat, uint32be, lengthAndInput, concatKdf } from '../lib/buffer_utils.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nexport async function deriveKey(publicKey, privateKey, algorithm, keyLength, apu = new Uint8Array(0), apv = new Uint8Array(0)) {\n    if (!isCryptoKey(publicKey)) {\n        throw new TypeError(invalidKeyInput(publicKey, ...types));\n    }\n    checkEncCryptoKey(publicKey, 'ECDH');\n    if (!isCryptoKey(privateKey)) {\n        throw new TypeError(invalidKeyInput(privateKey, ...types));\n    }\n    checkEncCryptoKey(privateKey, 'ECDH', 'deriveBits');\n    const value = concat(lengthAndInput(encoder.encode(algorithm)), lengthAndInput(apu), lengthAndInput(apv), uint32be(keyLength));\n    let length;\n    if (publicKey.algorithm.name === 'X25519') {\n        length = 256;\n    }\n    else if (publicKey.algorithm.name === 'X448') {\n        length = 448;\n    }\n    else {\n        length =\n            Math.ceil(parseInt(publicKey.algorithm.namedCurve.substr(-3), 10) / 8) << 3;\n    }\n    const sharedSecret = new Uint8Array(await crypto.subtle.deriveBits({\n        name: publicKey.algorithm.name,\n        public: publicKey,\n    }, privateKey, length));\n    return concatKdf(sharedSecret, keyLength, value);\n}\nexport async function generateEpk(key) {\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types));\n    }\n    return crypto.subtle.generateKey(key.algorithm, true, ['deriveBits']);\n}\nexport function ecdhAllowed(key) {\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types));\n    }\n    return (['P-256', 'P-384', 'P-521'].includes(key.algorithm.namedCurve) ||\n        key.algorithm.name === 'X25519' ||\n        key.algorithm.name === 'X448');\n}\n","import { JWEInvalid } from '../util/errors.js';\nexport default function checkP2s(p2s) {\n    if (!(p2s instanceof Uint8Array) || p2s.length < 8) {\n        throw new JWEInvalid('PBES2 Salt Input must be 8 or more octets');\n    }\n}\n","import random from './random.js';\nimport { p2s as concatSalt } from '../lib/buffer_utils.js';\nimport { encode as base64url } from './base64url.js';\nimport { wrap, unwrap } from './aeskw.js';\nimport checkP2s from '../lib/check_p2s.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nfunction getCryptoKey(key, alg) {\n    if (key instanceof Uint8Array) {\n        return crypto.subtle.importKey('raw', key, 'PBKDF2', false, ['deriveBits']);\n    }\n    if (isCryptoKey(key)) {\n        checkEncCryptoKey(key, alg, 'deriveBits', 'deriveKey');\n        return key;\n    }\n    throw new TypeError(invalidKeyInput(key, ...types, 'Uint8Array'));\n}\nasync function deriveKey(p2s, alg, p2c, key) {\n    checkP2s(p2s);\n    const salt = concatSalt(alg, p2s);\n    const keylen = parseInt(alg.slice(13, 16), 10);\n    const subtleAlg = {\n        hash: `SHA-${alg.slice(8, 11)}`,\n        iterations: p2c,\n        name: 'PBKDF2',\n        salt,\n    };\n    const wrapAlg = {\n        length: keylen,\n        name: 'AES-KW',\n    };\n    const cryptoKey = await getCryptoKey(key, alg);\n    if (cryptoKey.usages.includes('deriveBits')) {\n        return new Uint8Array(await crypto.subtle.deriveBits(subtleAlg, cryptoKey, keylen));\n    }\n    if (cryptoKey.usages.includes('deriveKey')) {\n        return crypto.subtle.deriveKey(subtleAlg, cryptoKey, wrapAlg, false, ['wrapKey', 'unwrapKey']);\n    }\n    throw new TypeError('PBKDF2 key \"usages\" must include \"deriveBits\" or \"deriveKey\"');\n}\nexport const encrypt = async (alg, key, cek, p2c = 2048, p2s = random(new Uint8Array(16))) => {\n    const derived = await deriveKey(p2s, alg, p2c, key);\n    const encryptedKey = await wrap(alg.slice(-6), derived, cek);\n    return { encryptedKey, p2c, p2s: base64url(p2s) };\n};\nexport const decrypt = async (alg, key, encryptedKey, p2c, p2s) => {\n    const derived = await deriveKey(p2s, alg, p2c, key);\n    return unwrap(alg.slice(-6), derived, encryptedKey);\n};\n","import { JOSENotSupported } from '../util/errors.js';\nexport default function subtleRsaEs(alg) {\n    switch (alg) {\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512':\n            return 'RSA-OAEP';\n        default:\n            throw new JOSENotSupported(`alg ${alg} is not supported either by JOSE or your javascript runtime`);\n    }\n}\n","import subtleAlgorithm from './subtle_rsaes.js';\nimport bogusWebCrypto from './bogus.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport checkKeyLength from './check_key_length.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nexport const encrypt = async (alg, key, cek) => {\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types));\n    }\n    checkEncCryptoKey(key, alg, 'encrypt', 'wrapKey');\n    checkKeyLength(alg, key);\n    if (key.usages.includes('encrypt')) {\n        return new Uint8Array(await crypto.subtle.encrypt(subtleAlgorithm(alg), key, cek));\n    }\n    if (key.usages.includes('wrapKey')) {\n        const cryptoKeyCek = await crypto.subtle.importKey('raw', cek, ...bogusWebCrypto);\n        return new Uint8Array(await crypto.subtle.wrapKey('raw', cryptoKeyCek, key, subtleAlgorithm(alg)));\n    }\n    throw new TypeError('RSA-OAEP key \"usages\" must include \"encrypt\" or \"wrapKey\" for this operation');\n};\nexport const decrypt = async (alg, key, encryptedKey) => {\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types));\n    }\n    checkEncCryptoKey(key, alg, 'decrypt', 'unwrapKey');\n    checkKeyLength(alg, key);\n    if (key.usages.includes('decrypt')) {\n        return new Uint8Array(await crypto.subtle.decrypt(subtleAlgorithm(alg), key, encryptedKey));\n    }\n    if (key.usages.includes('unwrapKey')) {\n        const cryptoKeyCek = await crypto.subtle.unwrapKey('raw', encryptedKey, key, subtleAlgorithm(alg), ...bogusWebCrypto);\n        return new Uint8Array(await crypto.subtle.exportKey('raw', cryptoKeyCek));\n    }\n    throw new TypeError('RSA-OAEP key \"usages\" must include \"decrypt\" or \"unwrapKey\" for this operation');\n};\n","import { JOSENotSupported } from '../util/errors.js';\nimport random from '../runtime/random.js';\nexport function bitLength(alg) {\n    switch (alg) {\n        case 'A128GCM':\n            return 128;\n        case 'A192GCM':\n            return 192;\n        case 'A256GCM':\n        case 'A128CBC-HS256':\n            return 256;\n        case 'A192CBC-HS384':\n            return 384;\n        case 'A256CBC-HS512':\n            return 512;\n        default:\n            throw new JOSENotSupported(`Unsupported JWE Algorithm: ${alg}`);\n    }\n}\nexport default (alg) => random(new Uint8Array(bitLength(alg) >> 3));\n","import crypto, { isCryptoKey } from './webcrypto.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { encodeBase64, decodeBase64 } from './base64url.js';\nimport formatPEM from '../lib/format_pem.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport { types } from './is_key_like.js';\nconst genericExport = async (keyType, keyFormat, key) => {\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types));\n    }\n    if (!key.extractable) {\n        throw new TypeError('CryptoKey is not extractable');\n    }\n    if (key.type !== keyType) {\n        throw new TypeError(`key is not a ${keyType} key`);\n    }\n    return formatPEM(encodeBase64(new Uint8Array(await crypto.subtle.exportKey(keyFormat, key))), `${keyType.toUpperCase()} KEY`);\n};\nexport const toSPKI = (key) => {\n    return genericExport('public', 'spki', key);\n};\nexport const toPKCS8 = (key) => {\n    return genericExport('private', 'pkcs8', key);\n};\nconst findOid = (keyData, oid, from = 0) => {\n    if (from === 0) {\n        oid.unshift(oid.length);\n        oid.unshift(0x06);\n    }\n    let i = keyData.indexOf(oid[0], from);\n    if (i === -1)\n        return false;\n    const sub = keyData.subarray(i, i + oid.length);\n    if (sub.length !== oid.length)\n        return false;\n    return sub.every((value, index) => value === oid[index]) || findOid(keyData, oid, i + 1);\n};\nconst getNamedCurve = (keyData) => {\n    switch (true) {\n        case findOid(keyData, [0x2a, 0x86, 0x48, 0xce, 0x3d, 0x03, 0x01, 0x07]):\n            return 'P-256';\n        case findOid(keyData, [0x2b, 0x81, 0x04, 0x00, 0x22]):\n            return 'P-384';\n        case findOid(keyData, [0x2b, 0x81, 0x04, 0x00, 0x23]):\n            return 'P-521';\n        case findOid(keyData, [0x2b, 0x65, 0x6e]):\n            return 'X25519';\n        case findOid(keyData, [0x2b, 0x65, 0x6f]):\n            return 'X448';\n        case findOid(keyData, [0x2b, 0x65, 0x70]):\n            return 'Ed25519';\n        case findOid(keyData, [0x2b, 0x65, 0x71]):\n            return 'Ed448';\n        default:\n            throw new JOSENotSupported('Invalid or unsupported EC Key Curve or OKP Key Sub Type');\n    }\n};\nconst genericImport = async (replace, keyFormat, pem, alg, options) => {\n    var _a;\n    let algorithm;\n    let keyUsages;\n    const keyData = new Uint8Array(atob(pem.replace(replace, ''))\n        .split('')\n        .map((c) => c.charCodeAt(0)));\n    const isPublic = keyFormat === 'spki';\n    switch (alg) {\n        case 'PS256':\n        case 'PS384':\n        case 'PS512':\n            algorithm = { name: 'RSA-PSS', hash: `SHA-${alg.slice(-3)}` };\n            keyUsages = isPublic ? ['verify'] : ['sign'];\n            break;\n        case 'RS256':\n        case 'RS384':\n        case 'RS512':\n            algorithm = { name: 'RSASSA-PKCS1-v1_5', hash: `SHA-${alg.slice(-3)}` };\n            keyUsages = isPublic ? ['verify'] : ['sign'];\n            break;\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512':\n            algorithm = {\n                name: 'RSA-OAEP',\n                hash: `SHA-${parseInt(alg.slice(-3), 10) || 1}`,\n            };\n            keyUsages = isPublic ? ['encrypt', 'wrapKey'] : ['decrypt', 'unwrapKey'];\n            break;\n        case 'ES256':\n            algorithm = { name: 'ECDSA', namedCurve: 'P-256' };\n            keyUsages = isPublic ? ['verify'] : ['sign'];\n            break;\n        case 'ES384':\n            algorithm = { name: 'ECDSA', namedCurve: 'P-384' };\n            keyUsages = isPublic ? ['verify'] : ['sign'];\n            break;\n        case 'ES512':\n            algorithm = { name: 'ECDSA', namedCurve: 'P-521' };\n            keyUsages = isPublic ? ['verify'] : ['sign'];\n            break;\n        case 'ECDH-ES':\n        case 'ECDH-ES+A128KW':\n        case 'ECDH-ES+A192KW':\n        case 'ECDH-ES+A256KW': {\n            const namedCurve = getNamedCurve(keyData);\n            algorithm = namedCurve.startsWith('P-') ? { name: 'ECDH', namedCurve } : { name: namedCurve };\n            keyUsages = isPublic ? [] : ['deriveBits'];\n            break;\n        }\n        case 'EdDSA':\n            algorithm = { name: getNamedCurve(keyData) };\n            keyUsages = isPublic ? ['verify'] : ['sign'];\n            break;\n        default:\n            throw new JOSENotSupported('Invalid or unsupported \"alg\" (Algorithm) value');\n    }\n    return crypto.subtle.importKey(keyFormat, keyData, algorithm, (_a = options === null || options === void 0 ? void 0 : options.extractable) !== null && _a !== void 0 ? _a : false, keyUsages);\n};\nexport const fromPKCS8 = (pem, alg, options) => {\n    return genericImport(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\\s)/g, 'pkcs8', pem, alg, options);\n};\nexport const fromSPKI = (pem, alg, options) => {\n    return genericImport(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\\s)/g, 'spki', pem, alg, options);\n};\nfunction getElement(seq) {\n    let result = [];\n    let next = 0;\n    while (next < seq.length) {\n        let nextPart = parseElement(seq.subarray(next));\n        result.push(nextPart);\n        next += nextPart.byteLength;\n    }\n    return result;\n}\nfunction parseElement(bytes) {\n    let position = 0;\n    let tag = bytes[0] & 0x1f;\n    position++;\n    if (tag === 0x1f) {\n        tag = 0;\n        while (bytes[position] >= 0x80) {\n            tag = tag * 128 + bytes[position] - 0x80;\n            position++;\n        }\n        tag = tag * 128 + bytes[position] - 0x80;\n        position++;\n    }\n    let length = 0;\n    if (bytes[position] < 0x80) {\n        length = bytes[position];\n        position++;\n    }\n    else if (length === 0x80) {\n        length = 0;\n        while (bytes[position + length] !== 0 || bytes[position + length + 1] !== 0) {\n            if (length > bytes.byteLength) {\n                throw new TypeError('invalid indefinite form length');\n            }\n            length++;\n        }\n        const byteLength = position + length + 2;\n        return {\n            byteLength,\n            contents: bytes.subarray(position, position + length),\n            raw: bytes.subarray(0, byteLength),\n        };\n    }\n    else {\n        let numberOfDigits = bytes[position] & 0x7f;\n        position++;\n        length = 0;\n        for (let i = 0; i < numberOfDigits; i++) {\n            length = length * 256 + bytes[position];\n            position++;\n        }\n    }\n    const byteLength = position + length;\n    return {\n        byteLength,\n        contents: bytes.subarray(position, byteLength),\n        raw: bytes.subarray(0, byteLength),\n    };\n}\nfunction spkiFromX509(buf) {\n    const tbsCertificate = getElement(getElement(parseElement(buf).contents)[0].contents);\n    return encodeBase64(tbsCertificate[tbsCertificate[0].raw[0] === 0xa0 ? 6 : 5].raw);\n}\nfunction getSPKI(x509) {\n    const pem = x509.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\\s)/g, '');\n    const raw = decodeBase64(pem);\n    return formatPEM(spkiFromX509(raw), 'PUBLIC KEY');\n}\nexport const fromX509 = (pem, alg, options) => {\n    let spki;\n    try {\n        spki = getSPKI(pem);\n    }\n    catch (cause) {\n        throw new TypeError('failed to parse the X.509 certificate', { cause });\n    }\n    return fromSPKI(spki, alg, options);\n};\n","import crypto from './webcrypto.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport { decode as base64url } from './base64url.js';\nfunction subtleMapping(jwk) {\n    let algorithm;\n    let keyUsages;\n    switch (jwk.kty) {\n        case 'oct': {\n            switch (jwk.alg) {\n                case 'HS256':\n                case 'HS384':\n                case 'HS512':\n                    algorithm = { name: 'HMAC', hash: `SHA-${jwk.alg.slice(-3)}` };\n                    keyUsages = ['sign', 'verify'];\n                    break;\n                case 'A128CBC-HS256':\n                case 'A192CBC-HS384':\n                case 'A256CBC-HS512':\n                    throw new JOSENotSupported(`${jwk.alg} keys cannot be imported as CryptoKey instances`);\n                case 'A128GCM':\n                case 'A192GCM':\n                case 'A256GCM':\n                case 'A128GCMKW':\n                case 'A192GCMKW':\n                case 'A256GCMKW':\n                    algorithm = { name: 'AES-GCM' };\n                    keyUsages = ['encrypt', 'decrypt'];\n                    break;\n                case 'A128KW':\n                case 'A192KW':\n                case 'A256KW':\n                    algorithm = { name: 'AES-KW' };\n                    keyUsages = ['wrapKey', 'unwrapKey'];\n                    break;\n                case 'PBES2-HS256+A128KW':\n                case 'PBES2-HS384+A192KW':\n                case 'PBES2-HS512+A256KW':\n                    algorithm = { name: 'PBKDF2' };\n                    keyUsages = ['deriveBits'];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        case 'RSA': {\n            switch (jwk.alg) {\n                case 'PS256':\n                case 'PS384':\n                case 'PS512':\n                    algorithm = { name: 'RSA-PSS', hash: `SHA-${jwk.alg.slice(-3)}` };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'RS256':\n                case 'RS384':\n                case 'RS512':\n                    algorithm = { name: 'RSASSA-PKCS1-v1_5', hash: `SHA-${jwk.alg.slice(-3)}` };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'RSA-OAEP':\n                case 'RSA-OAEP-256':\n                case 'RSA-OAEP-384':\n                case 'RSA-OAEP-512':\n                    algorithm = {\n                        name: 'RSA-OAEP',\n                        hash: `SHA-${parseInt(jwk.alg.slice(-3), 10) || 1}`,\n                    };\n                    keyUsages = jwk.d ? ['decrypt', 'unwrapKey'] : ['encrypt', 'wrapKey'];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        case 'EC': {\n            switch (jwk.alg) {\n                case 'ES256':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-256' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ES384':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-384' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ES512':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-521' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ECDH-ES':\n                case 'ECDH-ES+A128KW':\n                case 'ECDH-ES+A192KW':\n                case 'ECDH-ES+A256KW':\n                    algorithm = { name: 'ECDH', namedCurve: jwk.crv };\n                    keyUsages = jwk.d ? ['deriveBits'] : [];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        case 'OKP': {\n            switch (jwk.alg) {\n                case 'EdDSA':\n                    algorithm = { name: jwk.crv };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ECDH-ES':\n                case 'ECDH-ES+A128KW':\n                case 'ECDH-ES+A192KW':\n                case 'ECDH-ES+A256KW':\n                    algorithm = { name: jwk.crv };\n                    keyUsages = jwk.d ? ['deriveBits'] : [];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        default:\n            throw new JOSENotSupported('Invalid or unsupported JWK \"kty\" (Key Type) Parameter value');\n    }\n    return { algorithm, keyUsages };\n}\nconst parse = async (jwk) => {\n    var _a, _b;\n    if (!jwk.alg) {\n        throw new TypeError('\"alg\" argument is required when \"jwk.alg\" is not present');\n    }\n    const { algorithm, keyUsages } = subtleMapping(jwk);\n    const rest = [\n        algorithm,\n        (_a = jwk.ext) !== null && _a !== void 0 ? _a : false,\n        (_b = jwk.key_ops) !== null && _b !== void 0 ? _b : keyUsages,\n    ];\n    if (algorithm.name === 'PBKDF2') {\n        return crypto.subtle.importKey('raw', base64url(jwk.k), ...rest);\n    }\n    const keyData = { ...jwk };\n    delete keyData.alg;\n    delete keyData.use;\n    return crypto.subtle.importKey('jwk', keyData, ...rest);\n};\nexport default parse;\n","import { decode as decodeBase64URL } from '../runtime/base64url.js';\nimport { fromSPKI, fromPKCS8, fromX509 } from '../runtime/asn1.js';\nimport asKeyObject from '../runtime/jwk_to_key.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport isObject from '../lib/is_object.js';\nexport async function importSPKI(spki, alg, options) {\n    if (typeof spki !== 'string' || spki.indexOf('-----BEGIN PUBLIC KEY-----') !== 0) {\n        throw new TypeError('\"spki\" must be SPKI formatted string');\n    }\n    return fromSPKI(spki, alg, options);\n}\nexport async function importX509(x509, alg, options) {\n    if (typeof x509 !== 'string' || x509.indexOf('-----BEGIN CERTIFICATE-----') !== 0) {\n        throw new TypeError('\"x509\" must be X.509 formatted string');\n    }\n    return fromX509(x509, alg, options);\n}\nexport async function importPKCS8(pkcs8, alg, options) {\n    if (typeof pkcs8 !== 'string' || pkcs8.indexOf('-----BEGIN PRIVATE KEY-----') !== 0) {\n        throw new TypeError('\"pkcs8\" must be PKCS#8 formatted string');\n    }\n    return fromPKCS8(pkcs8, alg, options);\n}\nexport async function importJWK(jwk, alg, octAsKeyObject) {\n    var _a;\n    if (!isObject(jwk)) {\n        throw new TypeError('JWK must be an object');\n    }\n    alg || (alg = jwk.alg);\n    switch (jwk.kty) {\n        case 'oct':\n            if (typeof jwk.k !== 'string' || !jwk.k) {\n                throw new TypeError('missing \"k\" (Key Value) Parameter value');\n            }\n            octAsKeyObject !== null && octAsKeyObject !== void 0 ? octAsKeyObject : (octAsKeyObject = jwk.ext !== true);\n            if (octAsKeyObject) {\n                return asKeyObject({ ...jwk, alg, ext: (_a = jwk.ext) !== null && _a !== void 0 ? _a : false });\n            }\n            return decodeBase64URL(jwk.k);\n        case 'RSA':\n            if (jwk.oth !== undefined) {\n                throw new JOSENotSupported('RSA JWK \"oth\" (Other Primes Info) Parameter value is not supported');\n            }\n        case 'EC':\n        case 'OKP':\n            return asKeyObject({ ...jwk, alg });\n        default:\n            throw new JOSENotSupported('Unsupported \"kty\" (Key Type) Parameter value');\n    }\n}\n","import { concat, uint64be } from '../lib/buffer_utils.js';\nimport checkIvLength from '../lib/check_iv_length.js';\nimport checkCekLength from './check_cek_length.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport { types } from './is_key_like.js';\nasync function cbcEncrypt(enc, plaintext, cek, iv, aad) {\n    if (!(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, 'Uint8Array'));\n    }\n    const keySize = parseInt(enc.slice(1, 4), 10);\n    const encKey = await crypto.subtle.importKey('raw', cek.subarray(keySize >> 3), 'AES-CBC', false, ['encrypt']);\n    const macKey = await crypto.subtle.importKey('raw', cek.subarray(0, keySize >> 3), {\n        hash: `SHA-${keySize << 1}`,\n        name: 'HMAC',\n    }, false, ['sign']);\n    const ciphertext = new Uint8Array(await crypto.subtle.encrypt({\n        iv,\n        name: 'AES-CBC',\n    }, encKey, plaintext));\n    const macData = concat(aad, iv, ciphertext, uint64be(aad.length << 3));\n    const tag = new Uint8Array((await crypto.subtle.sign('HMAC', macKey, macData)).slice(0, keySize >> 3));\n    return { ciphertext, tag };\n}\nasync function gcmEncrypt(enc, plaintext, cek, iv, aad) {\n    let encKey;\n    if (cek instanceof Uint8Array) {\n        encKey = await crypto.subtle.importKey('raw', cek, 'AES-GCM', false, ['encrypt']);\n    }\n    else {\n        checkEncCryptoKey(cek, enc, 'encrypt');\n        encKey = cek;\n    }\n    const encrypted = new Uint8Array(await crypto.subtle.encrypt({\n        additionalData: aad,\n        iv,\n        name: 'AES-GCM',\n        tagLength: 128,\n    }, encKey, plaintext));\n    const tag = encrypted.slice(-16);\n    const ciphertext = encrypted.slice(0, -16);\n    return { ciphertext, tag };\n}\nconst encrypt = async (enc, plaintext, cek, iv, aad) => {\n    if (!isCryptoKey(cek) && !(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, ...types, 'Uint8Array'));\n    }\n    checkIvLength(enc, iv);\n    switch (enc) {\n        case 'A128CBC-HS256':\n        case 'A192CBC-HS384':\n        case 'A256CBC-HS512':\n            if (cek instanceof Uint8Array)\n                checkCekLength(cek, parseInt(enc.slice(-3), 10));\n            return cbcEncrypt(enc, plaintext, cek, iv, aad);\n        case 'A128GCM':\n        case 'A192GCM':\n        case 'A256GCM':\n            if (cek instanceof Uint8Array)\n                checkCekLength(cek, parseInt(enc.slice(1, 4), 10));\n            return gcmEncrypt(enc, plaintext, cek, iv, aad);\n        default:\n            throw new JOSENotSupported('Unsupported JWE Content Encryption Algorithm');\n    }\n};\nexport default encrypt;\n","import encrypt from '../runtime/encrypt.js';\nimport decrypt from '../runtime/decrypt.js';\nimport generateIv from './iv.js';\nimport { encode as base64url } from '../runtime/base64url.js';\nexport async function wrap(alg, key, cek, iv) {\n    const jweAlgorithm = alg.slice(0, 7);\n    iv || (iv = generateIv(jweAlgorithm));\n    const { ciphertext: encryptedKey, tag } = await encrypt(jweAlgorithm, cek, key, iv, new Uint8Array(0));\n    return { encryptedKey, iv: base64url(iv), tag: base64url(tag) };\n}\nexport async function unwrap(alg, key, encryptedKey, iv, tag) {\n    const jweAlgorithm = alg.slice(0, 7);\n    return decrypt(jweAlgorithm, key, encryptedKey, iv, tag, new Uint8Array(0));\n}\n","import { unwrap as aesKw } from '../runtime/aeskw.js';\nimport * as ECDH from '../runtime/ecdhes.js';\nimport { decrypt as pbes2Kw } from '../runtime/pbes2kw.js';\nimport { decrypt as rsaEs } from '../runtime/rsaes.js';\nimport { decode as base64url } from '../runtime/base64url.js';\nimport { JOSENotSupported, JWEInvalid } from '../util/errors.js';\nimport { bitLength as cekLength } from '../lib/cek.js';\nimport { importJWK } from '../key/import.js';\nimport checkKeyType from './check_key_type.js';\nimport isObject from './is_object.js';\nimport { unwrap as aesGcmKw } from './aesgcmkw.js';\nasync function decryptKeyManagement(alg, key, encryptedKey, joseHeader, options) {\n    checkKeyType(alg, key, 'decrypt');\n    switch (alg) {\n        case 'dir': {\n            if (encryptedKey !== undefined)\n                throw new JWEInvalid('Encountered unexpected JWE Encrypted Key');\n            return key;\n        }\n        case 'ECDH-ES':\n            if (encryptedKey !== undefined)\n                throw new JWEInvalid('Encountered unexpected JWE Encrypted Key');\n        case 'ECDH-ES+A128KW':\n        case 'ECDH-ES+A192KW':\n        case 'ECDH-ES+A256KW': {\n            if (!isObject(joseHeader.epk))\n                throw new JWEInvalid(`JOSE Header \"epk\" (Ephemeral Public Key) missing or invalid`);\n            if (!ECDH.ecdhAllowed(key))\n                throw new JOSENotSupported('ECDH with the provided key is not allowed or not supported by your javascript runtime');\n            const epk = await importJWK(joseHeader.epk, alg);\n            let partyUInfo;\n            let partyVInfo;\n            if (joseHeader.apu !== undefined) {\n                if (typeof joseHeader.apu !== 'string')\n                    throw new JWEInvalid(`JOSE Header \"apu\" (Agreement PartyUInfo) invalid`);\n                partyUInfo = base64url(joseHeader.apu);\n            }\n            if (joseHeader.apv !== undefined) {\n                if (typeof joseHeader.apv !== 'string')\n                    throw new JWEInvalid(`JOSE Header \"apv\" (Agreement PartyVInfo) invalid`);\n                partyVInfo = base64url(joseHeader.apv);\n            }\n            const sharedSecret = await ECDH.deriveKey(epk, key, alg === 'ECDH-ES' ? joseHeader.enc : alg, alg === 'ECDH-ES' ? cekLength(joseHeader.enc) : parseInt(alg.slice(-5, -2), 10), partyUInfo, partyVInfo);\n            if (alg === 'ECDH-ES')\n                return sharedSecret;\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            return aesKw(alg.slice(-6), sharedSecret, encryptedKey);\n        }\n        case 'RSA1_5':\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            return rsaEs(alg, key, encryptedKey);\n        }\n        case 'PBES2-HS256+A128KW':\n        case 'PBES2-HS384+A192KW':\n        case 'PBES2-HS512+A256KW': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            if (typeof joseHeader.p2c !== 'number')\n                throw new JWEInvalid(`JOSE Header \"p2c\" (PBES2 Count) missing or invalid`);\n            const p2cLimit = (options === null || options === void 0 ? void 0 : options.maxPBES2Count) || 10000;\n            if (joseHeader.p2c > p2cLimit)\n                throw new JWEInvalid(`JOSE Header \"p2c\" (PBES2 Count) out is of acceptable bounds`);\n            if (typeof joseHeader.p2s !== 'string')\n                throw new JWEInvalid(`JOSE Header \"p2s\" (PBES2 Salt) missing or invalid`);\n            return pbes2Kw(alg, key, encryptedKey, joseHeader.p2c, base64url(joseHeader.p2s));\n        }\n        case 'A128KW':\n        case 'A192KW':\n        case 'A256KW': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            return aesKw(alg, key, encryptedKey);\n        }\n        case 'A128GCMKW':\n        case 'A192GCMKW':\n        case 'A256GCMKW': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            if (typeof joseHeader.iv !== 'string')\n                throw new JWEInvalid(`JOSE Header \"iv\" (Initialization Vector) missing or invalid`);\n            if (typeof joseHeader.tag !== 'string')\n                throw new JWEInvalid(`JOSE Header \"tag\" (Authentication Tag) missing or invalid`);\n            const iv = base64url(joseHeader.iv);\n            const tag = base64url(joseHeader.tag);\n            return aesGcmKw(alg, key, encryptedKey, iv, tag);\n        }\n        default: {\n            throw new JOSENotSupported('Invalid or unsupported \"alg\" (JWE Algorithm) header value');\n        }\n    }\n}\nexport default decryptKeyManagement;\n","import { JOSENotSupported } from '../util/errors.js';\nfunction validateCrit(Err, recognizedDefault, recognizedOption, protectedHeader, joseHeader) {\n    if (joseHeader.crit !== undefined && protectedHeader.crit === undefined) {\n        throw new Err('\"crit\" (Critical) Header Parameter MUST be integrity protected');\n    }\n    if (!protectedHeader || protectedHeader.crit === undefined) {\n        return new Set();\n    }\n    if (!Array.isArray(protectedHeader.crit) ||\n        protectedHeader.crit.length === 0 ||\n        protectedHeader.crit.some((input) => typeof input !== 'string' || input.length === 0)) {\n        throw new Err('\"crit\" (Critical) Header Parameter MUST be an array of non-empty strings when present');\n    }\n    let recognized;\n    if (recognizedOption !== undefined) {\n        recognized = new Map([...Object.entries(recognizedOption), ...recognizedDefault.entries()]);\n    }\n    else {\n        recognized = recognizedDefault;\n    }\n    for (const parameter of protectedHeader.crit) {\n        if (!recognized.has(parameter)) {\n            throw new JOSENotSupported(`Extension Header Parameter \"${parameter}\" is not recognized`);\n        }\n        if (joseHeader[parameter] === undefined) {\n            throw new Err(`Extension Header Parameter \"${parameter}\" is missing`);\n        }\n        else if (recognized.get(parameter) && protectedHeader[parameter] === undefined) {\n            throw new Err(`Extension Header Parameter \"${parameter}\" MUST be integrity protected`);\n        }\n    }\n    return new Set(protectedHeader.crit);\n}\nexport default validateCrit;\n","import { decode as base64url } from '../../runtime/base64url.js';\nimport decrypt from '../../runtime/decrypt.js';\nimport { inflate } from '../../runtime/zlib.js';\nimport { JOSEAlgNotAllowed, JOSENotSupported, JWEInvalid } from '../../util/errors.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport isObject from '../../lib/is_object.js';\nimport decryptKeyManagement from '../../lib/decrypt_key_management.js';\nimport { encoder, decoder, concat } from '../../lib/buffer_utils.js';\nimport generateCek from '../../lib/cek.js';\nimport validateCrit from '../../lib/validate_crit.js';\nimport validateAlgorithms from '../../lib/validate_algorithms.js';\nexport async function flattenedDecrypt(jwe, key, options) {\n    var _a;\n    if (!isObject(jwe)) {\n        throw new JWEInvalid('Flattened JWE must be an object');\n    }\n    if (jwe.protected === undefined && jwe.header === undefined && jwe.unprotected === undefined) {\n        throw new JWEInvalid('JOSE Header missing');\n    }\n    if (typeof jwe.iv !== 'string') {\n        throw new JWEInvalid('JWE Initialization Vector missing or incorrect type');\n    }\n    if (typeof jwe.ciphertext !== 'string') {\n        throw new JWEInvalid('JWE Ciphertext missing or incorrect type');\n    }\n    if (typeof jwe.tag !== 'string') {\n        throw new JWEInvalid('JWE Authentication Tag missing or incorrect type');\n    }\n    if (jwe.protected !== undefined && typeof jwe.protected !== 'string') {\n        throw new JWEInvalid('JWE Protected Header incorrect type');\n    }\n    if (jwe.encrypted_key !== undefined && typeof jwe.encrypted_key !== 'string') {\n        throw new JWEInvalid('JWE Encrypted Key incorrect type');\n    }\n    if (jwe.aad !== undefined && typeof jwe.aad !== 'string') {\n        throw new JWEInvalid('JWE AAD incorrect type');\n    }\n    if (jwe.header !== undefined && !isObject(jwe.header)) {\n        throw new JWEInvalid('JWE Shared Unprotected Header incorrect type');\n    }\n    if (jwe.unprotected !== undefined && !isObject(jwe.unprotected)) {\n        throw new JWEInvalid('JWE Per-Recipient Unprotected Header incorrect type');\n    }\n    let parsedProt;\n    if (jwe.protected) {\n        try {\n            const protectedHeader = base64url(jwe.protected);\n            parsedProt = JSON.parse(decoder.decode(protectedHeader));\n        }\n        catch (_b) {\n            throw new JWEInvalid('JWE Protected Header is invalid');\n        }\n    }\n    if (!isDisjoint(parsedProt, jwe.header, jwe.unprotected)) {\n        throw new JWEInvalid('JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint');\n    }\n    const joseHeader = {\n        ...parsedProt,\n        ...jwe.header,\n        ...jwe.unprotected,\n    };\n    validateCrit(JWEInvalid, new Map(), options === null || options === void 0 ? void 0 : options.crit, parsedProt, joseHeader);\n    if (joseHeader.zip !== undefined) {\n        if (!parsedProt || !parsedProt.zip) {\n            throw new JWEInvalid('JWE \"zip\" (Compression Algorithm) Header MUST be integrity protected');\n        }\n        if (joseHeader.zip !== 'DEF') {\n            throw new JOSENotSupported('Unsupported JWE \"zip\" (Compression Algorithm) Header Parameter value');\n        }\n    }\n    const { alg, enc } = joseHeader;\n    if (typeof alg !== 'string' || !alg) {\n        throw new JWEInvalid('missing JWE Algorithm (alg) in JWE Header');\n    }\n    if (typeof enc !== 'string' || !enc) {\n        throw new JWEInvalid('missing JWE Encryption Algorithm (enc) in JWE Header');\n    }\n    const keyManagementAlgorithms = options && validateAlgorithms('keyManagementAlgorithms', options.keyManagementAlgorithms);\n    const contentEncryptionAlgorithms = options &&\n        validateAlgorithms('contentEncryptionAlgorithms', options.contentEncryptionAlgorithms);\n    if (keyManagementAlgorithms && !keyManagementAlgorithms.has(alg)) {\n        throw new JOSEAlgNotAllowed('\"alg\" (Algorithm) Header Parameter not allowed');\n    }\n    if (contentEncryptionAlgorithms && !contentEncryptionAlgorithms.has(enc)) {\n        throw new JOSEAlgNotAllowed('\"enc\" (Encryption Algorithm) Header Parameter not allowed');\n    }\n    let encryptedKey;\n    if (jwe.encrypted_key !== undefined) {\n        encryptedKey = base64url(jwe.encrypted_key);\n    }\n    let resolvedKey = false;\n    if (typeof key === 'function') {\n        key = await key(parsedProt, jwe);\n        resolvedKey = true;\n    }\n    let cek;\n    try {\n        cek = await decryptKeyManagement(alg, key, encryptedKey, joseHeader, options);\n    }\n    catch (err) {\n        if (err instanceof TypeError || err instanceof JWEInvalid || err instanceof JOSENotSupported) {\n            throw err;\n        }\n        cek = generateCek(enc);\n    }\n    const iv = base64url(jwe.iv);\n    const tag = base64url(jwe.tag);\n    const protectedHeader = encoder.encode((_a = jwe.protected) !== null && _a !== void 0 ? _a : '');\n    let additionalData;\n    if (jwe.aad !== undefined) {\n        additionalData = concat(protectedHeader, encoder.encode('.'), encoder.encode(jwe.aad));\n    }\n    else {\n        additionalData = protectedHeader;\n    }\n    let plaintext = await decrypt(enc, cek, base64url(jwe.ciphertext), iv, tag, additionalData);\n    if (joseHeader.zip === 'DEF') {\n        plaintext = await ((options === null || options === void 0 ? void 0 : options.inflateRaw) || inflate)(plaintext);\n    }\n    const result = { plaintext };\n    if (jwe.protected !== undefined) {\n        result.protectedHeader = parsedProt;\n    }\n    if (jwe.aad !== undefined) {\n        result.additionalAuthenticatedData = base64url(jwe.aad);\n    }\n    if (jwe.unprotected !== undefined) {\n        result.sharedUnprotectedHeader = jwe.unprotected;\n    }\n    if (jwe.header !== undefined) {\n        result.unprotectedHeader = jwe.header;\n    }\n    if (resolvedKey) {\n        return { ...result, key };\n    }\n    return result;\n}\n","import { flattenedDecrypt } from '../flattened/decrypt.js';\nimport { JWEInvalid } from '../../util/errors.js';\nimport { decoder } from '../../lib/buffer_utils.js';\nexport async function compactDecrypt(jwe, key, options) {\n    if (jwe instanceof Uint8Array) {\n        jwe = decoder.decode(jwe);\n    }\n    if (typeof jwe !== 'string') {\n        throw new JWEInvalid('Compact JWE must be a string or Uint8Array');\n    }\n    const { 0: protectedHeader, 1: encryptedKey, 2: iv, 3: ciphertext, 4: tag, length, } = jwe.split('.');\n    if (length !== 5) {\n        throw new JWEInvalid('Invalid Compact JWE');\n    }\n    const decrypted = await flattenedDecrypt({\n        ciphertext,\n        iv: (iv || undefined),\n        protected: protectedHeader || undefined,\n        tag: (tag || undefined),\n        encrypted_key: encryptedKey || undefined,\n    }, key, options);\n    const result = { plaintext: decrypted.plaintext, protectedHeader: decrypted.protectedHeader };\n    if (typeof key === 'function') {\n        return { ...result, key: decrypted.key };\n    }\n    return result;\n}\n","import { flattenedDecrypt } from '../flattened/decrypt.js';\nimport { JWEDecryptionFailed, JWEInvalid } from '../../util/errors.js';\nimport isObject from '../../lib/is_object.js';\nexport async function generalDecrypt(jwe, key, options) {\n    if (!isObject(jwe)) {\n        throw new JWEInvalid('General JWE must be an object');\n    }\n    if (!Array.isArray(jwe.recipients) || !jwe.recipients.every(isObject)) {\n        throw new JWEInvalid('JWE Recipients missing or incorrect type');\n    }\n    if (!jwe.recipients.length) {\n        throw new JWEInvalid('JWE Recipients has no members');\n    }\n    for (const recipient of jwe.recipients) {\n        try {\n            return await flattenedDecrypt({\n                aad: jwe.aad,\n                ciphertext: jwe.ciphertext,\n                encrypted_key: recipient.encrypted_key,\n                header: recipient.header,\n                iv: jwe.iv,\n                protected: jwe.protected,\n                tag: jwe.tag,\n                unprotected: jwe.unprotected,\n            }, key, options);\n        }\n        catch (_a) {\n        }\n    }\n    throw new JWEDecryptionFailed();\n}\n","import crypto, { isCryptoKey } from './webcrypto.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { encode as base64url } from './base64url.js';\nimport { types } from './is_key_like.js';\nconst keyToJWK = async (key) => {\n    if (key instanceof Uint8Array) {\n        return {\n            kty: 'oct',\n            k: base64url(key),\n        };\n    }\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types, 'Uint8Array'));\n    }\n    if (!key.extractable) {\n        throw new TypeError('non-extractable CryptoKey cannot be exported as a JWK');\n    }\n    const { ext, key_ops, alg, use, ...jwk } = await crypto.subtle.exportKey('jwk', key);\n    return jwk;\n};\nexport default keyToJWK;\n","import { toSPKI as exportPublic } from '../runtime/asn1.js';\nimport { toPKCS8 as exportPrivate } from '../runtime/asn1.js';\nimport keyToJWK from '../runtime/key_to_jwk.js';\nexport async function exportSPKI(key) {\n    return exportPublic(key);\n}\nexport async function exportPKCS8(key) {\n    return exportPrivate(key);\n}\nexport async function exportJWK(key) {\n    return keyToJWK(key);\n}\n","import { wrap as aesKw } from '../runtime/aeskw.js';\nimport * as ECDH from '../runtime/ecdhes.js';\nimport { encrypt as pbes2Kw } from '../runtime/pbes2kw.js';\nimport { encrypt as rsaEs } from '../runtime/rsaes.js';\nimport { encode as base64url } from '../runtime/base64url.js';\nimport generateCek, { bitLength as cekLength } from '../lib/cek.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport { exportJWK } from '../key/export.js';\nimport checkKeyType from './check_key_type.js';\nimport { wrap as aesGcmKw } from './aesgcmkw.js';\nasync function encryptKeyManagement(alg, enc, key, providedCek, providedParameters = {}) {\n    let encryptedKey;\n    let parameters;\n    let cek;\n    checkKeyType(alg, key, 'encrypt');\n    switch (alg) {\n        case 'dir': {\n            cek = key;\n            break;\n        }\n        case 'ECDH-ES':\n        case 'ECDH-ES+A128KW':\n        case 'ECDH-ES+A192KW':\n        case 'ECDH-ES+A256KW': {\n            if (!ECDH.ecdhAllowed(key)) {\n                throw new JOSENotSupported('ECDH with the provided key is not allowed or not supported by your javascript runtime');\n            }\n            const { apu, apv } = providedParameters;\n            let { epk: ephemeralKey } = providedParameters;\n            ephemeralKey || (ephemeralKey = (await ECDH.generateEpk(key)).privateKey);\n            const { x, y, crv, kty } = await exportJWK(ephemeralKey);\n            const sharedSecret = await ECDH.deriveKey(key, ephemeralKey, alg === 'ECDH-ES' ? enc : alg, alg === 'ECDH-ES' ? cekLength(enc) : parseInt(alg.slice(-5, -2), 10), apu, apv);\n            parameters = { epk: { x, crv, kty } };\n            if (kty === 'EC')\n                parameters.epk.y = y;\n            if (apu)\n                parameters.apu = base64url(apu);\n            if (apv)\n                parameters.apv = base64url(apv);\n            if (alg === 'ECDH-ES') {\n                cek = sharedSecret;\n                break;\n            }\n            cek = providedCek || generateCek(enc);\n            const kwAlg = alg.slice(-6);\n            encryptedKey = await aesKw(kwAlg, sharedSecret, cek);\n            break;\n        }\n        case 'RSA1_5':\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512': {\n            cek = providedCek || generateCek(enc);\n            encryptedKey = await rsaEs(alg, key, cek);\n            break;\n        }\n        case 'PBES2-HS256+A128KW':\n        case 'PBES2-HS384+A192KW':\n        case 'PBES2-HS512+A256KW': {\n            cek = providedCek || generateCek(enc);\n            const { p2c, p2s } = providedParameters;\n            ({ encryptedKey, ...parameters } = await pbes2Kw(alg, key, cek, p2c, p2s));\n            break;\n        }\n        case 'A128KW':\n        case 'A192KW':\n        case 'A256KW': {\n            cek = providedCek || generateCek(enc);\n            encryptedKey = await aesKw(alg, key, cek);\n            break;\n        }\n        case 'A128GCMKW':\n        case 'A192GCMKW':\n        case 'A256GCMKW': {\n            cek = providedCek || generateCek(enc);\n            const { iv } = providedParameters;\n            ({ encryptedKey, ...parameters } = await aesGcmKw(alg, key, cek, iv));\n            break;\n        }\n        default: {\n            throw new JOSENotSupported('Invalid or unsupported \"alg\" (JWE Algorithm) header value');\n        }\n    }\n    return { cek, encryptedKey, parameters };\n}\nexport default encryptKeyManagement;\n","import { encode as base64url } from '../../runtime/base64url.js';\nimport encrypt from '../../runtime/encrypt.js';\nimport { deflate } from '../../runtime/zlib.js';\nimport generateIv from '../../lib/iv.js';\nimport encryptKeyManagement from '../../lib/encrypt_key_management.js';\nimport { JOSENotSupported, JWEInvalid } from '../../util/errors.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport { encoder, decoder, concat } from '../../lib/buffer_utils.js';\nimport validateCrit from '../../lib/validate_crit.js';\nexport const unprotected = Symbol();\nexport class FlattenedEncrypt {\n    constructor(plaintext) {\n        if (!(plaintext instanceof Uint8Array)) {\n            throw new TypeError('plaintext must be an instance of Uint8Array');\n        }\n        this._plaintext = plaintext;\n    }\n    setKeyManagementParameters(parameters) {\n        if (this._keyManagementParameters) {\n            throw new TypeError('setKeyManagementParameters can only be called once');\n        }\n        this._keyManagementParameters = parameters;\n        return this;\n    }\n    setProtectedHeader(protectedHeader) {\n        if (this._protectedHeader) {\n            throw new TypeError('setProtectedHeader can only be called once');\n        }\n        this._protectedHeader = protectedHeader;\n        return this;\n    }\n    setSharedUnprotectedHeader(sharedUnprotectedHeader) {\n        if (this._sharedUnprotectedHeader) {\n            throw new TypeError('setSharedUnprotectedHeader can only be called once');\n        }\n        this._sharedUnprotectedHeader = sharedUnprotectedHeader;\n        return this;\n    }\n    setUnprotectedHeader(unprotectedHeader) {\n        if (this._unprotectedHeader) {\n            throw new TypeError('setUnprotectedHeader can only be called once');\n        }\n        this._unprotectedHeader = unprotectedHeader;\n        return this;\n    }\n    setAdditionalAuthenticatedData(aad) {\n        this._aad = aad;\n        return this;\n    }\n    setContentEncryptionKey(cek) {\n        if (this._cek) {\n            throw new TypeError('setContentEncryptionKey can only be called once');\n        }\n        this._cek = cek;\n        return this;\n    }\n    setInitializationVector(iv) {\n        if (this._iv) {\n            throw new TypeError('setInitializationVector can only be called once');\n        }\n        this._iv = iv;\n        return this;\n    }\n    async encrypt(key, options) {\n        if (!this._protectedHeader && !this._unprotectedHeader && !this._sharedUnprotectedHeader) {\n            throw new JWEInvalid('either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()');\n        }\n        if (!isDisjoint(this._protectedHeader, this._unprotectedHeader, this._sharedUnprotectedHeader)) {\n            throw new JWEInvalid('JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint');\n        }\n        const joseHeader = {\n            ...this._protectedHeader,\n            ...this._unprotectedHeader,\n            ...this._sharedUnprotectedHeader,\n        };\n        validateCrit(JWEInvalid, new Map(), options === null || options === void 0 ? void 0 : options.crit, this._protectedHeader, joseHeader);\n        if (joseHeader.zip !== undefined) {\n            if (!this._protectedHeader || !this._protectedHeader.zip) {\n                throw new JWEInvalid('JWE \"zip\" (Compression Algorithm) Header MUST be integrity protected');\n            }\n            if (joseHeader.zip !== 'DEF') {\n                throw new JOSENotSupported('Unsupported JWE \"zip\" (Compression Algorithm) Header Parameter value');\n            }\n        }\n        const { alg, enc } = joseHeader;\n        if (typeof alg !== 'string' || !alg) {\n            throw new JWEInvalid('JWE \"alg\" (Algorithm) Header Parameter missing or invalid');\n        }\n        if (typeof enc !== 'string' || !enc) {\n            throw new JWEInvalid('JWE \"enc\" (Encryption Algorithm) Header Parameter missing or invalid');\n        }\n        let encryptedKey;\n        if (alg === 'dir') {\n            if (this._cek) {\n                throw new TypeError('setContentEncryptionKey cannot be called when using Direct Encryption');\n            }\n        }\n        else if (alg === 'ECDH-ES') {\n            if (this._cek) {\n                throw new TypeError('setContentEncryptionKey cannot be called when using Direct Key Agreement');\n            }\n        }\n        let cek;\n        {\n            let parameters;\n            ({ cek, encryptedKey, parameters } = await encryptKeyManagement(alg, enc, key, this._cek, this._keyManagementParameters));\n            if (parameters) {\n                if (options && unprotected in options) {\n                    if (!this._unprotectedHeader) {\n                        this.setUnprotectedHeader(parameters);\n                    }\n                    else {\n                        this._unprotectedHeader = { ...this._unprotectedHeader, ...parameters };\n                    }\n                }\n                else {\n                    if (!this._protectedHeader) {\n                        this.setProtectedHeader(parameters);\n                    }\n                    else {\n                        this._protectedHeader = { ...this._protectedHeader, ...parameters };\n                    }\n                }\n            }\n        }\n        this._iv || (this._iv = generateIv(enc));\n        let additionalData;\n        let protectedHeader;\n        let aadMember;\n        if (this._protectedHeader) {\n            protectedHeader = encoder.encode(base64url(JSON.stringify(this._protectedHeader)));\n        }\n        else {\n            protectedHeader = encoder.encode('');\n        }\n        if (this._aad) {\n            aadMember = base64url(this._aad);\n            additionalData = concat(protectedHeader, encoder.encode('.'), encoder.encode(aadMember));\n        }\n        else {\n            additionalData = protectedHeader;\n        }\n        let ciphertext;\n        let tag;\n        if (joseHeader.zip === 'DEF') {\n            const deflated = await ((options === null || options === void 0 ? void 0 : options.deflateRaw) || deflate)(this._plaintext);\n            ({ ciphertext, tag } = await encrypt(enc, deflated, cek, this._iv, additionalData));\n        }\n        else {\n            ;\n            ({ ciphertext, tag } = await encrypt(enc, this._plaintext, cek, this._iv, additionalData));\n        }\n        const jwe = {\n            ciphertext: base64url(ciphertext),\n            iv: base64url(this._iv),\n            tag: base64url(tag),\n        };\n        if (encryptedKey) {\n            jwe.encrypted_key = base64url(encryptedKey);\n        }\n        if (aadMember) {\n            jwe.aad = aadMember;\n        }\n        if (this._protectedHeader) {\n            jwe.protected = decoder.decode(protectedHeader);\n        }\n        if (this._sharedUnprotectedHeader) {\n            jwe.unprotected = this._sharedUnprotectedHeader;\n        }\n        if (this._unprotectedHeader) {\n            jwe.header = this._unprotectedHeader;\n        }\n        return jwe;\n    }\n}\n","import { FlattenedEncrypt, unprotected } from '../flattened/encrypt.js';\nimport { JWEInvalid } from '../../util/errors.js';\nimport generateCek from '../../lib/cek.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport encryptKeyManagement from '../../lib/encrypt_key_management.js';\nimport { encode as base64url } from '../../runtime/base64url.js';\nimport validateCrit from '../../lib/validate_crit.js';\nclass IndividualRecipient {\n    constructor(enc, key, options) {\n        this.parent = enc;\n        this.key = key;\n        this.options = options;\n    }\n    setUnprotectedHeader(unprotectedHeader) {\n        if (this.unprotectedHeader) {\n            throw new TypeError('setUnprotectedHeader can only be called once');\n        }\n        this.unprotectedHeader = unprotectedHeader;\n        return this;\n    }\n    addRecipient(...args) {\n        return this.parent.addRecipient(...args);\n    }\n    encrypt(...args) {\n        return this.parent.encrypt(...args);\n    }\n    done() {\n        return this.parent;\n    }\n}\nexport class GeneralEncrypt {\n    constructor(plaintext) {\n        this._recipients = [];\n        this._plaintext = plaintext;\n    }\n    addRecipient(key, options) {\n        const recipient = new IndividualRecipient(this, key, { crit: options === null || options === void 0 ? void 0 : options.crit });\n        this._recipients.push(recipient);\n        return recipient;\n    }\n    setProtectedHeader(protectedHeader) {\n        if (this._protectedHeader) {\n            throw new TypeError('setProtectedHeader can only be called once');\n        }\n        this._protectedHeader = protectedHeader;\n        return this;\n    }\n    setSharedUnprotectedHeader(sharedUnprotectedHeader) {\n        if (this._unprotectedHeader) {\n            throw new TypeError('setSharedUnprotectedHeader can only be called once');\n        }\n        this._unprotectedHeader = sharedUnprotectedHeader;\n        return this;\n    }\n    setAdditionalAuthenticatedData(aad) {\n        this._aad = aad;\n        return this;\n    }\n    async encrypt(options) {\n        var _a, _b, _c;\n        if (!this._recipients.length) {\n            throw new JWEInvalid('at least one recipient must be added');\n        }\n        options = { deflateRaw: options === null || options === void 0 ? void 0 : options.deflateRaw };\n        if (this._recipients.length === 1) {\n            const [recipient] = this._recipients;\n            const flattened = await new FlattenedEncrypt(this._plaintext)\n                .setAdditionalAuthenticatedData(this._aad)\n                .setProtectedHeader(this._protectedHeader)\n                .setSharedUnprotectedHeader(this._unprotectedHeader)\n                .setUnprotectedHeader(recipient.unprotectedHeader)\n                .encrypt(recipient.key, { ...recipient.options, ...options });\n            let jwe = {\n                ciphertext: flattened.ciphertext,\n                iv: flattened.iv,\n                recipients: [{}],\n                tag: flattened.tag,\n            };\n            if (flattened.aad)\n                jwe.aad = flattened.aad;\n            if (flattened.protected)\n                jwe.protected = flattened.protected;\n            if (flattened.unprotected)\n                jwe.unprotected = flattened.unprotected;\n            if (flattened.encrypted_key)\n                jwe.recipients[0].encrypted_key = flattened.encrypted_key;\n            if (flattened.header)\n                jwe.recipients[0].header = flattened.header;\n            return jwe;\n        }\n        let enc;\n        for (let i = 0; i < this._recipients.length; i++) {\n            const recipient = this._recipients[i];\n            if (!isDisjoint(this._protectedHeader, this._unprotectedHeader, recipient.unprotectedHeader)) {\n                throw new JWEInvalid('JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint');\n            }\n            const joseHeader = {\n                ...this._protectedHeader,\n                ...this._unprotectedHeader,\n                ...recipient.unprotectedHeader,\n            };\n            const { alg } = joseHeader;\n            if (typeof alg !== 'string' || !alg) {\n                throw new JWEInvalid('JWE \"alg\" (Algorithm) Header Parameter missing or invalid');\n            }\n            if (alg === 'dir' || alg === 'ECDH-ES') {\n                throw new JWEInvalid('\"dir\" and \"ECDH-ES\" alg may only be used with a single recipient');\n            }\n            if (typeof joseHeader.enc !== 'string' || !joseHeader.enc) {\n                throw new JWEInvalid('JWE \"enc\" (Encryption Algorithm) Header Parameter missing or invalid');\n            }\n            if (!enc) {\n                enc = joseHeader.enc;\n            }\n            else if (enc !== joseHeader.enc) {\n                throw new JWEInvalid('JWE \"enc\" (Encryption Algorithm) Header Parameter must be the same for all recipients');\n            }\n            validateCrit(JWEInvalid, new Map(), recipient.options.crit, this._protectedHeader, joseHeader);\n            if (joseHeader.zip !== undefined) {\n                if (!this._protectedHeader || !this._protectedHeader.zip) {\n                    throw new JWEInvalid('JWE \"zip\" (Compression Algorithm) Header MUST be integrity protected');\n                }\n            }\n        }\n        const cek = generateCek(enc);\n        let jwe = {\n            ciphertext: '',\n            iv: '',\n            recipients: [],\n            tag: '',\n        };\n        for (let i = 0; i < this._recipients.length; i++) {\n            const recipient = this._recipients[i];\n            const target = {};\n            jwe.recipients.push(target);\n            const joseHeader = {\n                ...this._protectedHeader,\n                ...this._unprotectedHeader,\n                ...recipient.unprotectedHeader,\n            };\n            const p2c = joseHeader.alg.startsWith('PBES2') ? 2048 + i : undefined;\n            if (i === 0) {\n                const flattened = await new FlattenedEncrypt(this._plaintext)\n                    .setAdditionalAuthenticatedData(this._aad)\n                    .setContentEncryptionKey(cek)\n                    .setProtectedHeader(this._protectedHeader)\n                    .setSharedUnprotectedHeader(this._unprotectedHeader)\n                    .setUnprotectedHeader(recipient.unprotectedHeader)\n                    .setKeyManagementParameters({ p2c })\n                    .encrypt(recipient.key, {\n                    ...recipient.options,\n                    ...options,\n                    [unprotected]: true,\n                });\n                jwe.ciphertext = flattened.ciphertext;\n                jwe.iv = flattened.iv;\n                jwe.tag = flattened.tag;\n                if (flattened.aad)\n                    jwe.aad = flattened.aad;\n                if (flattened.protected)\n                    jwe.protected = flattened.protected;\n                if (flattened.unprotected)\n                    jwe.unprotected = flattened.unprotected;\n                target.encrypted_key = flattened.encrypted_key;\n                if (flattened.header)\n                    target.header = flattened.header;\n                continue;\n            }\n            const { encryptedKey, parameters } = await encryptKeyManagement(((_a = recipient.unprotectedHeader) === null || _a === void 0 ? void 0 : _a.alg) ||\n                ((_b = this._protectedHeader) === null || _b === void 0 ? void 0 : _b.alg) ||\n                ((_c = this._unprotectedHeader) === null || _c === void 0 ? void 0 : _c.alg), enc, recipient.key, cek, { p2c });\n            target.encrypted_key = base64url(encryptedKey);\n            if (recipient.unprotectedHeader || parameters)\n                target.header = { ...recipient.unprotectedHeader, ...parameters };\n        }\n        return jwe;\n    }\n}\n","import { JOSENotSupported } from '../util/errors.js';\nexport default function subtleDsa(alg, algorithm) {\n    const hash = `SHA-${alg.slice(-3)}`;\n    switch (alg) {\n        case 'HS256':\n        case 'HS384':\n        case 'HS512':\n            return { hash, name: 'HMAC' };\n        case 'PS256':\n        case 'PS384':\n        case 'PS512':\n            return { hash, name: 'RSA-PSS', saltLength: alg.slice(-3) >> 3 };\n        case 'RS256':\n        case 'RS384':\n        case 'RS512':\n            return { hash, name: 'RSASSA-PKCS1-v1_5' };\n        case 'ES256':\n        case 'ES384':\n        case 'ES512':\n            return { hash, name: 'ECDSA', namedCurve: algorithm.namedCurve };\n        case 'EdDSA':\n            return { name: algorithm.name };\n        default:\n            throw new JOSENotSupported(`alg ${alg} is not supported either by JOSE or your javascript runtime`);\n    }\n}\n","import subtleAlgorithm from './subtle_dsa.js';\nimport crypto from './webcrypto.js';\nimport checkKeyLength from './check_key_length.js';\nimport getVerifyKey from './get_sign_verify_key.js';\nconst verify = async (alg, key, signature, data) => {\n    const cryptoKey = await getVerifyKey(alg, key, 'verify');\n    checkKeyLength(alg, cryptoKey);\n    const algorithm = subtleAlgorithm(alg, cryptoKey.algorithm);\n    try {\n        return await crypto.subtle.verify(algorithm, cryptoKey, signature, data);\n    }\n    catch (_a) {\n        return false;\n    }\n};\nexport default verify;\n","import { decode as base64url } from '../../runtime/base64url.js';\nimport verify from '../../runtime/verify.js';\nimport { JOSEAlgNotAllowed, JWSInvalid, JWSSignatureVerificationFailed } from '../../util/errors.js';\nimport { concat, encoder, decoder } from '../../lib/buffer_utils.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport isObject from '../../lib/is_object.js';\nimport checkKeyType from '../../lib/check_key_type.js';\nimport validateCrit from '../../lib/validate_crit.js';\nimport validateAlgorithms from '../../lib/validate_algorithms.js';\nexport async function flattenedVerify(jws, key, options) {\n    var _a;\n    if (!isObject(jws)) {\n        throw new JWSInvalid('Flattened JWS must be an object');\n    }\n    if (jws.protected === undefined && jws.header === undefined) {\n        throw new JWSInvalid('Flattened JWS must have either of the \"protected\" or \"header\" members');\n    }\n    if (jws.protected !== undefined && typeof jws.protected !== 'string') {\n        throw new JWSInvalid('JWS Protected Header incorrect type');\n    }\n    if (jws.payload === undefined) {\n        throw new JWSInvalid('JWS Payload missing');\n    }\n    if (typeof jws.signature !== 'string') {\n        throw new JWSInvalid('JWS Signature missing or incorrect type');\n    }\n    if (jws.header !== undefined && !isObject(jws.header)) {\n        throw new JWSInvalid('JWS Unprotected Header incorrect type');\n    }\n    let parsedProt = {};\n    if (jws.protected) {\n        try {\n            const protectedHeader = base64url(jws.protected);\n            parsedProt = JSON.parse(decoder.decode(protectedHeader));\n        }\n        catch (_b) {\n            throw new JWSInvalid('JWS Protected Header is invalid');\n        }\n    }\n    if (!isDisjoint(parsedProt, jws.header)) {\n        throw new JWSInvalid('JWS Protected and JWS Unprotected Header Parameter names must be disjoint');\n    }\n    const joseHeader = {\n        ...parsedProt,\n        ...jws.header,\n    };\n    const extensions = validateCrit(JWSInvalid, new Map([['b64', true]]), options === null || options === void 0 ? void 0 : options.crit, parsedProt, joseHeader);\n    let b64 = true;\n    if (extensions.has('b64')) {\n        b64 = parsedProt.b64;\n        if (typeof b64 !== 'boolean') {\n            throw new JWSInvalid('The \"b64\" (base64url-encode payload) Header Parameter must be a boolean');\n        }\n    }\n    const { alg } = joseHeader;\n    if (typeof alg !== 'string' || !alg) {\n        throw new JWSInvalid('JWS \"alg\" (Algorithm) Header Parameter missing or invalid');\n    }\n    const algorithms = options && validateAlgorithms('algorithms', options.algorithms);\n    if (algorithms && !algorithms.has(alg)) {\n        throw new JOSEAlgNotAllowed('\"alg\" (Algorithm) Header Parameter not allowed');\n    }\n    if (b64) {\n        if (typeof jws.payload !== 'string') {\n            throw new JWSInvalid('JWS Payload must be a string');\n        }\n    }\n    else if (typeof jws.payload !== 'string' && !(jws.payload instanceof Uint8Array)) {\n        throw new JWSInvalid('JWS Payload must be a string or an Uint8Array instance');\n    }\n    let resolvedKey = false;\n    if (typeof key === 'function') {\n        key = await key(parsedProt, jws);\n        resolvedKey = true;\n    }\n    checkKeyType(alg, key, 'verify');\n    const data = concat(encoder.encode((_a = jws.protected) !== null && _a !== void 0 ? _a : ''), encoder.encode('.'), typeof jws.payload === 'string' ? encoder.encode(jws.payload) : jws.payload);\n    const signature = base64url(jws.signature);\n    const verified = await verify(alg, key, signature, data);\n    if (!verified) {\n        throw new JWSSignatureVerificationFailed();\n    }\n    let payload;\n    if (b64) {\n        payload = base64url(jws.payload);\n    }\n    else if (typeof jws.payload === 'string') {\n        payload = encoder.encode(jws.payload);\n    }\n    else {\n        payload = jws.payload;\n    }\n    const result = { payload };\n    if (jws.protected !== undefined) {\n        result.protectedHeader = parsedProt;\n    }\n    if (jws.header !== undefined) {\n        result.unprotectedHeader = jws.header;\n    }\n    if (resolvedKey) {\n        return { ...result, key };\n    }\n    return result;\n}\n","import { flattenedVerify } from '../flattened/verify.js';\nimport { JWSInvalid } from '../../util/errors.js';\nimport { decoder } from '../../lib/buffer_utils.js';\nexport async function compactVerify(jws, key, options) {\n    if (jws instanceof Uint8Array) {\n        jws = decoder.decode(jws);\n    }\n    if (typeof jws !== 'string') {\n        throw new JWSInvalid('Compact JWS must be a string or Uint8Array');\n    }\n    const { 0: protectedHeader, 1: payload, 2: signature, length } = jws.split('.');\n    if (length !== 3) {\n        throw new JWSInvalid('Invalid Compact JWS');\n    }\n    const verified = await flattenedVerify({ payload, protected: protectedHeader, signature }, key, options);\n    const result = { payload: verified.payload, protectedHeader: verified.protectedHeader };\n    if (typeof key === 'function') {\n        return { ...result, key: verified.key };\n    }\n    return result;\n}\n","import { flattenedVerify } from '../flattened/verify.js';\nimport { JWSInvalid, JWSSignatureVerificationFailed } from '../../util/errors.js';\nimport isObject from '../../lib/is_object.js';\nexport async function generalVerify(jws, key, options) {\n    if (!isObject(jws)) {\n        throw new JWSInvalid('General JWS must be an object');\n    }\n    if (!Array.isArray(jws.signatures) || !jws.signatures.every(isObject)) {\n        throw new JWSInvalid('JWS Signatures missing or incorrect type');\n    }\n    for (const signature of jws.signatures) {\n        try {\n            return await flattenedVerify({\n                header: signature.header,\n                payload: jws.payload,\n                protected: signature.protected,\n                signature: signature.signature,\n            }, key, options);\n        }\n        catch (_a) {\n        }\n    }\n    throw new JWSSignatureVerificationFailed();\n}\n","const minute = 60;\nconst hour = minute * 60;\nconst day = hour * 24;\nconst week = day * 7;\nconst year = day * 365.25;\nconst REGEX = /^(\\d+|\\d+\\.\\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;\nexport default (str) => {\n    const matched = REGEX.exec(str);\n    if (!matched) {\n        throw new TypeError('Invalid time period format');\n    }\n    const value = parseFloat(matched[1]);\n    const unit = matched[2].toLowerCase();\n    switch (unit) {\n        case 'sec':\n        case 'secs':\n        case 'second':\n        case 'seconds':\n        case 's':\n            return Math.round(value);\n        case 'minute':\n        case 'minutes':\n        case 'min':\n        case 'mins':\n        case 'm':\n            return Math.round(value * minute);\n        case 'hour':\n        case 'hours':\n        case 'hr':\n        case 'hrs':\n        case 'h':\n            return Math.round(value * hour);\n        case 'day':\n        case 'days':\n        case 'd':\n            return Math.round(value * day);\n        case 'week':\n        case 'weeks':\n        case 'w':\n            return Math.round(value * week);\n        default:\n            return Math.round(value * year);\n    }\n};\n","import { JWTClaimValidationFailed, JWTExpired, JWTInvalid } from '../util/errors.js';\nimport { decoder } from './buffer_utils.js';\nimport epoch from './epoch.js';\nimport secs from './secs.js';\nimport isObject from './is_object.js';\nconst normalizeTyp = (value) => value.toLowerCase().replace(/^application\\//, '');\nconst checkAudiencePresence = (audPayload, audOption) => {\n    if (typeof audPayload === 'string') {\n        return audOption.includes(audPayload);\n    }\n    if (Array.isArray(audPayload)) {\n        return audOption.some(Set.prototype.has.bind(new Set(audPayload)));\n    }\n    return false;\n};\nexport default (protectedHeader, encodedPayload, options = {}) => {\n    const { typ } = options;\n    if (typ &&\n        (typeof protectedHeader.typ !== 'string' ||\n            normalizeTyp(protectedHeader.typ) !== normalizeTyp(typ))) {\n        throw new JWTClaimValidationFailed('unexpected \"typ\" JWT header value', 'typ', 'check_failed');\n    }\n    let payload;\n    try {\n        payload = JSON.parse(decoder.decode(encodedPayload));\n    }\n    catch (_a) {\n    }\n    if (!isObject(payload)) {\n        throw new JWTInvalid('JWT Claims Set must be a top-level JSON object');\n    }\n    const { requiredClaims = [], issuer, subject, audience, maxTokenAge } = options;\n    if (maxTokenAge !== undefined)\n        requiredClaims.push('iat');\n    if (audience !== undefined)\n        requiredClaims.push('aud');\n    if (subject !== undefined)\n        requiredClaims.push('sub');\n    if (issuer !== undefined)\n        requiredClaims.push('iss');\n    for (const claim of new Set(requiredClaims.reverse())) {\n        if (!(claim in payload)) {\n            throw new JWTClaimValidationFailed(`missing required \"${claim}\" claim`, claim, 'missing');\n        }\n    }\n    if (issuer && !(Array.isArray(issuer) ? issuer : [issuer]).includes(payload.iss)) {\n        throw new JWTClaimValidationFailed('unexpected \"iss\" claim value', 'iss', 'check_failed');\n    }\n    if (subject && payload.sub !== subject) {\n        throw new JWTClaimValidationFailed('unexpected \"sub\" claim value', 'sub', 'check_failed');\n    }\n    if (audience &&\n        !checkAudiencePresence(payload.aud, typeof audience === 'string' ? [audience] : audience)) {\n        throw new JWTClaimValidationFailed('unexpected \"aud\" claim value', 'aud', 'check_failed');\n    }\n    let tolerance;\n    switch (typeof options.clockTolerance) {\n        case 'string':\n            tolerance = secs(options.clockTolerance);\n            break;\n        case 'number':\n            tolerance = options.clockTolerance;\n            break;\n        case 'undefined':\n            tolerance = 0;\n            break;\n        default:\n            throw new TypeError('Invalid clockTolerance option type');\n    }\n    const { currentDate } = options;\n    const now = epoch(currentDate || new Date());\n    if ((payload.iat !== undefined || maxTokenAge) && typeof payload.iat !== 'number') {\n        throw new JWTClaimValidationFailed('\"iat\" claim must be a number', 'iat', 'invalid');\n    }\n    if (payload.nbf !== undefined) {\n        if (typeof payload.nbf !== 'number') {\n            throw new JWTClaimValidationFailed('\"nbf\" claim must be a number', 'nbf', 'invalid');\n        }\n        if (payload.nbf > now + tolerance) {\n            throw new JWTClaimValidationFailed('\"nbf\" claim timestamp check failed', 'nbf', 'check_failed');\n        }\n    }\n    if (payload.exp !== undefined) {\n        if (typeof payload.exp !== 'number') {\n            throw new JWTClaimValidationFailed('\"exp\" claim must be a number', 'exp', 'invalid');\n        }\n        if (payload.exp <= now - tolerance) {\n            throw new JWTExpired('\"exp\" claim timestamp check failed', 'exp', 'check_failed');\n        }\n    }\n    if (maxTokenAge) {\n        const age = now - payload.iat;\n        const max = typeof maxTokenAge === 'number' ? maxTokenAge : secs(maxTokenAge);\n        if (age - tolerance > max) {\n            throw new JWTExpired('\"iat\" claim timestamp check failed (too far in the past)', 'iat', 'check_failed');\n        }\n        if (age < 0 - tolerance) {\n            throw new JWTClaimValidationFailed('\"iat\" claim timestamp check failed (it should be in the past)', 'iat', 'check_failed');\n        }\n    }\n    return payload;\n};\n","import { compactVerify } from '../jws/compact/verify.js';\nimport jwtPayload from '../lib/jwt_claims_set.js';\nimport { JWTInvalid } from '../util/errors.js';\nexport async function jwtVerify(jwt, key, options) {\n    var _a;\n    const verified = await compactVerify(jwt, key, options);\n    if (((_a = verified.protectedHeader.crit) === null || _a === void 0 ? void 0 : _a.includes('b64')) && verified.protectedHeader.b64 === false) {\n        throw new JWTInvalid('JWTs MUST NOT use unencoded payload');\n    }\n    const payload = jwtPayload(verified.protectedHeader, verified.payload, options);\n    const result = { payload, protectedHeader: verified.protectedHeader };\n    if (typeof key === 'function') {\n        return { ...result, key: verified.key };\n    }\n    return result;\n}\n","import { compactDecrypt } from '../jwe/compact/decrypt.js';\nimport jwtPayload from '../lib/jwt_claims_set.js';\nimport { JWTClaimValidationFailed } from '../util/errors.js';\nexport async function jwtDecrypt(jwt, key, options) {\n    const decrypted = await compactDecrypt(jwt, key, options);\n    const payload = jwtPayload(decrypted.protectedHeader, decrypted.plaintext, options);\n    const { protectedHeader } = decrypted;\n    if (protectedHeader.iss !== undefined && protectedHeader.iss !== payload.iss) {\n        throw new JWTClaimValidationFailed('replicated \"iss\" claim header parameter mismatch', 'iss', 'mismatch');\n    }\n    if (protectedHeader.sub !== undefined && protectedHeader.sub !== payload.sub) {\n        throw new JWTClaimValidationFailed('replicated \"sub\" claim header parameter mismatch', 'sub', 'mismatch');\n    }\n    if (protectedHeader.aud !== undefined &&\n        JSON.stringify(protectedHeader.aud) !== JSON.stringify(payload.aud)) {\n        throw new JWTClaimValidationFailed('replicated \"aud\" claim header parameter mismatch', 'aud', 'mismatch');\n    }\n    const result = { payload, protectedHeader };\n    if (typeof key === 'function') {\n        return { ...result, key: decrypted.key };\n    }\n    return result;\n}\n","import { FlattenedEncrypt } from '../flattened/encrypt.js';\nexport class CompactEncrypt {\n    constructor(plaintext) {\n        this._flattened = new FlattenedEncrypt(plaintext);\n    }\n    setContentEncryptionKey(cek) {\n        this._flattened.setContentEncryptionKey(cek);\n        return this;\n    }\n    setInitializationVector(iv) {\n        this._flattened.setInitializationVector(iv);\n        return this;\n    }\n    setProtectedHeader(protectedHeader) {\n        this._flattened.setProtectedHeader(protectedHeader);\n        return this;\n    }\n    setKeyManagementParameters(parameters) {\n        this._flattened.setKeyManagementParameters(parameters);\n        return this;\n    }\n    async encrypt(key, options) {\n        const jwe = await this._flattened.encrypt(key, options);\n        return [jwe.protected, jwe.encrypted_key, jwe.iv, jwe.ciphertext, jwe.tag].join('.');\n    }\n}\n","import subtleAlgorithm from './subtle_dsa.js';\nimport crypto from './webcrypto.js';\nimport checkKeyLength from './check_key_length.js';\nimport getSignKey from './get_sign_verify_key.js';\nconst sign = async (alg, key, data) => {\n    const cryptoKey = await getSignKey(alg, key, 'sign');\n    checkKeyLength(alg, cryptoKey);\n    const signature = await crypto.subtle.sign(subtleAlgorithm(alg, cryptoKey.algorithm), cryptoKey, data);\n    return new Uint8Array(signature);\n};\nexport default sign;\n","import { encode as base64url } from '../../runtime/base64url.js';\nimport sign from '../../runtime/sign.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport { JWSInvalid } from '../../util/errors.js';\nimport { encoder, decoder, concat } from '../../lib/buffer_utils.js';\nimport checkKeyType from '../../lib/check_key_type.js';\nimport validateCrit from '../../lib/validate_crit.js';\nexport class FlattenedSign {\n    constructor(payload) {\n        if (!(payload instanceof Uint8Array)) {\n            throw new TypeError('payload must be an instance of Uint8Array');\n        }\n        this._payload = payload;\n    }\n    setProtectedHeader(protectedHeader) {\n        if (this._protectedHeader) {\n            throw new TypeError('setProtectedHeader can only be called once');\n        }\n        this._protectedHeader = protectedHeader;\n        return this;\n    }\n    setUnprotectedHeader(unprotectedHeader) {\n        if (this._unprotectedHeader) {\n            throw new TypeError('setUnprotectedHeader can only be called once');\n        }\n        this._unprotectedHeader = unprotectedHeader;\n        return this;\n    }\n    async sign(key, options) {\n        if (!this._protectedHeader && !this._unprotectedHeader) {\n            throw new JWSInvalid('either setProtectedHeader or setUnprotectedHeader must be called before #sign()');\n        }\n        if (!isDisjoint(this._protectedHeader, this._unprotectedHeader)) {\n            throw new JWSInvalid('JWS Protected and JWS Unprotected Header Parameter names must be disjoint');\n        }\n        const joseHeader = {\n            ...this._protectedHeader,\n            ...this._unprotectedHeader,\n        };\n        const extensions = validateCrit(JWSInvalid, new Map([['b64', true]]), options === null || options === void 0 ? void 0 : options.crit, this._protectedHeader, joseHeader);\n        let b64 = true;\n        if (extensions.has('b64')) {\n            b64 = this._protectedHeader.b64;\n            if (typeof b64 !== 'boolean') {\n                throw new JWSInvalid('The \"b64\" (base64url-encode payload) Header Parameter must be a boolean');\n            }\n        }\n        const { alg } = joseHeader;\n        if (typeof alg !== 'string' || !alg) {\n            throw new JWSInvalid('JWS \"alg\" (Algorithm) Header Parameter missing or invalid');\n        }\n        checkKeyType(alg, key, 'sign');\n        let payload = this._payload;\n        if (b64) {\n            payload = encoder.encode(base64url(payload));\n        }\n        let protectedHeader;\n        if (this._protectedHeader) {\n            protectedHeader = encoder.encode(base64url(JSON.stringify(this._protectedHeader)));\n        }\n        else {\n            protectedHeader = encoder.encode('');\n        }\n        const data = concat(protectedHeader, encoder.encode('.'), payload);\n        const signature = await sign(alg, key, data);\n        const jws = {\n            signature: base64url(signature),\n            payload: '',\n        };\n        if (b64) {\n            jws.payload = decoder.decode(payload);\n        }\n        if (this._unprotectedHeader) {\n            jws.header = this._unprotectedHeader;\n        }\n        if (this._protectedHeader) {\n            jws.protected = decoder.decode(protectedHeader);\n        }\n        return jws;\n    }\n}\n","import { FlattenedSign } from '../flattened/sign.js';\nexport class CompactSign {\n    constructor(payload) {\n        this._flattened = new FlattenedSign(payload);\n    }\n    setProtectedHeader(protectedHeader) {\n        this._flattened.setProtectedHeader(protectedHeader);\n        return this;\n    }\n    async sign(key, options) {\n        const jws = await this._flattened.sign(key, options);\n        if (jws.payload === undefined) {\n            throw new TypeError('use the flattened module for creating JWS with b64: false');\n        }\n        return `${jws.protected}.${jws.payload}.${jws.signature}`;\n    }\n}\n","import { FlattenedSign } from '../flattened/sign.js';\nimport { JWSInvalid } from '../../util/errors.js';\nclass IndividualSignature {\n    constructor(sig, key, options) {\n        this.parent = sig;\n        this.key = key;\n        this.options = options;\n    }\n    setProtectedHeader(protectedHeader) {\n        if (this.protectedHeader) {\n            throw new TypeError('setProtectedHeader can only be called once');\n        }\n        this.protectedHeader = protectedHeader;\n        return this;\n    }\n    setUnprotectedHeader(unprotectedHeader) {\n        if (this.unprotectedHeader) {\n            throw new TypeError('setUnprotectedHeader can only be called once');\n        }\n        this.unprotectedHeader = unprotectedHeader;\n        return this;\n    }\n    addSignature(...args) {\n        return this.parent.addSignature(...args);\n    }\n    sign(...args) {\n        return this.parent.sign(...args);\n    }\n    done() {\n        return this.parent;\n    }\n}\nexport class GeneralSign {\n    constructor(payload) {\n        this._signatures = [];\n        this._payload = payload;\n    }\n    addSignature(key, options) {\n        const signature = new IndividualSignature(this, key, options);\n        this._signatures.push(signature);\n        return signature;\n    }\n    async sign() {\n        if (!this._signatures.length) {\n            throw new JWSInvalid('at least one signature must be added');\n        }\n        const jws = {\n            signatures: [],\n            payload: '',\n        };\n        for (let i = 0; i < this._signatures.length; i++) {\n            const signature = this._signatures[i];\n            const flattened = new FlattenedSign(this._payload);\n            flattened.setProtectedHeader(signature.protectedHeader);\n            flattened.setUnprotectedHeader(signature.unprotectedHeader);\n            const { payload, ...rest } = await flattened.sign(signature.key, signature.options);\n            if (i === 0) {\n                jws.payload = payload;\n            }\n            else if (jws.payload !== payload) {\n                throw new JWSInvalid('inconsistent use of JWS Unencoded Payload (RFC7797)');\n            }\n            jws.signatures.push(rest);\n        }\n        return jws;\n    }\n}\n","import epoch from '../lib/epoch.js';\nimport isObject from '../lib/is_object.js';\nimport secs from '../lib/secs.js';\nexport class ProduceJWT {\n    constructor(payload) {\n        if (!isObject(payload)) {\n            throw new TypeError('JWT Claims Set MUST be an object');\n        }\n        this._payload = payload;\n    }\n    setIssuer(issuer) {\n        this._payload = { ...this._payload, iss: issuer };\n        return this;\n    }\n    setSubject(subject) {\n        this._payload = { ...this._payload, sub: subject };\n        return this;\n    }\n    setAudience(audience) {\n        this._payload = { ...this._payload, aud: audience };\n        return this;\n    }\n    setJti(jwtId) {\n        this._payload = { ...this._payload, jti: jwtId };\n        return this;\n    }\n    setNotBefore(input) {\n        if (typeof input === 'number') {\n            this._payload = { ...this._payload, nbf: input };\n        }\n        else {\n            this._payload = { ...this._payload, nbf: epoch(new Date()) + secs(input) };\n        }\n        return this;\n    }\n    setExpirationTime(input) {\n        if (typeof input === 'number') {\n            this._payload = { ...this._payload, exp: input };\n        }\n        else {\n            this._payload = { ...this._payload, exp: epoch(new Date()) + secs(input) };\n        }\n        return this;\n    }\n    setIssuedAt(input) {\n        if (typeof input === 'undefined') {\n            this._payload = { ...this._payload, iat: epoch(new Date()) };\n        }\n        else {\n            this._payload = { ...this._payload, iat: input };\n        }\n        return this;\n    }\n}\n","import { CompactSign } from '../jws/compact/sign.js';\nimport { JWTInvalid } from '../util/errors.js';\nimport { encoder } from '../lib/buffer_utils.js';\nimport { ProduceJWT } from './produce.js';\nexport class SignJWT extends ProduceJWT {\n    setProtectedHeader(protectedHeader) {\n        this._protectedHeader = protectedHeader;\n        return this;\n    }\n    async sign(key, options) {\n        var _a;\n        const sig = new CompactSign(encoder.encode(JSON.stringify(this._payload)));\n        sig.setProtectedHeader(this._protectedHeader);\n        if (Array.isArray((_a = this._protectedHeader) === null || _a === void 0 ? void 0 : _a.crit) &&\n            this._protectedHeader.crit.includes('b64') &&\n            this._protectedHeader.b64 === false) {\n            throw new JWTInvalid('JWTs MUST NOT use unencoded payload');\n        }\n        return sig.sign(key, options);\n    }\n}\n","import { CompactEncrypt } from '../jwe/compact/encrypt.js';\nimport { encoder } from '../lib/buffer_utils.js';\nimport { ProduceJWT } from './produce.js';\nexport class EncryptJWT extends ProduceJWT {\n    setProtectedHeader(protectedHeader) {\n        if (this._protectedHeader) {\n            throw new TypeError('setProtectedHeader can only be called once');\n        }\n        this._protectedHeader = protectedHeader;\n        return this;\n    }\n    setKeyManagementParameters(parameters) {\n        if (this._keyManagementParameters) {\n            throw new TypeError('setKeyManagementParameters can only be called once');\n        }\n        this._keyManagementParameters = parameters;\n        return this;\n    }\n    setContentEncryptionKey(cek) {\n        if (this._cek) {\n            throw new TypeError('setContentEncryptionKey can only be called once');\n        }\n        this._cek = cek;\n        return this;\n    }\n    setInitializationVector(iv) {\n        if (this._iv) {\n            throw new TypeError('setInitializationVector can only be called once');\n        }\n        this._iv = iv;\n        return this;\n    }\n    replicateIssuerAsHeader() {\n        this._replicateIssuerAsHeader = true;\n        return this;\n    }\n    replicateSubjectAsHeader() {\n        this._replicateSubjectAsHeader = true;\n        return this;\n    }\n    replicateAudienceAsHeader() {\n        this._replicateAudienceAsHeader = true;\n        return this;\n    }\n    async encrypt(key, options) {\n        const enc = new CompactEncrypt(encoder.encode(JSON.stringify(this._payload)));\n        if (this._replicateIssuerAsHeader) {\n            this._protectedHeader = { ...this._protectedHeader, iss: this._payload.iss };\n        }\n        if (this._replicateSubjectAsHeader) {\n            this._protectedHeader = { ...this._protectedHeader, sub: this._payload.sub };\n        }\n        if (this._replicateAudienceAsHeader) {\n            this._protectedHeader = { ...this._protectedHeader, aud: this._payload.aud };\n        }\n        enc.setProtectedHeader(this._protectedHeader);\n        if (this._iv) {\n            enc.setInitializationVector(this._iv);\n        }\n        if (this._cek) {\n            enc.setContentEncryptionKey(this._cek);\n        }\n        if (this._keyManagementParameters) {\n            enc.setKeyManagementParameters(this._keyManagementParameters);\n        }\n        return enc.encrypt(key, options);\n    }\n}\n","import digest from '../runtime/digest.js';\nimport { encode as base64url } from '../runtime/base64url.js';\nimport { JOSENotSupported, JWKInvalid } from '../util/errors.js';\nimport { encoder } from '../lib/buffer_utils.js';\nimport isObject from '../lib/is_object.js';\nconst check = (value, description) => {\n    if (typeof value !== 'string' || !value) {\n        throw new JWKInvalid(`${description} missing or invalid`);\n    }\n};\nexport async function calculateJwkThumbprint(jwk, digestAlgorithm) {\n    if (!isObject(jwk)) {\n        throw new TypeError('JWK must be an object');\n    }\n    digestAlgorithm !== null && digestAlgorithm !== void 0 ? digestAlgorithm : (digestAlgorithm = 'sha256');\n    if (digestAlgorithm !== 'sha256' &&\n        digestAlgorithm !== 'sha384' &&\n        digestAlgorithm !== 'sha512') {\n        throw new TypeError('digestAlgorithm must one of \"sha256\", \"sha384\", or \"sha512\"');\n    }\n    let components;\n    switch (jwk.kty) {\n        case 'EC':\n            check(jwk.crv, '\"crv\" (Curve) Parameter');\n            check(jwk.x, '\"x\" (X Coordinate) Parameter');\n            check(jwk.y, '\"y\" (Y Coordinate) Parameter');\n            components = { crv: jwk.crv, kty: jwk.kty, x: jwk.x, y: jwk.y };\n            break;\n        case 'OKP':\n            check(jwk.crv, '\"crv\" (Subtype of Key Pair) Parameter');\n            check(jwk.x, '\"x\" (Public Key) Parameter');\n            components = { crv: jwk.crv, kty: jwk.kty, x: jwk.x };\n            break;\n        case 'RSA':\n            check(jwk.e, '\"e\" (Exponent) Parameter');\n            check(jwk.n, '\"n\" (Modulus) Parameter');\n            components = { e: jwk.e, kty: jwk.kty, n: jwk.n };\n            break;\n        case 'oct':\n            check(jwk.k, '\"k\" (Key Value) Parameter');\n            components = { k: jwk.k, kty: jwk.kty };\n            break;\n        default:\n            throw new JOSENotSupported('\"kty\" (Key Type) Parameter missing or unsupported');\n    }\n    const data = encoder.encode(JSON.stringify(components));\n    return base64url(await digest(digestAlgorithm, data));\n}\nexport async function calculateJwkThumbprintUri(jwk, digestAlgorithm) {\n    digestAlgorithm !== null && digestAlgorithm !== void 0 ? digestAlgorithm : (digestAlgorithm = 'sha256');\n    const thumbprint = await calculateJwkThumbprint(jwk, digestAlgorithm);\n    return `urn:ietf:params:oauth:jwk-thumbprint:sha-${digestAlgorithm.slice(-3)}:${thumbprint}`;\n}\n","import { importJWK } from '../key/import.js';\nimport isObject from '../lib/is_object.js';\nimport { JWSInvalid } from '../util/errors.js';\nexport async function EmbeddedJWK(protectedHeader, token) {\n    const joseHeader = {\n        ...protectedHeader,\n        ...token === null || token === void 0 ? void 0 : token.header,\n    };\n    if (!isObject(joseHeader.jwk)) {\n        throw new JWSInvalid('\"jwk\" (JSON Web Key) Header Parameter must be a JSON object');\n    }\n    const key = await importJWK({ ...joseHeader.jwk, ext: true }, joseHeader.alg, true);\n    if (key instanceof Uint8Array || key.type !== 'public') {\n        throw new JWSInvalid('\"jwk\" (JSON Web Key) Header Parameter must be a public key');\n    }\n    return key;\n}\n","import { importJWK } from '../key/import.js';\nimport { JWKSInvalid, JOSENotSupported, JWKSNoMatchingKey, JWKSMultipleMatchingKeys, } from '../util/errors.js';\nimport isObject from '../lib/is_object.js';\nfunction getKtyFromAlg(alg) {\n    switch (typeof alg === 'string' && alg.slice(0, 2)) {\n        case 'RS':\n        case 'PS':\n            return 'RSA';\n        case 'ES':\n            return 'EC';\n        case 'Ed':\n            return 'OKP';\n        default:\n            throw new JOSENotSupported('Unsupported \"alg\" value for a JSON Web Key Set');\n    }\n}\nexport function isJWKSLike(jwks) {\n    return (jwks &&\n        typeof jwks === 'object' &&\n        Array.isArray(jwks.keys) &&\n        jwks.keys.every(isJWKLike));\n}\nfunction isJWKLike(key) {\n    return isObject(key);\n}\nfunction clone(obj) {\n    if (typeof structuredClone === 'function') {\n        return structuredClone(obj);\n    }\n    return JSON.parse(JSON.stringify(obj));\n}\nexport class LocalJWKSet {\n    constructor(jwks) {\n        this._cached = new WeakMap();\n        if (!isJWKSLike(jwks)) {\n            throw new JWKSInvalid('JSON Web Key Set malformed');\n        }\n        this._jwks = clone(jwks);\n    }\n    async getKey(protectedHeader, token) {\n        const { alg, kid } = { ...protectedHeader, ...token === null || token === void 0 ? void 0 : token.header };\n        const kty = getKtyFromAlg(alg);\n        const candidates = this._jwks.keys.filter((jwk) => {\n            let candidate = kty === jwk.kty;\n            if (candidate && typeof kid === 'string') {\n                candidate = kid === jwk.kid;\n            }\n            if (candidate && typeof jwk.alg === 'string') {\n                candidate = alg === jwk.alg;\n            }\n            if (candidate && typeof jwk.use === 'string') {\n                candidate = jwk.use === 'sig';\n            }\n            if (candidate && Array.isArray(jwk.key_ops)) {\n                candidate = jwk.key_ops.includes('verify');\n            }\n            if (candidate && alg === 'EdDSA') {\n                candidate = jwk.crv === 'Ed25519' || jwk.crv === 'Ed448';\n            }\n            if (candidate) {\n                switch (alg) {\n                    case 'ES256':\n                        candidate = jwk.crv === 'P-256';\n                        break;\n                    case 'ES256K':\n                        candidate = jwk.crv === 'secp256k1';\n                        break;\n                    case 'ES384':\n                        candidate = jwk.crv === 'P-384';\n                        break;\n                    case 'ES512':\n                        candidate = jwk.crv === 'P-521';\n                        break;\n                }\n            }\n            return candidate;\n        });\n        const { 0: jwk, length } = candidates;\n        if (length === 0) {\n            throw new JWKSNoMatchingKey();\n        }\n        else if (length !== 1) {\n            const error = new JWKSMultipleMatchingKeys();\n            const { _cached } = this;\n            error[Symbol.asyncIterator] = async function* () {\n                for (const jwk of candidates) {\n                    try {\n                        yield await importWithAlgCache(_cached, jwk, alg);\n                    }\n                    catch (_a) {\n                        continue;\n                    }\n                }\n            };\n            throw error;\n        }\n        return importWithAlgCache(this._cached, jwk, alg);\n    }\n}\nasync function importWithAlgCache(cache, jwk, alg) {\n    const cached = cache.get(jwk) || cache.set(jwk, {}).get(jwk);\n    if (cached[alg] === undefined) {\n        const key = await importJWK({ ...jwk, ext: true }, alg);\n        if (key instanceof Uint8Array || key.type !== 'public') {\n            throw new JWKSInvalid('JSON Web Key Set members must be public keys');\n        }\n        cached[alg] = key;\n    }\n    return cached[alg];\n}\nexport function createLocalJWKSet(jwks) {\n    const set = new LocalJWKSet(jwks);\n    return async function (protectedHeader, token) {\n        return set.getKey(protectedHeader, token);\n    };\n}\n","import { JOSEError, JWKSTimeout } from '../util/errors.js';\nconst fetchJwks = async (url, timeout, options) => {\n    let controller;\n    let id;\n    let timedOut = false;\n    if (typeof AbortController === 'function') {\n        controller = new AbortController();\n        id = setTimeout(() => {\n            timedOut = true;\n            controller.abort();\n        }, timeout);\n    }\n    const response = await fetch(url.href, {\n        signal: controller ? controller.signal : undefined,\n        redirect: 'manual',\n        headers: options.headers,\n    }).catch((err) => {\n        if (timedOut)\n            throw new JWKSTimeout();\n        throw err;\n    });\n    if (id !== undefined)\n        clearTimeout(id);\n    if (response.status !== 200) {\n        throw new JOSEError('Expected 200 OK from the JSON Web Key Set HTTP response');\n    }\n    try {\n        return await response.json();\n    }\n    catch (_a) {\n        throw new JOSEError('Failed to parse the JSON Web Key Set HTTP response as JSON');\n    }\n};\nexport default fetchJwks;\n","import fetchJwks from '../runtime/fetch_jwks.js';\nimport { JWKSInvalid, JWKSNoMatchingKey } from '../util/errors.js';\nimport { isJWKSLike, LocalJWKSet } from './local.js';\nfunction isCloudflareWorkers() {\n    return (typeof WebSocketPair !== 'undefined' ||\n        (typeof navigator !== 'undefined' && navigator.userAgent === 'Cloudflare-Workers') ||\n        (typeof EdgeRuntime !== 'undefined' && EdgeRuntime === 'vercel'));\n}\nclass RemoteJWKSet extends LocalJWKSet {\n    constructor(url, options) {\n        super({ keys: [] });\n        this._jwks = undefined;\n        if (!(url instanceof URL)) {\n            throw new TypeError('url must be an instance of URL');\n        }\n        this._url = new URL(url.href);\n        this._options = { agent: options === null || options === void 0 ? void 0 : options.agent, headers: options === null || options === void 0 ? void 0 : options.headers };\n        this._timeoutDuration =\n            typeof (options === null || options === void 0 ? void 0 : options.timeoutDuration) === 'number' ? options === null || options === void 0 ? void 0 : options.timeoutDuration : 5000;\n        this._cooldownDuration =\n            typeof (options === null || options === void 0 ? void 0 : options.cooldownDuration) === 'number' ? options === null || options === void 0 ? void 0 : options.cooldownDuration : 30000;\n        this._cacheMaxAge = typeof (options === null || options === void 0 ? void 0 : options.cacheMaxAge) === 'number' ? options === null || options === void 0 ? void 0 : options.cacheMaxAge : 600000;\n    }\n    coolingDown() {\n        return typeof this._jwksTimestamp === 'number'\n            ? Date.now() < this._jwksTimestamp + this._cooldownDuration\n            : false;\n    }\n    fresh() {\n        return typeof this._jwksTimestamp === 'number'\n            ? Date.now() < this._jwksTimestamp + this._cacheMaxAge\n            : false;\n    }\n    async getKey(protectedHeader, token) {\n        if (!this._jwks || !this.fresh()) {\n            await this.reload();\n        }\n        try {\n            return await super.getKey(protectedHeader, token);\n        }\n        catch (err) {\n            if (err instanceof JWKSNoMatchingKey) {\n                if (this.coolingDown() === false) {\n                    await this.reload();\n                    return super.getKey(protectedHeader, token);\n                }\n            }\n            throw err;\n        }\n    }\n    async reload() {\n        if (this._pendingFetch && isCloudflareWorkers()) {\n            this._pendingFetch = undefined;\n        }\n        this._pendingFetch || (this._pendingFetch = fetchJwks(this._url, this._timeoutDuration, this._options)\n            .then((json) => {\n            if (!isJWKSLike(json)) {\n                throw new JWKSInvalid('JSON Web Key Set malformed');\n            }\n            this._jwks = { keys: json.keys };\n            this._jwksTimestamp = Date.now();\n            this._pendingFetch = undefined;\n        })\n            .catch((err) => {\n            this._pendingFetch = undefined;\n            throw err;\n        }));\n        await this._pendingFetch;\n    }\n}\nexport function createRemoteJWKSet(url, options) {\n    const set = new RemoteJWKSet(url, options);\n    return async function (protectedHeader, token) {\n        return set.getKey(protectedHeader, token);\n    };\n}\n","import * as base64url from '../runtime/base64url.js';\nimport { decoder } from '../lib/buffer_utils.js';\nimport { JWTInvalid } from '../util/errors.js';\nimport jwtPayload from '../lib/jwt_claims_set.js';\nimport { ProduceJWT } from './produce.js';\nexport class UnsecuredJWT extends ProduceJWT {\n    encode() {\n        const header = base64url.encode(JSON.stringify({ alg: 'none' }));\n        const payload = base64url.encode(JSON.stringify(this._payload));\n        return `${header}.${payload}.`;\n    }\n    static decode(jwt, options) {\n        if (typeof jwt !== 'string') {\n            throw new JWTInvalid('Unsecured JWT must be a string');\n        }\n        const { 0: encodedHeader, 1: encodedPayload, 2: signature, length } = jwt.split('.');\n        if (length !== 3 || signature !== '') {\n            throw new JWTInvalid('Invalid Unsecured JWT');\n        }\n        let header;\n        try {\n            header = JSON.parse(decoder.decode(base64url.decode(encodedHeader)));\n            if (header.alg !== 'none')\n                throw new Error();\n        }\n        catch (_a) {\n            throw new JWTInvalid('Invalid Unsecured JWT');\n        }\n        const payload = jwtPayload(header, base64url.decode(encodedPayload), options);\n        return { payload, header };\n    }\n}\n","import * as base64url from '../runtime/base64url.js';\nexport const encode = base64url.encode;\nexport const decode = base64url.decode;\n","import { decode as base64url } from './base64url.js';\nimport { decoder } from '../lib/buffer_utils.js';\nimport isObject from '../lib/is_object.js';\nexport function decodeProtectedHeader(token) {\n    let protectedB64u;\n    if (typeof token === 'string') {\n        const parts = token.split('.');\n        if (parts.length === 3 || parts.length === 5) {\n            ;\n            [protectedB64u] = parts;\n        }\n    }\n    else if (typeof token === 'object' && token) {\n        if ('protected' in token) {\n            protectedB64u = token.protected;\n        }\n        else {\n            throw new TypeError('Token does not contain a Protected Header');\n        }\n    }\n    try {\n        if (typeof protectedB64u !== 'string' || !protectedB64u) {\n            throw new Error();\n        }\n        const result = JSON.parse(decoder.decode(base64url(protectedB64u)));\n        if (!isObject(result)) {\n            throw new Error();\n        }\n        return result;\n    }\n    catch (_a) {\n        throw new TypeError('Invalid Token or Protected Header formatting');\n    }\n}\n","import { decode as base64url } from './base64url.js';\nimport { decoder } from '../lib/buffer_utils.js';\nimport isObject from '../lib/is_object.js';\nimport { JWTInvalid } from './errors.js';\nexport function decodeJwt(jwt) {\n    if (typeof jwt !== 'string')\n        throw new JWTInvalid('JWTs must use Compact JWS serialization, JWT must be a string');\n    const { 1: payload, length } = jwt.split('.');\n    if (length === 5)\n        throw new JWTInvalid('Only JWTs using Compact JWS serialization can be decoded');\n    if (length !== 3)\n        throw new JWTInvalid('Invalid JWT');\n    if (!payload)\n        throw new JWTInvalid('JWTs must contain a payload');\n    let decoded;\n    try {\n        decoded = base64url(payload);\n    }\n    catch (_a) {\n        throw new JWTInvalid('Failed to parse the base64url encoded payload');\n    }\n    let result;\n    try {\n        result = JSON.parse(decoder.decode(decoded));\n    }\n    catch (_b) {\n        throw new JWTInvalid('Failed to parse the decoded payload as JSON');\n    }\n    if (!isObject(result))\n        throw new JWTInvalid('Invalid JWT Claims Set');\n    return result;\n}\n","import crypto from './webcrypto.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport random from './random.js';\nexport async function generateSecret(alg, options) {\n    var _a;\n    let length;\n    let algorithm;\n    let keyUsages;\n    switch (alg) {\n        case 'HS256':\n        case 'HS384':\n        case 'HS512':\n            length = parseInt(alg.slice(-3), 10);\n            algorithm = { name: 'HMAC', hash: `SHA-${length}`, length };\n            keyUsages = ['sign', 'verify'];\n            break;\n        case 'A128CBC-HS256':\n        case 'A192CBC-HS384':\n        case 'A256CBC-HS512':\n            length = parseInt(alg.slice(-3), 10);\n            return random(new Uint8Array(length >> 3));\n        case 'A128KW':\n        case 'A192KW':\n        case 'A256KW':\n            length = parseInt(alg.slice(1, 4), 10);\n            algorithm = { name: 'AES-KW', length };\n            keyUsages = ['wrapKey', 'unwrapKey'];\n            break;\n        case 'A128GCMKW':\n        case 'A192GCMKW':\n        case 'A256GCMKW':\n        case 'A128GCM':\n        case 'A192GCM':\n        case 'A256GCM':\n            length = parseInt(alg.slice(1, 4), 10);\n            algorithm = { name: 'AES-GCM', length };\n            keyUsages = ['encrypt', 'decrypt'];\n            break;\n        default:\n            throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n    }\n    return crypto.subtle.generateKey(algorithm, (_a = options === null || options === void 0 ? void 0 : options.extractable) !== null && _a !== void 0 ? _a : false, keyUsages);\n}\nfunction getModulusLengthOption(options) {\n    var _a;\n    const modulusLength = (_a = options === null || options === void 0 ? void 0 : options.modulusLength) !== null && _a !== void 0 ? _a : 2048;\n    if (typeof modulusLength !== 'number' || modulusLength < 2048) {\n        throw new JOSENotSupported('Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used');\n    }\n    return modulusLength;\n}\nexport async function generateKeyPair(alg, options) {\n    var _a, _b, _c;\n    let algorithm;\n    let keyUsages;\n    switch (alg) {\n        case 'PS256':\n        case 'PS384':\n        case 'PS512':\n            algorithm = {\n                name: 'RSA-PSS',\n                hash: `SHA-${alg.slice(-3)}`,\n                publicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n                modulusLength: getModulusLengthOption(options),\n            };\n            keyUsages = ['sign', 'verify'];\n            break;\n        case 'RS256':\n        case 'RS384':\n        case 'RS512':\n            algorithm = {\n                name: 'RSASSA-PKCS1-v1_5',\n                hash: `SHA-${alg.slice(-3)}`,\n                publicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n                modulusLength: getModulusLengthOption(options),\n            };\n            keyUsages = ['sign', 'verify'];\n            break;\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512':\n            algorithm = {\n                name: 'RSA-OAEP',\n                hash: `SHA-${parseInt(alg.slice(-3), 10) || 1}`,\n                publicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n                modulusLength: getModulusLengthOption(options),\n            };\n            keyUsages = ['decrypt', 'unwrapKey', 'encrypt', 'wrapKey'];\n            break;\n        case 'ES256':\n            algorithm = { name: 'ECDSA', namedCurve: 'P-256' };\n            keyUsages = ['sign', 'verify'];\n            break;\n        case 'ES384':\n            algorithm = { name: 'ECDSA', namedCurve: 'P-384' };\n            keyUsages = ['sign', 'verify'];\n            break;\n        case 'ES512':\n            algorithm = { name: 'ECDSA', namedCurve: 'P-521' };\n            keyUsages = ['sign', 'verify'];\n            break;\n        case 'EdDSA':\n            keyUsages = ['sign', 'verify'];\n            const crv = (_a = options === null || options === void 0 ? void 0 : options.crv) !== null && _a !== void 0 ? _a : 'Ed25519';\n            switch (crv) {\n                case 'Ed25519':\n                case 'Ed448':\n                    algorithm = { name: crv };\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported crv option provided');\n            }\n            break;\n        case 'ECDH-ES':\n        case 'ECDH-ES+A128KW':\n        case 'ECDH-ES+A192KW':\n        case 'ECDH-ES+A256KW': {\n            keyUsages = ['deriveKey', 'deriveBits'];\n            const crv = (_b = options === null || options === void 0 ? void 0 : options.crv) !== null && _b !== void 0 ? _b : 'P-256';\n            switch (crv) {\n                case 'P-256':\n                case 'P-384':\n                case 'P-521': {\n                    algorithm = { name: 'ECDH', namedCurve: crv };\n                    break;\n                }\n                case 'X25519':\n                case 'X448':\n                    algorithm = { name: crv };\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448');\n            }\n            break;\n        }\n        default:\n            throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n    }\n    return (crypto.subtle.generateKey(algorithm, (_c = options === null || options === void 0 ? void 0 : options.extractable) !== null && _c !== void 0 ? _c : false, keyUsages));\n}\n","import { generateKeyPair as generate } from '../runtime/generate.js';\nexport async function generateKeyPair(alg, options) {\n    return generate(alg, options);\n}\n","import { generateSecret as generate } from '../runtime/generate.js';\nexport async function generateSecret(alg, options) {\n    return generate(alg, options);\n}\n","export { compactDecrypt } from './jwe/compact/decrypt.js';\nexport { flattenedDecrypt } from './jwe/flattened/decrypt.js';\nexport { generalDecrypt } from './jwe/general/decrypt.js';\nexport { GeneralEncrypt } from './jwe/general/encrypt.js';\nexport { compactVerify } from './jws/compact/verify.js';\nexport { flattenedVerify } from './jws/flattened/verify.js';\nexport { generalVerify } from './jws/general/verify.js';\nexport { jwtVerify } from './jwt/verify.js';\nexport { jwtDecrypt } from './jwt/decrypt.js';\nexport { CompactEncrypt } from './jwe/compact/encrypt.js';\nexport { FlattenedEncrypt } from './jwe/flattened/encrypt.js';\nexport { CompactSign } from './jws/compact/sign.js';\nexport { FlattenedSign } from './jws/flattened/sign.js';\nexport { GeneralSign } from './jws/general/sign.js';\nexport { SignJWT } from './jwt/sign.js';\nexport { EncryptJWT } from './jwt/encrypt.js';\nexport { calculateJwkThumbprint, calculateJwkThumbprintUri } from './jwk/thumbprint.js';\nexport { EmbeddedJWK } from './jwk/embedded.js';\nexport { createLocalJWKSet } from './jwks/local.js';\nexport { createRemoteJWKSet } from './jwks/remote.js';\nexport { UnsecuredJWT } from './jwt/unsecured.js';\nexport { exportPKCS8, exportSPKI, exportJWK } from './key/export.js';\nexport { importSPKI, importPKCS8, importX509, importJWK } from './key/import.js';\nexport { decodeProtectedHeader } from './util/decode_protected_header.js';\nexport { decodeJwt } from './util/decode_jwt.js';\nimport * as errors_1 from './util/errors.js';\nexport { errors_1 as errors };\nexport { generateKeyPair } from './key/generate_key_pair.js';\nexport { generateSecret } from './key/generate_secret.js';\nimport * as base64url_1 from './util/base64url.js';\nexport { base64url_1 as base64url };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\n//# sourceMappingURL=helper.js.map","export class FunctionsError extends Error {\n    constructor(message, name = 'FunctionsError', context) {\n        super(message);\n        super.name = name;\n        this.context = context;\n    }\n}\nexport class FunctionsFetchError extends FunctionsError {\n    constructor(context) {\n        super('Failed to send a request to the Edge Function', 'FunctionsFetchError', context);\n    }\n}\nexport class FunctionsRelayError extends FunctionsError {\n    constructor(context) {\n        super('Relay Error invoking the Edge Function', 'FunctionsRelayError', context);\n    }\n}\nexport class FunctionsHttpError extends FunctionsError {\n    constructor(context) {\n        super('Edge Function returned a non-2xx status code', 'FunctionsHttpError', context);\n    }\n}\n//# sourceMappingURL=types.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { resolveFetch } from './helper';\nimport { FunctionsFetchError, FunctionsHttpError, FunctionsRelayError, } from './types';\nexport class FunctionsClient {\n    constructor(url, { headers = {}, customFetch, } = {}) {\n        this.url = url;\n        this.headers = headers;\n        this.fetch = resolveFetch(customFetch);\n    }\n    /**\n     * Updates the authorization header\n     * @param token - the new jwt token sent in the authorisation header\n     */\n    setAuth(token) {\n        this.headers.Authorization = `Bearer ${token}`;\n    }\n    /**\n     * Invokes a function\n     * @param functionName - The name of the Function to invoke.\n     * @param options - Options for invoking the Function.\n     */\n    invoke(functionName, options = {}) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { headers, method, body: functionArgs } = options;\n                let _headers = {};\n                let body;\n                if (functionArgs &&\n                    ((headers && !Object.prototype.hasOwnProperty.call(headers, 'Content-Type')) || !headers)) {\n                    if ((typeof Blob !== 'undefined' && functionArgs instanceof Blob) ||\n                        functionArgs instanceof ArrayBuffer) {\n                        // will work for File as File inherits Blob\n                        // also works for ArrayBuffer as it is the same underlying structure as a Blob\n                        _headers['Content-Type'] = 'application/octet-stream';\n                        body = functionArgs;\n                    }\n                    else if (typeof functionArgs === 'string') {\n                        // plain string\n                        _headers['Content-Type'] = 'text/plain';\n                        body = functionArgs;\n                    }\n                    else if (typeof FormData !== 'undefined' && functionArgs instanceof FormData) {\n                        // don't set content-type headers\n                        // Request will automatically add the right boundary value\n                        body = functionArgs;\n                    }\n                    else {\n                        // default, assume this is JSON\n                        _headers['Content-Type'] = 'application/json';\n                        body = JSON.stringify(functionArgs);\n                    }\n                }\n                const response = yield this.fetch(`${this.url}/${functionName}`, {\n                    method: method || 'POST',\n                    // headers priority is (high to low):\n                    // 1. invoke-level headers\n                    // 2. client-level headers\n                    // 3. default Content-Type header\n                    headers: Object.assign(Object.assign(Object.assign({}, _headers), this.headers), headers),\n                    body,\n                }).catch((fetchError) => {\n                    throw new FunctionsFetchError(fetchError);\n                });\n                const isRelayError = response.headers.get('x-relay-error');\n                if (isRelayError && isRelayError === 'true') {\n                    throw new FunctionsRelayError(response);\n                }\n                if (!response.ok) {\n                    throw new FunctionsHttpError(response);\n                }\n                let responseType = ((_a = response.headers.get('Content-Type')) !== null && _a !== void 0 ? _a : 'text/plain').split(';')[0].trim();\n                let data;\n                if (responseType === 'application/json') {\n                    data = yield response.json();\n                }\n                else if (responseType === 'application/octet-stream') {\n                    data = yield response.blob();\n                }\n                else if (responseType === 'multipart/form-data') {\n                    data = yield response.formData();\n                }\n                else {\n                    // default to text\n                    data = yield response.text();\n                }\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n}\n//# sourceMappingURL=FunctionsClient.js.map","import crossFetch from 'cross-fetch';\nexport default class PostgrestBuilder {\n    constructor(builder) {\n        this.shouldThrowOnError = false;\n        this.method = builder.method;\n        this.url = builder.url;\n        this.headers = builder.headers;\n        this.schema = builder.schema;\n        this.body = builder.body;\n        this.shouldThrowOnError = builder.shouldThrowOnError;\n        this.signal = builder.signal;\n        this.isMaybeSingle = builder.isMaybeSingle;\n        if (builder.fetch) {\n            this.fetch = builder.fetch;\n        }\n        else if (typeof fetch === 'undefined') {\n            this.fetch = crossFetch;\n        }\n        else {\n            this.fetch = fetch;\n        }\n    }\n    /**\n     * If there's an error with the query, throwOnError will reject the promise by\n     * throwing the error instead of returning it as part of a successful response.\n     *\n     * {@link https://github.com/supabase/supabase-js/issues/92}\n     */\n    throwOnError() {\n        this.shouldThrowOnError = true;\n        return this;\n    }\n    then(onfulfilled, onrejected) {\n        // https://postgrest.org/en/stable/api.html#switching-schemas\n        if (this.schema === undefined) {\n            // skip\n        }\n        else if (['GET', 'HEAD'].includes(this.method)) {\n            this.headers['Accept-Profile'] = this.schema;\n        }\n        else {\n            this.headers['Content-Profile'] = this.schema;\n        }\n        if (this.method !== 'GET' && this.method !== 'HEAD') {\n            this.headers['Content-Type'] = 'application/json';\n        }\n        // NOTE: Invoke w/o `this` to avoid illegal invocation error.\n        // https://github.com/supabase/postgrest-js/pull/247\n        const _fetch = this.fetch;\n        let res = _fetch(this.url.toString(), {\n            method: this.method,\n            headers: this.headers,\n            body: JSON.stringify(this.body),\n            signal: this.signal,\n        }).then(async (res) => {\n            var _a, _b, _c;\n            let error = null;\n            let data = null;\n            let count = null;\n            let status = res.status;\n            let statusText = res.statusText;\n            if (res.ok) {\n                if (this.method !== 'HEAD') {\n                    const body = await res.text();\n                    if (body === '') {\n                        // Prefer: return=minimal\n                    }\n                    else if (this.headers['Accept'] === 'text/csv') {\n                        data = body;\n                    }\n                    else if (this.headers['Accept'] &&\n                        this.headers['Accept'].includes('application/vnd.pgrst.plan+text')) {\n                        data = body;\n                    }\n                    else {\n                        data = JSON.parse(body);\n                    }\n                }\n                const countHeader = (_a = this.headers['Prefer']) === null || _a === void 0 ? void 0 : _a.match(/count=(exact|planned|estimated)/);\n                const contentRange = (_b = res.headers.get('content-range')) === null || _b === void 0 ? void 0 : _b.split('/');\n                if (countHeader && contentRange && contentRange.length > 1) {\n                    count = parseInt(contentRange[1]);\n                }\n                // Temporary partial fix for https://github.com/supabase/postgrest-js/issues/361\n                // Issue persists e.g. for `.insert([...]).select().maybeSingle()`\n                if (this.isMaybeSingle && this.method === 'GET' && Array.isArray(data)) {\n                    if (data.length > 1) {\n                        error = {\n                            // https://github.com/PostgREST/postgrest/blob/a867d79c42419af16c18c3fb019eba8df992626f/src/PostgREST/Error.hs#L553\n                            code: 'PGRST116',\n                            details: `Results contain ${data.length} rows, application/vnd.pgrst.object+json requires 1 row`,\n                            hint: null,\n                            message: 'JSON object requested, multiple (or no) rows returned',\n                        };\n                        data = null;\n                        count = null;\n                        status = 406;\n                        statusText = 'Not Acceptable';\n                    }\n                    else if (data.length === 1) {\n                        data = data[0];\n                    }\n                    else {\n                        data = null;\n                    }\n                }\n            }\n            else {\n                const body = await res.text();\n                try {\n                    error = JSON.parse(body);\n                    // Workaround for https://github.com/supabase/postgrest-js/issues/295\n                    if (Array.isArray(error) && res.status === 404) {\n                        data = [];\n                        error = null;\n                        status = 200;\n                        statusText = 'OK';\n                    }\n                }\n                catch (_d) {\n                    // Workaround for https://github.com/supabase/postgrest-js/issues/295\n                    if (res.status === 404 && body === '') {\n                        status = 204;\n                        statusText = 'No Content';\n                    }\n                    else {\n                        error = {\n                            message: body,\n                        };\n                    }\n                }\n                if (error && this.isMaybeSingle && ((_c = error === null || error === void 0 ? void 0 : error.details) === null || _c === void 0 ? void 0 : _c.includes('Results contain 0 rows'))) {\n                    error = null;\n                    status = 200;\n                    statusText = 'OK';\n                }\n                if (error && this.shouldThrowOnError) {\n                    throw error;\n                }\n            }\n            const postgrestResponse = {\n                error,\n                data,\n                count,\n                status,\n                statusText,\n            };\n            return postgrestResponse;\n        });\n        if (!this.shouldThrowOnError) {\n            res = res.catch((fetchError) => {\n                var _a, _b, _c;\n                return ({\n                    error: {\n                        message: `${(_a = fetchError === null || fetchError === void 0 ? void 0 : fetchError.name) !== null && _a !== void 0 ? _a : 'FetchError'}: ${fetchError === null || fetchError === void 0 ? void 0 : fetchError.message}`,\n                        details: `${(_b = fetchError === null || fetchError === void 0 ? void 0 : fetchError.stack) !== null && _b !== void 0 ? _b : ''}`,\n                        hint: '',\n                        code: `${(_c = fetchError === null || fetchError === void 0 ? void 0 : fetchError.code) !== null && _c !== void 0 ? _c : ''}`,\n                    },\n                    data: null,\n                    count: null,\n                    status: 0,\n                    statusText: '',\n                });\n            });\n        }\n        return res.then(onfulfilled, onrejected);\n    }\n}\n//# sourceMappingURL=PostgrestBuilder.js.map","import PostgrestBuilder from './PostgrestBuilder';\nexport default class PostgrestTransformBuilder extends PostgrestBuilder {\n    /**\n     * Perform a SELECT on the query result.\n     *\n     * By default, `.insert()`, `.update()`, `.upsert()`, and `.delete()` do not\n     * return modified rows. By calling this method, modified rows are returned in\n     * `data`.\n     *\n     * @param columns - The columns to retrieve, separated by commas\n     */\n    select(columns) {\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = (columns !== null && columns !== void 0 ? columns : '*')\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        if (this.headers['Prefer']) {\n            this.headers['Prefer'] += ',';\n        }\n        this.headers['Prefer'] += 'return=representation';\n        return this;\n    }\n    /**\n     * Order the query result by `column`.\n     *\n     * You can call this method multiple times to order by multiple columns.\n     *\n     * You can order foreign tables, but it doesn't affect the ordering of the\n     * current table.\n     *\n     * @param column - The column to order by\n     * @param options - Named parameters\n     * @param options.ascending - If `true`, the result will be in ascending order\n     * @param options.nullsFirst - If `true`, `null`s appear first. If `false`,\n     * `null`s appear last.\n     * @param options.foreignTable - Set this to order a foreign table by foreign\n     * columns\n     */\n    order(column, { ascending = true, nullsFirst, foreignTable, } = {}) {\n        const key = foreignTable ? `${foreignTable}.order` : 'order';\n        const existingOrder = this.url.searchParams.get(key);\n        this.url.searchParams.set(key, `${existingOrder ? `${existingOrder},` : ''}${column}.${ascending ? 'asc' : 'desc'}${nullsFirst === undefined ? '' : nullsFirst ? '.nullsfirst' : '.nullslast'}`);\n        return this;\n    }\n    /**\n     * Limit the query result by `count`.\n     *\n     * @param count - The maximum number of rows to return\n     * @param options - Named parameters\n     * @param options.foreignTable - Set this to limit rows of foreign tables\n     * instead of the current table\n     */\n    limit(count, { foreignTable } = {}) {\n        const key = typeof foreignTable === 'undefined' ? 'limit' : `${foreignTable}.limit`;\n        this.url.searchParams.set(key, `${count}`);\n        return this;\n    }\n    /**\n     * Limit the query result by `from` and `to` inclusively.\n     *\n     * @param from - The starting index from which to limit the result\n     * @param to - The last index to which to limit the result\n     * @param options - Named parameters\n     * @param options.foreignTable - Set this to limit rows of foreign tables\n     * instead of the current table\n     */\n    range(from, to, { foreignTable } = {}) {\n        const keyOffset = typeof foreignTable === 'undefined' ? 'offset' : `${foreignTable}.offset`;\n        const keyLimit = typeof foreignTable === 'undefined' ? 'limit' : `${foreignTable}.limit`;\n        this.url.searchParams.set(keyOffset, `${from}`);\n        // Range is inclusive, so add 1\n        this.url.searchParams.set(keyLimit, `${to - from + 1}`);\n        return this;\n    }\n    /**\n     * Set the AbortSignal for the fetch request.\n     *\n     * @param signal - The AbortSignal to use for the fetch request\n     */\n    abortSignal(signal) {\n        this.signal = signal;\n        return this;\n    }\n    /**\n     * Return `data` as a single object instead of an array of objects.\n     *\n     * Query result must be one row (e.g. using `.limit(1)`), otherwise this\n     * returns an error.\n     */\n    single() {\n        this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        return this;\n    }\n    /**\n     * Return `data` as a single object instead of an array of objects.\n     *\n     * Query result must be zero or one row (e.g. using `.limit(1)`), otherwise\n     * this returns an error.\n     */\n    maybeSingle() {\n        // Temporary partial fix for https://github.com/supabase/postgrest-js/issues/361\n        // Issue persists e.g. for `.insert([...]).select().maybeSingle()`\n        if (this.method === 'GET') {\n            this.headers['Accept'] = 'application/json';\n        }\n        else {\n            this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        }\n        this.isMaybeSingle = true;\n        return this;\n    }\n    /**\n     * Return `data` as a string in CSV format.\n     */\n    csv() {\n        this.headers['Accept'] = 'text/csv';\n        return this;\n    }\n    /**\n     * Return `data` as an object in [GeoJSON](https://geojson.org) format.\n     */\n    geojson() {\n        this.headers['Accept'] = 'application/geo+json';\n        return this;\n    }\n    /**\n     * Return `data` as the EXPLAIN plan for the query.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.analyze - If `true`, the query will be executed and the\n     * actual run time will be returned\n     *\n     * @param options.verbose - If `true`, the query identifier will be returned\n     * and `data` will include the output columns of the query\n     *\n     * @param options.settings - If `true`, include information on configuration\n     * parameters that affect query planning\n     *\n     * @param options.buffers - If `true`, include information on buffer usage\n     *\n     * @param options.wal - If `true`, include information on WAL record generation\n     *\n     * @param options.format - The format of the output, can be `\"text\"` (default)\n     * or `\"json\"`\n     */\n    explain({ analyze = false, verbose = false, settings = false, buffers = false, wal = false, format = 'text', } = {}) {\n        const options = [\n            analyze ? 'analyze' : null,\n            verbose ? 'verbose' : null,\n            settings ? 'settings' : null,\n            buffers ? 'buffers' : null,\n            wal ? 'wal' : null,\n        ]\n            .filter(Boolean)\n            .join('|');\n        // An Accept header can carry multiple media types but postgrest-js always sends one\n        const forMediatype = this.headers['Accept'];\n        this.headers['Accept'] = `application/vnd.pgrst.plan+${format}; for=\"${forMediatype}\"; options=${options};`;\n        if (format === 'json')\n            return this;\n        else\n            return this;\n    }\n    /**\n     * Rollback the query.\n     *\n     * `data` will still be returned, but the query is not committed.\n     */\n    rollback() {\n        var _a;\n        if (((_a = this.headers['Prefer']) !== null && _a !== void 0 ? _a : '').trim().length > 0) {\n            this.headers['Prefer'] += ',tx=rollback';\n        }\n        else {\n            this.headers['Prefer'] = 'tx=rollback';\n        }\n        return this;\n    }\n    /**\n     * Override the type of the returned `data`.\n     *\n     * @typeParam NewResult - The new result type to override with\n     */\n    returns() {\n        return this;\n    }\n}\n//# sourceMappingURL=PostgrestTransformBuilder.js.map","import PostgrestTransformBuilder from './PostgrestTransformBuilder';\nexport default class PostgrestFilterBuilder extends PostgrestTransformBuilder {\n    /**\n     * Match only rows where `column` is equal to `value`.\n     *\n     * To check if the value of `column` is NULL, you should use `.is()` instead.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    eq(column, value) {\n        this.url.searchParams.append(column, `eq.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is not equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    neq(column, value) {\n        this.url.searchParams.append(column, `neq.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is greater than `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    gt(column, value) {\n        this.url.searchParams.append(column, `gt.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is greater than or equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    gte(column, value) {\n        this.url.searchParams.append(column, `gte.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is less than `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    lt(column, value) {\n        this.url.searchParams.append(column, `lt.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is less than or equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    lte(column, value) {\n        this.url.searchParams.append(column, `lte.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches `pattern` case-sensitively.\n     *\n     * @param column - The column to filter on\n     * @param pattern - The pattern to match with\n     */\n    like(column, pattern) {\n        this.url.searchParams.append(column, `like.${pattern}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches all of `patterns` case-sensitively.\n     *\n     * @param column - The column to filter on\n     * @param patterns - The patterns to match with\n     */\n    likeAllOf(column, patterns) {\n        this.url.searchParams.append(column, `like(all).{${patterns.join(',')}}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches any of `patterns` case-sensitively.\n     *\n     * @param column - The column to filter on\n     * @param patterns - The patterns to match with\n     */\n    likeAnyOf(column, patterns) {\n        this.url.searchParams.append(column, `like(any).{${patterns.join(',')}}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches `pattern` case-insensitively.\n     *\n     * @param column - The column to filter on\n     * @param pattern - The pattern to match with\n     */\n    ilike(column, pattern) {\n        this.url.searchParams.append(column, `ilike.${pattern}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches all of `patterns` case-insensitively.\n     *\n     * @param column - The column to filter on\n     * @param patterns - The patterns to match with\n     */\n    ilikeAllOf(column, patterns) {\n        this.url.searchParams.append(column, `ilike(all).{${patterns.join(',')}}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches any of `patterns` case-insensitively.\n     *\n     * @param column - The column to filter on\n     * @param patterns - The patterns to match with\n     */\n    ilikeAnyOf(column, patterns) {\n        this.url.searchParams.append(column, `ilike(any).{${patterns.join(',')}}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` IS `value`.\n     *\n     * For non-boolean columns, this is only relevant for checking if the value of\n     * `column` is NULL by setting `value` to `null`.\n     *\n     * For boolean columns, you can also set `value` to `true` or `false` and it\n     * will behave the same way as `.eq()`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    is(column, value) {\n        this.url.searchParams.append(column, `is.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is included in the `values` array.\n     *\n     * @param column - The column to filter on\n     * @param values - The values array to filter with\n     */\n    in(column, values) {\n        const cleanedValues = values\n            .map((s) => {\n            // handle postgrest reserved characters\n            // https://postgrest.org/en/v7.0.0/api.html#reserved-characters\n            if (typeof s === 'string' && new RegExp('[,()]').test(s))\n                return `\"${s}\"`;\n            else\n                return `${s}`;\n        })\n            .join(',');\n        this.url.searchParams.append(column, `in.(${cleanedValues})`);\n        return this;\n    }\n    /**\n     * Only relevant for jsonb, array, and range columns. Match only rows where\n     * `column` contains every element appearing in `value`.\n     *\n     * @param column - The jsonb, array, or range column to filter on\n     * @param value - The jsonb, array, or range value to filter with\n     */\n    contains(column, value) {\n        if (typeof value === 'string') {\n            // range types can be inclusive '[', ']' or exclusive '(', ')' so just\n            // keep it simple and accept a string\n            this.url.searchParams.append(column, `cs.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(column, `cs.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(column, `cs.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    /**\n     * Only relevant for jsonb, array, and range columns. Match only rows where\n     * every element appearing in `column` is contained by `value`.\n     *\n     * @param column - The jsonb, array, or range column to filter on\n     * @param value - The jsonb, array, or range value to filter with\n     */\n    containedBy(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(column, `cd.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(column, `cd.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(column, `cd.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is greater than any element in `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeGt(column, range) {\n        this.url.searchParams.append(column, `sr.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is either contained in `range` or greater than any element in\n     * `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeGte(column, range) {\n        this.url.searchParams.append(column, `nxl.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is less than any element in `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeLt(column, range) {\n        this.url.searchParams.append(column, `sl.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is either contained in `range` or less than any element in\n     * `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeLte(column, range) {\n        this.url.searchParams.append(column, `nxr.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where `column` is\n     * mutually exclusive to `range` and there can be no element between the two\n     * ranges.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeAdjacent(column, range) {\n        this.url.searchParams.append(column, `adj.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for array and range columns. Match only rows where\n     * `column` and `value` have an element in common.\n     *\n     * @param column - The array or range column to filter on\n     * @param value - The array or range value to filter with\n     */\n    overlaps(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(column, `ov.${value}`);\n        }\n        else {\n            // array\n            this.url.searchParams.append(column, `ov.{${value.join(',')}}`);\n        }\n        return this;\n    }\n    /**\n     * Only relevant for text and tsvector columns. Match only rows where\n     * `column` matches the query string in `query`.\n     *\n     * @param column - The text or tsvector column to filter on\n     * @param query - The query text to match with\n     * @param options - Named parameters\n     * @param options.config - The text search configuration to use\n     * @param options.type - Change how the `query` text is interpreted\n     */\n    textSearch(column, query, { config, type } = {}) {\n        let typePart = '';\n        if (type === 'plain') {\n            typePart = 'pl';\n        }\n        else if (type === 'phrase') {\n            typePart = 'ph';\n        }\n        else if (type === 'websearch') {\n            typePart = 'w';\n        }\n        const configPart = config === undefined ? '' : `(${config})`;\n        this.url.searchParams.append(column, `${typePart}fts${configPart}.${query}`);\n        return this;\n    }\n    /**\n     * Match only rows where each column in `query` keys is equal to its\n     * associated value. Shorthand for multiple `.eq()`s.\n     *\n     * @param query - The object to filter with, with column names as keys mapped\n     * to their filter values\n     */\n    match(query) {\n        Object.entries(query).forEach(([column, value]) => {\n            this.url.searchParams.append(column, `eq.${value}`);\n        });\n        return this;\n    }\n    /**\n     * Match only rows which doesn't satisfy the filter.\n     *\n     * Unlike most filters, `opearator` and `value` are used as-is and need to\n     * follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure they are properly sanitized.\n     *\n     * @param column - The column to filter on\n     * @param operator - The operator to be negated to filter with, following\n     * PostgREST syntax\n     * @param value - The value to filter with, following PostgREST syntax\n     */\n    not(column, operator, value) {\n        this.url.searchParams.append(column, `not.${operator}.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows which satisfy at least one of the filters.\n     *\n     * Unlike most filters, `filters` is used as-is and needs to follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure it's properly sanitized.\n     *\n     * It's currently not possible to do an `.or()` filter across multiple tables.\n     *\n     * @param filters - The filters to use, following PostgREST syntax\n     * @param foreignTable - Set this to filter on foreign tables instead of the\n     * current table\n     */\n    or(filters, { foreignTable } = {}) {\n        const key = foreignTable ? `${foreignTable}.or` : 'or';\n        this.url.searchParams.append(key, `(${filters})`);\n        return this;\n    }\n    /**\n     * Match only rows which satisfy the filter. This is an escape hatch - you\n     * should use the specific filter methods wherever possible.\n     *\n     * Unlike most filters, `opearator` and `value` are used as-is and need to\n     * follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure they are properly sanitized.\n     *\n     * @param column - The column to filter on\n     * @param operator - The operator to filter with, following PostgREST syntax\n     * @param value - The value to filter with, following PostgREST syntax\n     */\n    filter(column, operator, value) {\n        this.url.searchParams.append(column, `${operator}.${value}`);\n        return this;\n    }\n}\n//# sourceMappingURL=PostgrestFilterBuilder.js.map","import PostgrestFilterBuilder from './PostgrestFilterBuilder';\nexport default class PostgrestQueryBuilder {\n    constructor(url, { headers = {}, schema, fetch, }) {\n        this.url = url;\n        this.headers = headers;\n        this.schema = schema;\n        this.fetch = fetch;\n    }\n    /**\n     * Perform a SELECT query on the table or view.\n     *\n     * @param columns - The columns to retrieve, separated by commas. Columns can be renamed when returned with `customName:columnName`\n     *\n     * @param options - Named parameters\n     *\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     *\n     * @param options.count - Count algorithm to use to count rows in the table or view.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    select(columns, { head = false, count, } = {}) {\n        const method = head ? 'HEAD' : 'GET';\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = (columns !== null && columns !== void 0 ? columns : '*')\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        if (count) {\n            this.headers['Prefer'] = `count=${count}`;\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an INSERT into the table or view.\n     *\n     * By default, inserted rows are not returned. To return it, chain the call\n     * with `.select()`.\n     *\n     * @param values - The values to insert. Pass an object to insert a single row\n     * or an array to insert multiple rows.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count inserted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     *\n     * @param options.defaultToNull - Make missing fields default to `null`.\n     * Otherwise, use the default value for the column.\n     */\n    insert(values, { count, defaultToNull = true, } = {}) {\n        const method = 'POST';\n        const prefersHeaders = [];\n        if (this.headers['Prefer']) {\n            prefersHeaders.push(this.headers['Prefer']);\n        }\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (!defaultToNull) {\n            prefersHeaders.push('missing=default');\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        if (Array.isArray(values)) {\n            const columns = values.reduce((acc, x) => acc.concat(Object.keys(x)), []);\n            if (columns.length > 0) {\n                const uniqueColumns = [...new Set(columns)].map((column) => `\"${column}\"`);\n                this.url.searchParams.set('columns', uniqueColumns.join(','));\n            }\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body: values,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an UPSERT on the table or view. Depending on the column(s) passed\n     * to `onConflict`, `.upsert()` allows you to perform the equivalent of\n     * `.insert()` if a row with the corresponding `onConflict` columns doesn't\n     * exist, or if it does exist, perform an alternative action depending on\n     * `ignoreDuplicates`.\n     *\n     * By default, upserted rows are not returned. To return it, chain the call\n     * with `.select()`.\n     *\n     * @param values - The values to upsert with. Pass an object to upsert a\n     * single row or an array to upsert multiple rows.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.onConflict - Comma-separated UNIQUE column(s) to specify how\n     * duplicate rows are determined. Two rows are duplicates if all the\n     * `onConflict` columns are equal.\n     *\n     * @param options.ignoreDuplicates - If `true`, duplicate rows are ignored. If\n     * `false`, duplicate rows are merged with existing rows.\n     *\n     * @param options.count - Count algorithm to use to count upserted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     *\n     * @param options.defaultToNull - Make missing fields default to `null`.\n     * Otherwise, use the default value for the column. This only applies when\n     * inserting new rows, not when merging with existing rows under\n     * `ignoreDuplicates: false`.\n     */\n    upsert(values, { onConflict, ignoreDuplicates = false, count, defaultToNull = true, } = {}) {\n        const method = 'POST';\n        const prefersHeaders = [`resolution=${ignoreDuplicates ? 'ignore' : 'merge'}-duplicates`];\n        if (onConflict !== undefined)\n            this.url.searchParams.set('on_conflict', onConflict);\n        if (this.headers['Prefer']) {\n            prefersHeaders.push(this.headers['Prefer']);\n        }\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (!defaultToNull) {\n            prefersHeaders.push('missing=default');\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        if (Array.isArray(values)) {\n            const columns = values.reduce((acc, x) => acc.concat(Object.keys(x)), []);\n            if (columns.length > 0) {\n                const uniqueColumns = [...new Set(columns)].map((column) => `\"${column}\"`);\n                this.url.searchParams.set('columns', uniqueColumns.join(','));\n            }\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body: values,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an UPDATE on the table or view.\n     *\n     * By default, updated rows are not returned. To return it, chain the call\n     * with `.select()` after filters.\n     *\n     * @param values - The values to update with\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count updated rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    update(values, { count, } = {}) {\n        const method = 'PATCH';\n        const prefersHeaders = [];\n        if (this.headers['Prefer']) {\n            prefersHeaders.push(this.headers['Prefer']);\n        }\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body: values,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform a DELETE on the table or view.\n     *\n     * By default, deleted rows are not returned. To return it, chain the call\n     * with `.select()` after filters.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count deleted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    delete({ count, } = {}) {\n        const method = 'DELETE';\n        const prefersHeaders = [];\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n}\n//# sourceMappingURL=PostgrestQueryBuilder.js.map","export const version = '1.7.0';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `postgrest-js/${version}` };\n//# sourceMappingURL=constants.js.map","import PostgrestQueryBuilder from './PostgrestQueryBuilder';\nimport PostgrestFilterBuilder from './PostgrestFilterBuilder';\nimport { DEFAULT_HEADERS } from './constants';\n/**\n * PostgREST client.\n *\n * @typeParam Database - Types for the schema from the [type\n * generator](https://supabase.com/docs/reference/javascript/next/typescript-support)\n *\n * @typeParam SchemaName - Postgres schema to switch to. Must be a string\n * literal, the same one passed to the constructor. If the schema is not\n * `\"public\"`, this must be supplied manually.\n */\nexport default class PostgrestClient {\n    // TODO: Add back shouldThrowOnError once we figure out the typings\n    /**\n     * Creates a PostgREST client.\n     *\n     * @param url - URL of the PostgREST endpoint\n     * @param options - Named parameters\n     * @param options.headers - Custom headers\n     * @param options.schema - Postgres schema to switch to\n     * @param options.fetch - Custom fetch\n     */\n    constructor(url, { headers = {}, schema, fetch, } = {}) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n        this.schema = schema;\n        this.fetch = fetch;\n    }\n    /**\n     * Perform a query on a table or a view.\n     *\n     * @param relation - The table or view name to query\n     */\n    from(relation) {\n        const url = new URL(`${this.url}/${relation}`);\n        return new PostgrestQueryBuilder(url, {\n            headers: Object.assign({}, this.headers),\n            schema: this.schema,\n            fetch: this.fetch,\n        });\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn - The function name to call\n     * @param args - The arguments to pass to the function call\n     * @param options - Named parameters\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     * @param options.count - Count algorithm to use to count rows returned by the\n     * function. Only applicable for [set-returning\n     * functions](https://www.postgresql.org/docs/current/functions-srf.html).\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    rpc(fn, args = {}, { head = false, count, } = {}) {\n        let method;\n        const url = new URL(`${this.url}/rpc/${fn}`);\n        let body;\n        if (head) {\n            method = 'HEAD';\n            Object.entries(args).forEach(([name, value]) => {\n                url.searchParams.append(name, `${value}`);\n            });\n        }\n        else {\n            method = 'POST';\n            body = args;\n        }\n        const headers = Object.assign({}, this.headers);\n        if (count) {\n            headers['Prefer'] = `count=${count}`;\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url,\n            headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n}\n//# sourceMappingURL=PostgrestClient.js.map","export { default as PostgrestClient } from './PostgrestClient';\nexport { default as PostgrestQueryBuilder } from './PostgrestQueryBuilder';\nexport { default as PostgrestFilterBuilder } from './PostgrestFilterBuilder';\nexport { default as PostgrestTransformBuilder } from './PostgrestTransformBuilder';\nexport { default as PostgrestBuilder } from './PostgrestBuilder';\n//# sourceMappingURL=index.js.map","export const version = '2.7.2';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `realtime-js/${version}` };\nexport const VSN = '1.0.0';\nexport const DEFAULT_TIMEOUT = 10000;\nexport const WS_CLOSE_NORMAL = 1000;\nexport var SOCKET_STATES;\n(function (SOCKET_STATES) {\n    SOCKET_STATES[SOCKET_STATES[\"connecting\"] = 0] = \"connecting\";\n    SOCKET_STATES[SOCKET_STATES[\"open\"] = 1] = \"open\";\n    SOCKET_STATES[SOCKET_STATES[\"closing\"] = 2] = \"closing\";\n    SOCKET_STATES[SOCKET_STATES[\"closed\"] = 3] = \"closed\";\n})(SOCKET_STATES || (SOCKET_STATES = {}));\nexport var CHANNEL_STATES;\n(function (CHANNEL_STATES) {\n    CHANNEL_STATES[\"closed\"] = \"closed\";\n    CHANNEL_STATES[\"errored\"] = \"errored\";\n    CHANNEL_STATES[\"joined\"] = \"joined\";\n    CHANNEL_STATES[\"joining\"] = \"joining\";\n    CHANNEL_STATES[\"leaving\"] = \"leaving\";\n})(CHANNEL_STATES || (CHANNEL_STATES = {}));\nexport var CHANNEL_EVENTS;\n(function (CHANNEL_EVENTS) {\n    CHANNEL_EVENTS[\"close\"] = \"phx_close\";\n    CHANNEL_EVENTS[\"error\"] = \"phx_error\";\n    CHANNEL_EVENTS[\"join\"] = \"phx_join\";\n    CHANNEL_EVENTS[\"reply\"] = \"phx_reply\";\n    CHANNEL_EVENTS[\"leave\"] = \"phx_leave\";\n    CHANNEL_EVENTS[\"access_token\"] = \"access_token\";\n})(CHANNEL_EVENTS || (CHANNEL_EVENTS = {}));\nexport var TRANSPORTS;\n(function (TRANSPORTS) {\n    TRANSPORTS[\"websocket\"] = \"websocket\";\n})(TRANSPORTS || (TRANSPORTS = {}));\nexport var CONNECTION_STATE;\n(function (CONNECTION_STATE) {\n    CONNECTION_STATE[\"Connecting\"] = \"connecting\";\n    CONNECTION_STATE[\"Open\"] = \"open\";\n    CONNECTION_STATE[\"Closing\"] = \"closing\";\n    CONNECTION_STATE[\"Closed\"] = \"closed\";\n})(CONNECTION_STATE || (CONNECTION_STATE = {}));\n//# sourceMappingURL=constants.js.map","/**\n * Creates a timer that accepts a `timerCalc` function to perform calculated timeout retries, such as exponential backoff.\n *\n * @example\n *    let reconnectTimer = new Timer(() => this.connect(), function(tries){\n *      return [1000, 5000, 10000][tries - 1] || 10000\n *    })\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n *    reconnectTimer.scheduleTimeout() // fires after 5000\n *    reconnectTimer.reset()\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n */\nexport default class Timer {\n    constructor(callback, timerCalc) {\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n        this.timer = undefined;\n        this.tries = 0;\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n    }\n    reset() {\n        this.tries = 0;\n        clearTimeout(this.timer);\n    }\n    // Cancels any previous scheduleTimeout and schedules callback\n    scheduleTimeout() {\n        clearTimeout(this.timer);\n        this.timer = setTimeout(() => {\n            this.tries = this.tries + 1;\n            this.callback();\n        }, this.timerCalc(this.tries + 1));\n    }\n}\n//# sourceMappingURL=timer.js.map","// This file draws heavily from https://github.com/phoenixframework/phoenix/commit/cf098e9cf7a44ee6479d31d911a97d3c7430c6fe\n// License: https://github.com/phoenixframework/phoenix/blob/master/LICENSE.md\nexport default class Serializer {\n    constructor() {\n        this.HEADER_LENGTH = 1;\n    }\n    decode(rawPayload, callback) {\n        if (rawPayload.constructor === ArrayBuffer) {\n            return callback(this._binaryDecode(rawPayload));\n        }\n        if (typeof rawPayload === 'string') {\n            return callback(JSON.parse(rawPayload));\n        }\n        return callback({});\n    }\n    _binaryDecode(buffer) {\n        const view = new DataView(buffer);\n        const decoder = new TextDecoder();\n        return this._decodeBroadcast(buffer, view, decoder);\n    }\n    _decodeBroadcast(buffer, view, decoder) {\n        const topicSize = view.getUint8(1);\n        const eventSize = view.getUint8(2);\n        let offset = this.HEADER_LENGTH + 2;\n        const topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n        offset = offset + topicSize;\n        const event = decoder.decode(buffer.slice(offset, offset + eventSize));\n        offset = offset + eventSize;\n        const data = JSON.parse(decoder.decode(buffer.slice(offset, buffer.byteLength)));\n        return { ref: null, topic: topic, event: event, payload: data };\n    }\n}\n//# sourceMappingURL=serializer.js.map","import { DEFAULT_TIMEOUT } from '../lib/constants';\nexport default class Push {\n    /**\n     * Initializes the Push\n     *\n     * @param channel The Channel\n     * @param event The event, for example `\"phx_join\"`\n     * @param payload The payload, for example `{user_id: 123}`\n     * @param timeout The push timeout in milliseconds\n     */\n    constructor(channel, event, payload = {}, timeout = DEFAULT_TIMEOUT) {\n        this.channel = channel;\n        this.event = event;\n        this.payload = payload;\n        this.timeout = timeout;\n        this.sent = false;\n        this.timeoutTimer = undefined;\n        this.ref = '';\n        this.receivedResp = null;\n        this.recHooks = [];\n        this.refEvent = null;\n        this.rateLimited = false;\n    }\n    resend(timeout) {\n        this.timeout = timeout;\n        this._cancelRefEvent();\n        this.ref = '';\n        this.refEvent = null;\n        this.receivedResp = null;\n        this.sent = false;\n        this.send();\n    }\n    send() {\n        if (this._hasReceived('timeout')) {\n            return;\n        }\n        this.startTimeout();\n        this.sent = true;\n        const status = this.channel.socket.push({\n            topic: this.channel.topic,\n            event: this.event,\n            payload: this.payload,\n            ref: this.ref,\n            join_ref: this.channel._joinRef(),\n        });\n        if (status === 'rate limited') {\n            this.rateLimited = true;\n        }\n    }\n    updatePayload(payload) {\n        this.payload = Object.assign(Object.assign({}, this.payload), payload);\n    }\n    receive(status, callback) {\n        var _a;\n        if (this._hasReceived(status)) {\n            callback((_a = this.receivedResp) === null || _a === void 0 ? void 0 : _a.response);\n        }\n        this.recHooks.push({ status, callback });\n        return this;\n    }\n    startTimeout() {\n        if (this.timeoutTimer) {\n            return;\n        }\n        this.ref = this.channel.socket._makeRef();\n        this.refEvent = this.channel._replyEventName(this.ref);\n        const callback = (payload) => {\n            this._cancelRefEvent();\n            this._cancelTimeout();\n            this.receivedResp = payload;\n            this._matchReceive(payload);\n        };\n        this.channel._on(this.refEvent, {}, callback);\n        this.timeoutTimer = setTimeout(() => {\n            this.trigger('timeout', {});\n        }, this.timeout);\n    }\n    trigger(status, response) {\n        if (this.refEvent)\n            this.channel._trigger(this.refEvent, { status, response });\n    }\n    destroy() {\n        this._cancelRefEvent();\n        this._cancelTimeout();\n    }\n    _cancelRefEvent() {\n        if (!this.refEvent) {\n            return;\n        }\n        this.channel._off(this.refEvent, {});\n    }\n    _cancelTimeout() {\n        clearTimeout(this.timeoutTimer);\n        this.timeoutTimer = undefined;\n    }\n    _matchReceive({ status, response, }) {\n        this.recHooks\n            .filter((h) => h.status === status)\n            .forEach((h) => h.callback(response));\n    }\n    _hasReceived(status) {\n        return this.receivedResp && this.receivedResp.status === status;\n    }\n}\n//# sourceMappingURL=push.js.map","/*\n  This file draws heavily from https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/assets/js/phoenix/presence.js\n  License: https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/LICENSE.md\n*/\nexport var REALTIME_PRESENCE_LISTEN_EVENTS;\n(function (REALTIME_PRESENCE_LISTEN_EVENTS) {\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"SYNC\"] = \"sync\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"JOIN\"] = \"join\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"LEAVE\"] = \"leave\";\n})(REALTIME_PRESENCE_LISTEN_EVENTS || (REALTIME_PRESENCE_LISTEN_EVENTS = {}));\nexport default class RealtimePresence {\n    /**\n     * Initializes the Presence.\n     *\n     * @param channel - The RealtimeChannel\n     * @param opts - The options,\n     *        for example `{events: {state: 'state', diff: 'diff'}}`\n     */\n    constructor(channel, opts) {\n        this.channel = channel;\n        this.state = {};\n        this.pendingDiffs = [];\n        this.joinRef = null;\n        this.caller = {\n            onJoin: () => { },\n            onLeave: () => { },\n            onSync: () => { },\n        };\n        const events = (opts === null || opts === void 0 ? void 0 : opts.events) || {\n            state: 'presence_state',\n            diff: 'presence_diff',\n        };\n        this.channel._on(events.state, {}, (newState) => {\n            const { onJoin, onLeave, onSync } = this.caller;\n            this.joinRef = this.channel._joinRef();\n            this.state = RealtimePresence.syncState(this.state, newState, onJoin, onLeave);\n            this.pendingDiffs.forEach((diff) => {\n                this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n            });\n            this.pendingDiffs = [];\n            onSync();\n        });\n        this.channel._on(events.diff, {}, (diff) => {\n            const { onJoin, onLeave, onSync } = this.caller;\n            if (this.inPendingSyncState()) {\n                this.pendingDiffs.push(diff);\n            }\n            else {\n                this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n                onSync();\n            }\n        });\n        this.onJoin((key, currentPresences, newPresences) => {\n            this.channel._trigger('presence', {\n                event: 'join',\n                key,\n                currentPresences,\n                newPresences,\n            });\n        });\n        this.onLeave((key, currentPresences, leftPresences) => {\n            this.channel._trigger('presence', {\n                event: 'leave',\n                key,\n                currentPresences,\n                leftPresences,\n            });\n        });\n        this.onSync(() => {\n            this.channel._trigger('presence', { event: 'sync' });\n        });\n    }\n    /**\n     * Used to sync the list of presences on the server with the\n     * client's state.\n     *\n     * An optional `onJoin` and `onLeave` callback can be provided to\n     * react to changes in the client's local presences across\n     * disconnects and reconnects with the server.\n     *\n     * @internal\n     */\n    static syncState(currentState, newState, onJoin, onLeave) {\n        const state = this.cloneDeep(currentState);\n        const transformedState = this.transformState(newState);\n        const joins = {};\n        const leaves = {};\n        this.map(state, (key, presences) => {\n            if (!transformedState[key]) {\n                leaves[key] = presences;\n            }\n        });\n        this.map(transformedState, (key, newPresences) => {\n            const currentPresences = state[key];\n            if (currentPresences) {\n                const newPresenceRefs = newPresences.map((m) => m.presence_ref);\n                const curPresenceRefs = currentPresences.map((m) => m.presence_ref);\n                const joinedPresences = newPresences.filter((m) => curPresenceRefs.indexOf(m.presence_ref) < 0);\n                const leftPresences = currentPresences.filter((m) => newPresenceRefs.indexOf(m.presence_ref) < 0);\n                if (joinedPresences.length > 0) {\n                    joins[key] = joinedPresences;\n                }\n                if (leftPresences.length > 0) {\n                    leaves[key] = leftPresences;\n                }\n            }\n            else {\n                joins[key] = newPresences;\n            }\n        });\n        return this.syncDiff(state, { joins, leaves }, onJoin, onLeave);\n    }\n    /**\n     * Used to sync a diff of presence join and leave events from the\n     * server, as they happen.\n     *\n     * Like `syncState`, `syncDiff` accepts optional `onJoin` and\n     * `onLeave` callbacks to react to a user joining or leaving from a\n     * device.\n     *\n     * @internal\n     */\n    static syncDiff(state, diff, onJoin, onLeave) {\n        const { joins, leaves } = {\n            joins: this.transformState(diff.joins),\n            leaves: this.transformState(diff.leaves),\n        };\n        if (!onJoin) {\n            onJoin = () => { };\n        }\n        if (!onLeave) {\n            onLeave = () => { };\n        }\n        this.map(joins, (key, newPresences) => {\n            var _a;\n            const currentPresences = (_a = state[key]) !== null && _a !== void 0 ? _a : [];\n            state[key] = this.cloneDeep(newPresences);\n            if (currentPresences.length > 0) {\n                const joinedPresenceRefs = state[key].map((m) => m.presence_ref);\n                const curPresences = currentPresences.filter((m) => joinedPresenceRefs.indexOf(m.presence_ref) < 0);\n                state[key].unshift(...curPresences);\n            }\n            onJoin(key, currentPresences, newPresences);\n        });\n        this.map(leaves, (key, leftPresences) => {\n            let currentPresences = state[key];\n            if (!currentPresences)\n                return;\n            const presenceRefsToRemove = leftPresences.map((m) => m.presence_ref);\n            currentPresences = currentPresences.filter((m) => presenceRefsToRemove.indexOf(m.presence_ref) < 0);\n            state[key] = currentPresences;\n            onLeave(key, currentPresences, leftPresences);\n            if (currentPresences.length === 0)\n                delete state[key];\n        });\n        return state;\n    }\n    /** @internal */\n    static map(obj, func) {\n        return Object.getOwnPropertyNames(obj).map((key) => func(key, obj[key]));\n    }\n    /**\n     * Remove 'metas' key\n     * Change 'phx_ref' to 'presence_ref'\n     * Remove 'phx_ref' and 'phx_ref_prev'\n     *\n     * @example\n     * // returns {\n     *  abc123: [\n     *    { presence_ref: '2', user_id: 1 },\n     *    { presence_ref: '3', user_id: 2 }\n     *  ]\n     * }\n     * RealtimePresence.transformState({\n     *  abc123: {\n     *    metas: [\n     *      { phx_ref: '2', phx_ref_prev: '1' user_id: 1 },\n     *      { phx_ref: '3', user_id: 2 }\n     *    ]\n     *  }\n     * })\n     *\n     * @internal\n     */\n    static transformState(state) {\n        state = this.cloneDeep(state);\n        return Object.getOwnPropertyNames(state).reduce((newState, key) => {\n            const presences = state[key];\n            if ('metas' in presences) {\n                newState[key] = presences.metas.map((presence) => {\n                    presence['presence_ref'] = presence['phx_ref'];\n                    delete presence['phx_ref'];\n                    delete presence['phx_ref_prev'];\n                    return presence;\n                });\n            }\n            else {\n                newState[key] = presences;\n            }\n            return newState;\n        }, {});\n    }\n    /** @internal */\n    static cloneDeep(obj) {\n        return JSON.parse(JSON.stringify(obj));\n    }\n    /** @internal */\n    onJoin(callback) {\n        this.caller.onJoin = callback;\n    }\n    /** @internal */\n    onLeave(callback) {\n        this.caller.onLeave = callback;\n    }\n    /** @internal */\n    onSync(callback) {\n        this.caller.onSync = callback;\n    }\n    /** @internal */\n    inPendingSyncState() {\n        return !this.joinRef || this.joinRef !== this.channel._joinRef();\n    }\n}\n//# sourceMappingURL=RealtimePresence.js.map","/**\n * Helpers to convert the change Payload into native JS types.\n */\n// Adapted from epgsql (src/epgsql_binary.erl), this module licensed under\n// 3-clause BSD found here: https://raw.githubusercontent.com/epgsql/epgsql/devel/LICENSE\nexport var PostgresTypes;\n(function (PostgresTypes) {\n    PostgresTypes[\"abstime\"] = \"abstime\";\n    PostgresTypes[\"bool\"] = \"bool\";\n    PostgresTypes[\"date\"] = \"date\";\n    PostgresTypes[\"daterange\"] = \"daterange\";\n    PostgresTypes[\"float4\"] = \"float4\";\n    PostgresTypes[\"float8\"] = \"float8\";\n    PostgresTypes[\"int2\"] = \"int2\";\n    PostgresTypes[\"int4\"] = \"int4\";\n    PostgresTypes[\"int4range\"] = \"int4range\";\n    PostgresTypes[\"int8\"] = \"int8\";\n    PostgresTypes[\"int8range\"] = \"int8range\";\n    PostgresTypes[\"json\"] = \"json\";\n    PostgresTypes[\"jsonb\"] = \"jsonb\";\n    PostgresTypes[\"money\"] = \"money\";\n    PostgresTypes[\"numeric\"] = \"numeric\";\n    PostgresTypes[\"oid\"] = \"oid\";\n    PostgresTypes[\"reltime\"] = \"reltime\";\n    PostgresTypes[\"text\"] = \"text\";\n    PostgresTypes[\"time\"] = \"time\";\n    PostgresTypes[\"timestamp\"] = \"timestamp\";\n    PostgresTypes[\"timestamptz\"] = \"timestamptz\";\n    PostgresTypes[\"timetz\"] = \"timetz\";\n    PostgresTypes[\"tsrange\"] = \"tsrange\";\n    PostgresTypes[\"tstzrange\"] = \"tstzrange\";\n})(PostgresTypes || (PostgresTypes = {}));\n/**\n * Takes an array of columns and an object of string values then converts each string value\n * to its mapped type.\n *\n * @param {{name: String, type: String}[]} columns\n * @param {Object} record\n * @param {Object} options The map of various options that can be applied to the mapper\n * @param {Array} options.skipTypes The array of types that should not be converted\n *\n * @example convertChangeData([{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age:'33'}, {})\n * //=>{ first_name: 'Paul', age: 33 }\n */\nexport const convertChangeData = (columns, record, options = {}) => {\n    var _a;\n    const skipTypes = (_a = options.skipTypes) !== null && _a !== void 0 ? _a : [];\n    return Object.keys(record).reduce((acc, rec_key) => {\n        acc[rec_key] = convertColumn(rec_key, columns, record, skipTypes);\n        return acc;\n    }, {});\n};\n/**\n * Converts the value of an individual column.\n *\n * @param {String} columnName The column that you want to convert\n * @param {{name: String, type: String}[]} columns All of the columns\n * @param {Object} record The map of string values\n * @param {Array} skipTypes An array of types that should not be converted\n * @return {object} Useless information\n *\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, [])\n * //=> 33\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, ['int4'])\n * //=> \"33\"\n */\nexport const convertColumn = (columnName, columns, record, skipTypes) => {\n    const column = columns.find((x) => x.name === columnName);\n    const colType = column === null || column === void 0 ? void 0 : column.type;\n    const value = record[columnName];\n    if (colType && !skipTypes.includes(colType)) {\n        return convertCell(colType, value);\n    }\n    return noop(value);\n};\n/**\n * If the value of the cell is `null`, returns null.\n * Otherwise converts the string value to the correct type.\n * @param {String} type A postgres column type\n * @param {String} value The cell value\n *\n * @example convertCell('bool', 't')\n * //=> true\n * @example convertCell('int8', '10')\n * //=> 10\n * @example convertCell('_int4', '{1,2,3,4}')\n * //=> [1,2,3,4]\n */\nexport const convertCell = (type, value) => {\n    // if data type is an array\n    if (type.charAt(0) === '_') {\n        const dataType = type.slice(1, type.length);\n        return toArray(value, dataType);\n    }\n    // If not null, convert to correct type.\n    switch (type) {\n        case PostgresTypes.bool:\n            return toBoolean(value);\n        case PostgresTypes.float4:\n        case PostgresTypes.float8:\n        case PostgresTypes.int2:\n        case PostgresTypes.int4:\n        case PostgresTypes.int8:\n        case PostgresTypes.numeric:\n        case PostgresTypes.oid:\n            return toNumber(value);\n        case PostgresTypes.json:\n        case PostgresTypes.jsonb:\n            return toJson(value);\n        case PostgresTypes.timestamp:\n            return toTimestampString(value); // Format to be consistent with PostgREST\n        case PostgresTypes.abstime: // To allow users to cast it based on Timezone\n        case PostgresTypes.date: // To allow users to cast it based on Timezone\n        case PostgresTypes.daterange:\n        case PostgresTypes.int4range:\n        case PostgresTypes.int8range:\n        case PostgresTypes.money:\n        case PostgresTypes.reltime: // To allow users to cast it based on Timezone\n        case PostgresTypes.text:\n        case PostgresTypes.time: // To allow users to cast it based on Timezone\n        case PostgresTypes.timestamptz: // To allow users to cast it based on Timezone\n        case PostgresTypes.timetz: // To allow users to cast it based on Timezone\n        case PostgresTypes.tsrange:\n        case PostgresTypes.tstzrange:\n            return noop(value);\n        default:\n            // Return the value for remaining types\n            return noop(value);\n    }\n};\nconst noop = (value) => {\n    return value;\n};\nexport const toBoolean = (value) => {\n    switch (value) {\n        case 't':\n            return true;\n        case 'f':\n            return false;\n        default:\n            return value;\n    }\n};\nexport const toNumber = (value) => {\n    if (typeof value === 'string') {\n        const parsedValue = parseFloat(value);\n        if (!Number.isNaN(parsedValue)) {\n            return parsedValue;\n        }\n    }\n    return value;\n};\nexport const toJson = (value) => {\n    if (typeof value === 'string') {\n        try {\n            return JSON.parse(value);\n        }\n        catch (error) {\n            console.log(`JSON parse error: ${error}`);\n            return value;\n        }\n    }\n    return value;\n};\n/**\n * Converts a Postgres Array into a native JS array\n *\n * @example toArray('{}', 'int4')\n * //=> []\n * @example toArray('{\"[2021-01-01,2021-12-31)\",\"(2021-01-01,2021-12-32]\"}', 'daterange')\n * //=> ['[2021-01-01,2021-12-31)', '(2021-01-01,2021-12-32]']\n * @example toArray([1,2,3,4], 'int4')\n * //=> [1,2,3,4]\n */\nexport const toArray = (value, type) => {\n    if (typeof value !== 'string') {\n        return value;\n    }\n    const lastIdx = value.length - 1;\n    const closeBrace = value[lastIdx];\n    const openBrace = value[0];\n    // Confirm value is a Postgres array by checking curly brackets\n    if (openBrace === '{' && closeBrace === '}') {\n        let arr;\n        const valTrim = value.slice(1, lastIdx);\n        // TODO: find a better solution to separate Postgres array data\n        try {\n            arr = JSON.parse('[' + valTrim + ']');\n        }\n        catch (_) {\n            // WARNING: splitting on comma does not cover all edge cases\n            arr = valTrim ? valTrim.split(',') : [];\n        }\n        return arr.map((val) => convertCell(type, val));\n    }\n    return value;\n};\n/**\n * Fixes timestamp to be ISO-8601. Swaps the space between the date and time for a 'T'\n * See https://github.com/supabase/supabase/issues/18\n *\n * @example toTimestampString('2019-09-10 00:00:00')\n * //=> '2019-09-10T00:00:00'\n */\nexport const toTimestampString = (value) => {\n    if (typeof value === 'string') {\n        return value.replace(' ', 'T');\n    }\n    return value;\n};\n//# sourceMappingURL=transformers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CHANNEL_EVENTS, CHANNEL_STATES } from './lib/constants';\nimport Push from './lib/push';\nimport Timer from './lib/timer';\nimport RealtimePresence from './RealtimePresence';\nimport * as Transformers from './lib/transformers';\nexport var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;\n(function (REALTIME_POSTGRES_CHANGES_LISTEN_EVENT) {\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"ALL\"] = \"*\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"INSERT\"] = \"INSERT\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"UPDATE\"] = \"UPDATE\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"DELETE\"] = \"DELETE\";\n})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT || (REALTIME_POSTGRES_CHANGES_LISTEN_EVENT = {}));\nexport var REALTIME_LISTEN_TYPES;\n(function (REALTIME_LISTEN_TYPES) {\n    REALTIME_LISTEN_TYPES[\"BROADCAST\"] = \"broadcast\";\n    REALTIME_LISTEN_TYPES[\"PRESENCE\"] = \"presence\";\n    /**\n     * listen to Postgres changes.\n     */\n    REALTIME_LISTEN_TYPES[\"POSTGRES_CHANGES\"] = \"postgres_changes\";\n})(REALTIME_LISTEN_TYPES || (REALTIME_LISTEN_TYPES = {}));\nexport var REALTIME_SUBSCRIBE_STATES;\n(function (REALTIME_SUBSCRIBE_STATES) {\n    REALTIME_SUBSCRIBE_STATES[\"SUBSCRIBED\"] = \"SUBSCRIBED\";\n    REALTIME_SUBSCRIBE_STATES[\"TIMED_OUT\"] = \"TIMED_OUT\";\n    REALTIME_SUBSCRIBE_STATES[\"CLOSED\"] = \"CLOSED\";\n    REALTIME_SUBSCRIBE_STATES[\"CHANNEL_ERROR\"] = \"CHANNEL_ERROR\";\n})(REALTIME_SUBSCRIBE_STATES || (REALTIME_SUBSCRIBE_STATES = {}));\n/** A channel is the basic building block of Realtime\n * and narrows the scope of data flow to subscribed clients.\n * You can think of a channel as a chatroom where participants are able to see who's online\n * and send and receive messages.\n **/\nexport default class RealtimeChannel {\n    constructor(\n    /** Topic name can be any string. */\n    topic, params = { config: {} }, socket) {\n        this.topic = topic;\n        this.params = params;\n        this.socket = socket;\n        this.bindings = {};\n        this.state = CHANNEL_STATES.closed;\n        this.joinedOnce = false;\n        this.pushBuffer = [];\n        this.params.config = Object.assign({\n            broadcast: { ack: false, self: false },\n            presence: { key: '' },\n        }, params.config);\n        this.timeout = this.socket.timeout;\n        this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);\n        this.rejoinTimer = new Timer(() => this._rejoinUntilConnected(), this.socket.reconnectAfterMs);\n        this.joinPush.receive('ok', () => {\n            this.state = CHANNEL_STATES.joined;\n            this.rejoinTimer.reset();\n            this.pushBuffer.forEach((pushEvent) => pushEvent.send());\n            this.pushBuffer = [];\n        });\n        this._onClose(() => {\n            this.rejoinTimer.reset();\n            this.socket.log('channel', `close ${this.topic} ${this._joinRef()}`);\n            this.state = CHANNEL_STATES.closed;\n            this.socket._remove(this);\n        });\n        this._onError((reason) => {\n            if (this._isLeaving() || this._isClosed()) {\n                return;\n            }\n            this.socket.log('channel', `error ${this.topic}`, reason);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this.joinPush.receive('timeout', () => {\n            if (!this._isJoining()) {\n                return;\n            }\n            this.socket.log('channel', `timeout ${this.topic}`, this.joinPush.timeout);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this._on(CHANNEL_EVENTS.reply, {}, (payload, ref) => {\n            this._trigger(this._replyEventName(ref), payload);\n        });\n        this.presence = new RealtimePresence(this);\n    }\n    /** Subscribe registers your client with the server */\n    subscribe(callback, timeout = this.timeout) {\n        var _a, _b;\n        if (this.joinedOnce) {\n            throw `tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance`;\n        }\n        else {\n            const { config: { broadcast, presence }, } = this.params;\n            this._onError((e) => callback && callback('CHANNEL_ERROR', e));\n            this._onClose(() => callback && callback('CLOSED'));\n            const accessTokenPayload = {};\n            const config = {\n                broadcast,\n                presence,\n                postgres_changes: (_b = (_a = this.bindings.postgres_changes) === null || _a === void 0 ? void 0 : _a.map((r) => r.filter)) !== null && _b !== void 0 ? _b : [],\n            };\n            if (this.socket.accessToken) {\n                accessTokenPayload.access_token = this.socket.accessToken;\n            }\n            this.updateJoinPayload(Object.assign({ config }, accessTokenPayload));\n            this.joinedOnce = true;\n            this._rejoin(timeout);\n            this.joinPush\n                .receive('ok', ({ postgres_changes: serverPostgresFilters, }) => {\n                var _a;\n                this.socket.accessToken &&\n                    this.socket.setAuth(this.socket.accessToken);\n                if (serverPostgresFilters === undefined) {\n                    callback && callback('SUBSCRIBED');\n                    return;\n                }\n                else {\n                    const clientPostgresBindings = this.bindings.postgres_changes;\n                    const bindingsLen = (_a = clientPostgresBindings === null || clientPostgresBindings === void 0 ? void 0 : clientPostgresBindings.length) !== null && _a !== void 0 ? _a : 0;\n                    const newPostgresBindings = [];\n                    for (let i = 0; i < bindingsLen; i++) {\n                        const clientPostgresBinding = clientPostgresBindings[i];\n                        const { filter: { event, schema, table, filter }, } = clientPostgresBinding;\n                        const serverPostgresFilter = serverPostgresFilters && serverPostgresFilters[i];\n                        if (serverPostgresFilter &&\n                            serverPostgresFilter.event === event &&\n                            serverPostgresFilter.schema === schema &&\n                            serverPostgresFilter.table === table &&\n                            serverPostgresFilter.filter === filter) {\n                            newPostgresBindings.push(Object.assign(Object.assign({}, clientPostgresBinding), { id: serverPostgresFilter.id }));\n                        }\n                        else {\n                            this.unsubscribe();\n                            callback &&\n                                callback('CHANNEL_ERROR', new Error('mismatch between server and client bindings for postgres changes'));\n                            return;\n                        }\n                    }\n                    this.bindings.postgres_changes = newPostgresBindings;\n                    callback && callback('SUBSCRIBED');\n                    return;\n                }\n            })\n                .receive('error', (error) => {\n                callback &&\n                    callback('CHANNEL_ERROR', new Error(JSON.stringify(Object.values(error).join(', ') || 'error')));\n                return;\n            })\n                .receive('timeout', () => {\n                callback && callback('TIMED_OUT');\n                return;\n            });\n        }\n        return this;\n    }\n    presenceState() {\n        return this.presence.state;\n    }\n    track(payload, opts = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.send({\n                type: 'presence',\n                event: 'track',\n                payload,\n            }, opts.timeout || this.timeout);\n        });\n    }\n    untrack(opts = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.send({\n                type: 'presence',\n                event: 'untrack',\n            }, opts);\n        });\n    }\n    on(type, filter, callback) {\n        return this._on(type, filter, callback);\n    }\n    send(payload, opts = {}) {\n        return new Promise((resolve) => {\n            var _a, _b, _c;\n            const push = this._push(payload.type, payload, opts.timeout || this.timeout);\n            if (push.rateLimited) {\n                resolve('rate limited');\n            }\n            if (payload.type === 'broadcast' &&\n                !((_c = (_b = (_a = this.params) === null || _a === void 0 ? void 0 : _a.config) === null || _b === void 0 ? void 0 : _b.broadcast) === null || _c === void 0 ? void 0 : _c.ack)) {\n                resolve('ok');\n            }\n            push.receive('ok', () => resolve('ok'));\n            push.receive('timeout', () => resolve('timed out'));\n        });\n    }\n    updateJoinPayload(payload) {\n        this.joinPush.updatePayload(payload);\n    }\n    /**\n     * Leaves the channel.\n     *\n     * Unsubscribes from server events, and instructs channel to terminate on server.\n     * Triggers onClose() hooks.\n     *\n     * To receive leave acknowledgements, use the a `receive` hook to bind to the server ack, ie:\n     * channel.unsubscribe().receive(\"ok\", () => alert(\"left!\") )\n     */\n    unsubscribe(timeout = this.timeout) {\n        this.state = CHANNEL_STATES.leaving;\n        const onClose = () => {\n            this.socket.log('channel', `leave ${this.topic}`);\n            this._trigger(CHANNEL_EVENTS.close, 'leave', this._joinRef());\n        };\n        this.rejoinTimer.reset();\n        // Destroy joinPush to avoid connection timeouts during unscription phase\n        this.joinPush.destroy();\n        return new Promise((resolve) => {\n            const leavePush = new Push(this, CHANNEL_EVENTS.leave, {}, timeout);\n            leavePush\n                .receive('ok', () => {\n                onClose();\n                resolve('ok');\n            })\n                .receive('timeout', () => {\n                onClose();\n                resolve('timed out');\n            })\n                .receive('error', () => {\n                resolve('error');\n            });\n            leavePush.send();\n            if (!this._canPush()) {\n                leavePush.trigger('ok', {});\n            }\n        });\n    }\n    /** @internal */\n    _push(event, payload, timeout = this.timeout) {\n        if (!this.joinedOnce) {\n            throw `tried to push '${event}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;\n        }\n        let pushEvent = new Push(this, event, payload, timeout);\n        if (this._canPush()) {\n            pushEvent.send();\n        }\n        else {\n            pushEvent.startTimeout();\n            this.pushBuffer.push(pushEvent);\n        }\n        return pushEvent;\n    }\n    /**\n     * Overridable message hook\n     *\n     * Receives all events for specialized message handling before dispatching to the channel callbacks.\n     * Must return the payload, modified or unmodified.\n     *\n     * @internal\n     */\n    _onMessage(_event, payload, _ref) {\n        return payload;\n    }\n    /** @internal */\n    _isMember(topic) {\n        return this.topic === topic;\n    }\n    /** @internal */\n    _joinRef() {\n        return this.joinPush.ref;\n    }\n    /** @internal */\n    _trigger(type, payload, ref) {\n        var _a, _b;\n        const typeLower = type.toLocaleLowerCase();\n        const { close, error, leave, join } = CHANNEL_EVENTS;\n        const events = [close, error, leave, join];\n        if (ref && events.indexOf(typeLower) >= 0 && ref !== this._joinRef()) {\n            return;\n        }\n        let handledPayload = this._onMessage(typeLower, payload, ref);\n        if (payload && !handledPayload) {\n            throw 'channel onMessage callbacks must return the payload, modified or unmodified';\n        }\n        if (['insert', 'update', 'delete'].includes(typeLower)) {\n            (_a = this.bindings.postgres_changes) === null || _a === void 0 ? void 0 : _a.filter((bind) => {\n                var _a, _b, _c;\n                return (((_a = bind.filter) === null || _a === void 0 ? void 0 : _a.event) === '*' ||\n                    ((_c = (_b = bind.filter) === null || _b === void 0 ? void 0 : _b.event) === null || _c === void 0 ? void 0 : _c.toLocaleLowerCase()) === typeLower);\n            }).map((bind) => bind.callback(handledPayload, ref));\n        }\n        else {\n            (_b = this.bindings[typeLower]) === null || _b === void 0 ? void 0 : _b.filter((bind) => {\n                var _a, _b, _c, _d, _e, _f;\n                if (['broadcast', 'presence', 'postgres_changes'].includes(typeLower)) {\n                    if ('id' in bind) {\n                        const bindId = bind.id;\n                        const bindEvent = (_a = bind.filter) === null || _a === void 0 ? void 0 : _a.event;\n                        return (bindId &&\n                            ((_b = payload.ids) === null || _b === void 0 ? void 0 : _b.includes(bindId)) &&\n                            (bindEvent === '*' ||\n                                (bindEvent === null || bindEvent === void 0 ? void 0 : bindEvent.toLocaleLowerCase()) ===\n                                    ((_c = payload.data) === null || _c === void 0 ? void 0 : _c.type.toLocaleLowerCase())));\n                    }\n                    else {\n                        const bindEvent = (_e = (_d = bind === null || bind === void 0 ? void 0 : bind.filter) === null || _d === void 0 ? void 0 : _d.event) === null || _e === void 0 ? void 0 : _e.toLocaleLowerCase();\n                        return (bindEvent === '*' ||\n                            bindEvent === ((_f = payload === null || payload === void 0 ? void 0 : payload.event) === null || _f === void 0 ? void 0 : _f.toLocaleLowerCase()));\n                    }\n                }\n                else {\n                    return bind.type.toLocaleLowerCase() === typeLower;\n                }\n            }).map((bind) => {\n                if (typeof handledPayload === 'object' && 'ids' in handledPayload) {\n                    const postgresChanges = handledPayload.data;\n                    const { schema, table, commit_timestamp, type, errors } = postgresChanges;\n                    const enrichedPayload = {\n                        schema: schema,\n                        table: table,\n                        commit_timestamp: commit_timestamp,\n                        eventType: type,\n                        new: {},\n                        old: {},\n                        errors: errors,\n                    };\n                    handledPayload = Object.assign(Object.assign({}, enrichedPayload), this._getPayloadRecords(postgresChanges));\n                }\n                bind.callback(handledPayload, ref);\n            });\n        }\n    }\n    /** @internal */\n    _isClosed() {\n        return this.state === CHANNEL_STATES.closed;\n    }\n    /** @internal */\n    _isJoined() {\n        return this.state === CHANNEL_STATES.joined;\n    }\n    /** @internal */\n    _isJoining() {\n        return this.state === CHANNEL_STATES.joining;\n    }\n    /** @internal */\n    _isLeaving() {\n        return this.state === CHANNEL_STATES.leaving;\n    }\n    /** @internal */\n    _replyEventName(ref) {\n        return `chan_reply_${ref}`;\n    }\n    /** @internal */\n    _on(type, filter, callback) {\n        const typeLower = type.toLocaleLowerCase();\n        const binding = {\n            type: typeLower,\n            filter: filter,\n            callback: callback,\n        };\n        if (this.bindings[typeLower]) {\n            this.bindings[typeLower].push(binding);\n        }\n        else {\n            this.bindings[typeLower] = [binding];\n        }\n        return this;\n    }\n    /** @internal */\n    _off(type, filter) {\n        const typeLower = type.toLocaleLowerCase();\n        this.bindings[typeLower] = this.bindings[typeLower].filter((bind) => {\n            var _a;\n            return !(((_a = bind.type) === null || _a === void 0 ? void 0 : _a.toLocaleLowerCase()) === typeLower &&\n                RealtimeChannel.isEqual(bind.filter, filter));\n        });\n        return this;\n    }\n    /** @internal */\n    static isEqual(obj1, obj2) {\n        if (Object.keys(obj1).length !== Object.keys(obj2).length) {\n            return false;\n        }\n        for (const k in obj1) {\n            if (obj1[k] !== obj2[k]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /** @internal */\n    _rejoinUntilConnected() {\n        this.rejoinTimer.scheduleTimeout();\n        if (this.socket.isConnected()) {\n            this._rejoin();\n        }\n    }\n    /**\n     * Registers a callback that will be executed when the channel closes.\n     *\n     * @internal\n     */\n    _onClose(callback) {\n        this._on(CHANNEL_EVENTS.close, {}, callback);\n    }\n    /**\n     * Registers a callback that will be executed when the channel encounteres an error.\n     *\n     * @internal\n     */\n    _onError(callback) {\n        this._on(CHANNEL_EVENTS.error, {}, (reason) => callback(reason));\n    }\n    /**\n     * Returns `true` if the socket is connected and the channel has been joined.\n     *\n     * @internal\n     */\n    _canPush() {\n        return this.socket.isConnected() && this._isJoined();\n    }\n    /** @internal */\n    _rejoin(timeout = this.timeout) {\n        if (this._isLeaving()) {\n            return;\n        }\n        this.socket._leaveOpenTopic(this.topic);\n        this.state = CHANNEL_STATES.joining;\n        this.joinPush.resend(timeout);\n    }\n    /** @internal */\n    _getPayloadRecords(payload) {\n        const records = {\n            new: {},\n            old: {},\n        };\n        if (payload.type === 'INSERT' || payload.type === 'UPDATE') {\n            records.new = Transformers.convertChangeData(payload.columns, payload.record);\n        }\n        if (payload.type === 'UPDATE' || payload.type === 'DELETE') {\n            records.old = Transformers.convertChangeData(payload.columns, payload.old_record);\n        }\n        return records;\n    }\n}\n//# sourceMappingURL=RealtimeChannel.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { w3cwebsocket } from 'websocket';\nimport { VSN, CHANNEL_EVENTS, TRANSPORTS, SOCKET_STATES, DEFAULT_TIMEOUT, WS_CLOSE_NORMAL, DEFAULT_HEADERS, CONNECTION_STATE, } from './lib/constants';\nimport Timer from './lib/timer';\nimport Serializer from './lib/serializer';\nimport RealtimeChannel from './RealtimeChannel';\nconst noop = () => { };\nexport default class RealtimeClient {\n    /**\n     * Initializes the Socket.\n     *\n     * @param endPoint The string WebSocket endpoint, ie, \"ws://example.com/socket\", \"wss://example.com\", \"/socket\" (inherited host & protocol)\n     * @param options.transport The Websocket Transport, for example WebSocket.\n     * @param options.timeout The default timeout in milliseconds to trigger push timeouts.\n     * @param options.params The optional params to pass when connecting.\n     * @param options.headers The optional headers to pass when connecting.\n     * @param options.heartbeatIntervalMs The millisec interval to send a heartbeat message.\n     * @param options.logger The optional function for specialized logging, ie: logger: (kind, msg, data) => { console.log(`${kind}: ${msg}`, data) }\n     * @param options.encode The function to encode outgoing messages. Defaults to JSON: (payload, callback) => callback(JSON.stringify(payload))\n     * @param options.decode The function to decode incoming messages. Defaults to Serializer's decode.\n     * @param options.reconnectAfterMs he optional function that returns the millsec reconnect interval. Defaults to stepped backoff off.\n     */\n    constructor(endPoint, options) {\n        var _a;\n        this.accessToken = null;\n        this.channels = [];\n        this.endPoint = '';\n        this.headers = DEFAULT_HEADERS;\n        this.params = {};\n        this.timeout = DEFAULT_TIMEOUT;\n        this.transport = w3cwebsocket;\n        this.heartbeatIntervalMs = 30000;\n        this.heartbeatTimer = undefined;\n        this.pendingHeartbeatRef = null;\n        this.ref = 0;\n        this.logger = noop;\n        this.conn = null;\n        this.sendBuffer = [];\n        this.serializer = new Serializer();\n        this.stateChangeCallbacks = {\n            open: [],\n            close: [],\n            error: [],\n            message: [],\n        };\n        this.eventsPerSecondLimitMs = 100;\n        this.inThrottle = false;\n        this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;\n        if (options === null || options === void 0 ? void 0 : options.params)\n            this.params = options.params;\n        if (options === null || options === void 0 ? void 0 : options.headers)\n            this.headers = Object.assign(Object.assign({}, this.headers), options.headers);\n        if (options === null || options === void 0 ? void 0 : options.timeout)\n            this.timeout = options.timeout;\n        if (options === null || options === void 0 ? void 0 : options.logger)\n            this.logger = options.logger;\n        if (options === null || options === void 0 ? void 0 : options.transport)\n            this.transport = options.transport;\n        if (options === null || options === void 0 ? void 0 : options.heartbeatIntervalMs)\n            this.heartbeatIntervalMs = options.heartbeatIntervalMs;\n        const eventsPerSecond = (_a = options === null || options === void 0 ? void 0 : options.params) === null || _a === void 0 ? void 0 : _a.eventsPerSecond;\n        if (eventsPerSecond)\n            this.eventsPerSecondLimitMs = Math.floor(1000 / eventsPerSecond);\n        this.reconnectAfterMs = (options === null || options === void 0 ? void 0 : options.reconnectAfterMs)\n            ? options.reconnectAfterMs\n            : (tries) => {\n                return [1000, 2000, 5000, 10000][tries - 1] || 10000;\n            };\n        this.encode = (options === null || options === void 0 ? void 0 : options.encode)\n            ? options.encode\n            : (payload, callback) => {\n                return callback(JSON.stringify(payload));\n            };\n        this.decode = (options === null || options === void 0 ? void 0 : options.decode)\n            ? options.decode\n            : this.serializer.decode.bind(this.serializer);\n        this.reconnectTimer = new Timer(() => __awaiter(this, void 0, void 0, function* () {\n            this.disconnect();\n            this.connect();\n        }), this.reconnectAfterMs);\n    }\n    /**\n     * Connects the socket, unless already connected.\n     */\n    connect() {\n        if (this.conn) {\n            return;\n        }\n        this.conn = new this.transport(this._endPointURL(), [], null, this.headers);\n        if (this.conn) {\n            this.conn.binaryType = 'arraybuffer';\n            this.conn.onopen = () => this._onConnOpen();\n            this.conn.onerror = (error) => this._onConnError(error);\n            this.conn.onmessage = (event) => this._onConnMessage(event);\n            this.conn.onclose = (event) => this._onConnClose(event);\n        }\n    }\n    /**\n     * Disconnects the socket.\n     *\n     * @param code A numeric status code to send on disconnect.\n     * @param reason A custom reason for the disconnect.\n     */\n    disconnect(code, reason) {\n        if (this.conn) {\n            this.conn.onclose = function () { }; // noop\n            if (code) {\n                this.conn.close(code, reason !== null && reason !== void 0 ? reason : '');\n            }\n            else {\n                this.conn.close();\n            }\n            this.conn = null;\n            // remove open handles\n            this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n            this.reconnectTimer.reset();\n        }\n    }\n    /**\n     * Returns all created channels\n     */\n    getChannels() {\n        return this.channels;\n    }\n    /**\n     * Unsubscribes and removes a single channel\n     * @param channel A RealtimeChannel instance\n     */\n    removeChannel(channel) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const status = yield channel.unsubscribe();\n            if (this.channels.length === 0) {\n                this.disconnect();\n            }\n            return status;\n        });\n    }\n    /**\n     * Unsubscribes and removes all channels\n     */\n    removeAllChannels() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const values_1 = yield Promise.all(this.channels.map((channel) => channel.unsubscribe()));\n            this.disconnect();\n            return values_1;\n        });\n    }\n    /**\n     * Logs the message.\n     *\n     * For customized logging, `this.logger` can be overridden.\n     */\n    log(kind, msg, data) {\n        this.logger(kind, msg, data);\n    }\n    /**\n     * Returns the current state of the socket.\n     */\n    connectionState() {\n        switch (this.conn && this.conn.readyState) {\n            case SOCKET_STATES.connecting:\n                return CONNECTION_STATE.Connecting;\n            case SOCKET_STATES.open:\n                return CONNECTION_STATE.Open;\n            case SOCKET_STATES.closing:\n                return CONNECTION_STATE.Closing;\n            default:\n                return CONNECTION_STATE.Closed;\n        }\n    }\n    /**\n     * Returns `true` is the connection is open.\n     */\n    isConnected() {\n        return this.connectionState() === CONNECTION_STATE.Open;\n    }\n    channel(topic, params = { config: {} }) {\n        if (!this.isConnected()) {\n            this.connect();\n        }\n        const chan = new RealtimeChannel(`realtime:${topic}`, params, this);\n        this.channels.push(chan);\n        return chan;\n    }\n    /**\n     * Push out a message if the socket is connected.\n     *\n     * If the socket is not connected, the message gets enqueued within a local buffer, and sent out when a connection is next established.\n     */\n    push(data) {\n        const { topic, event, payload, ref } = data;\n        let callback = () => {\n            this.encode(data, (result) => {\n                var _a;\n                (_a = this.conn) === null || _a === void 0 ? void 0 : _a.send(result);\n            });\n        };\n        this.log('push', `${topic} ${event} (${ref})`, payload);\n        if (this.isConnected()) {\n            if (['broadcast', 'presence', 'postgres_changes'].includes(event)) {\n                const isThrottled = this._throttle(callback)();\n                if (isThrottled) {\n                    return 'rate limited';\n                }\n            }\n            else {\n                callback();\n            }\n        }\n        else {\n            this.sendBuffer.push(callback);\n        }\n    }\n    /**\n     * Sets the JWT access token used for channel subscription authorization and Realtime RLS.\n     *\n     * @param token A JWT string.\n     */\n    setAuth(token) {\n        this.accessToken = token;\n        this.channels.forEach((channel) => {\n            token && channel.updateJoinPayload({ access_token: token });\n            if (channel.joinedOnce && channel._isJoined()) {\n                channel._push(CHANNEL_EVENTS.access_token, { access_token: token });\n            }\n        });\n    }\n    /**\n     * Return the next message ref, accounting for overflows\n     *\n     * @internal\n     */\n    _makeRef() {\n        let newRef = this.ref + 1;\n        if (newRef === this.ref) {\n            this.ref = 0;\n        }\n        else {\n            this.ref = newRef;\n        }\n        return this.ref.toString();\n    }\n    /**\n     * Unsubscribe from channels with the specified topic.\n     *\n     * @internal\n     */\n    _leaveOpenTopic(topic) {\n        let dupChannel = this.channels.find((c) => c.topic === topic && (c._isJoined() || c._isJoining()));\n        if (dupChannel) {\n            this.log('transport', `leaving duplicate topic \"${topic}\"`);\n            dupChannel.unsubscribe();\n        }\n    }\n    /**\n     * Removes a subscription from the socket.\n     *\n     * @param channel An open subscription.\n     *\n     * @internal\n     */\n    _remove(channel) {\n        this.channels = this.channels.filter((c) => c._joinRef() !== channel._joinRef());\n    }\n    /**\n     * Returns the URL of the websocket.\n     *\n     * @internal\n     */\n    _endPointURL() {\n        return this._appendParams(this.endPoint, Object.assign({}, this.params, { vsn: VSN }));\n    }\n    /** @internal */\n    _onConnMessage(rawMessage) {\n        this.decode(rawMessage.data, (msg) => {\n            let { topic, event, payload, ref } = msg;\n            if ((ref && ref === this.pendingHeartbeatRef) ||\n                event === (payload === null || payload === void 0 ? void 0 : payload.type)) {\n                this.pendingHeartbeatRef = null;\n            }\n            this.log('receive', `${payload.status || ''} ${topic} ${event} ${(ref && '(' + ref + ')') || ''}`, payload);\n            this.channels\n                .filter((channel) => channel._isMember(topic))\n                .forEach((channel) => channel._trigger(event, payload, ref));\n            this.stateChangeCallbacks.message.forEach((callback) => callback(msg));\n        });\n    }\n    /** @internal */\n    _onConnOpen() {\n        this.log('transport', `connected to ${this._endPointURL()}`);\n        this._flushSendBuffer();\n        this.reconnectTimer.reset();\n        this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n        this.heartbeatTimer = setInterval(() => this._sendHeartbeat(), this.heartbeatIntervalMs);\n        this.stateChangeCallbacks.open.forEach((callback) => callback());\n    }\n    /** @internal */\n    _onConnClose(event) {\n        this.log('transport', 'close', event);\n        this._triggerChanError();\n        this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n        this.reconnectTimer.scheduleTimeout();\n        this.stateChangeCallbacks.close.forEach((callback) => callback(event));\n    }\n    /** @internal */\n    _onConnError(error) {\n        this.log('transport', error.message);\n        this._triggerChanError();\n        this.stateChangeCallbacks.error.forEach((callback) => callback(error));\n    }\n    /** @internal */\n    _triggerChanError() {\n        this.channels.forEach((channel) => channel._trigger(CHANNEL_EVENTS.error));\n    }\n    /** @internal */\n    _appendParams(url, params) {\n        if (Object.keys(params).length === 0) {\n            return url;\n        }\n        const prefix = url.match(/\\?/) ? '&' : '?';\n        const query = new URLSearchParams(params);\n        return `${url}${prefix}${query}`;\n    }\n    /** @internal */\n    _flushSendBuffer() {\n        if (this.isConnected() && this.sendBuffer.length > 0) {\n            this.sendBuffer.forEach((callback) => callback());\n            this.sendBuffer = [];\n        }\n    }\n    /** @internal */\n    _sendHeartbeat() {\n        var _a;\n        if (!this.isConnected()) {\n            return;\n        }\n        if (this.pendingHeartbeatRef) {\n            this.pendingHeartbeatRef = null;\n            this.log('transport', 'heartbeat timeout. Attempting to re-establish connection');\n            (_a = this.conn) === null || _a === void 0 ? void 0 : _a.close(WS_CLOSE_NORMAL, 'hearbeat timeout');\n            return;\n        }\n        this.pendingHeartbeatRef = this._makeRef();\n        this.push({\n            topic: 'phoenix',\n            event: 'heartbeat',\n            payload: {},\n            ref: this.pendingHeartbeatRef,\n        });\n        this.setAuth(this.accessToken);\n    }\n    /** @internal */\n    _throttle(callback, eventsPerSecondLimitMs = this.eventsPerSecondLimitMs) {\n        return () => {\n            if (this.inThrottle)\n                return true;\n            callback();\n            if (eventsPerSecondLimitMs > 0) {\n                this.inThrottle = true;\n                setTimeout(() => {\n                    this.inThrottle = false;\n                }, eventsPerSecondLimitMs);\n            }\n            return false;\n        };\n    }\n}\n//# sourceMappingURL=RealtimeClient.js.map","import RealtimeClient from './RealtimeClient';\nimport RealtimeChannel, { REALTIME_LISTEN_TYPES, REALTIME_POSTGRES_CHANGES_LISTEN_EVENT, REALTIME_SUBSCRIBE_STATES, } from './RealtimeChannel';\nimport RealtimePresence, { REALTIME_PRESENCE_LISTEN_EVENTS, } from './RealtimePresence';\nexport { RealtimePresence, RealtimeChannel, RealtimeClient, REALTIME_LISTEN_TYPES, REALTIME_POSTGRES_CHANGES_LISTEN_EVENT, REALTIME_PRESENCE_LISTEN_EVENTS, REALTIME_SUBSCRIBE_STATES, };\n//# sourceMappingURL=index.js.map","export class StorageError extends Error {\n    constructor(message) {\n        super(message);\n        this.__isStorageError = true;\n        this.name = 'StorageError';\n    }\n}\nexport function isStorageError(error) {\n    return typeof error === 'object' && error !== null && '__isStorageError' in error;\n}\nexport class StorageApiError extends StorageError {\n    constructor(message, status) {\n        super(message);\n        this.name = 'StorageApiError';\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport class StorageUnknownError extends StorageError {\n    constructor(message, originalError) {\n        super(message);\n        this.name = 'StorageUnknownError';\n        this.originalError = originalError;\n    }\n}\n//# sourceMappingURL=errors.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const resolveResponse = () => __awaiter(void 0, void 0, void 0, function* () {\n    if (typeof Response === 'undefined') {\n        return (yield import('cross-fetch')).Response;\n    }\n    return Response;\n});\n//# sourceMappingURL=helpers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { StorageApiError, StorageUnknownError } from './errors';\nimport { resolveResponse } from './helpers';\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError = (error, reject) => __awaiter(void 0, void 0, void 0, function* () {\n    const Res = yield resolveResponse();\n    if (error instanceof Res) {\n        error\n            .json()\n            .then((err) => {\n            reject(new StorageApiError(_getErrorMessage(err), error.status || 500));\n        })\n            .catch((err) => {\n            reject(new StorageUnknownError(_getErrorMessage(err), err));\n        });\n    }\n    else {\n        reject(new StorageUnknownError(_getErrorMessage(error), error));\n    }\n});\nconst _getRequestParams = (method, options, parameters, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'application/json' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return Object.assign(Object.assign({}, params), parameters);\n};\nfunction _handleRequest(fetcher, method, url, options, parameters, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetcher(url, _getRequestParams(method, options, parameters, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return result;\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError(error, reject));\n        });\n    });\n}\nexport function get(fetcher, url, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'GET', url, options, parameters);\n    });\n}\nexport function post(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'POST', url, options, parameters, body);\n    });\n}\nexport function put(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'PUT', url, options, parameters, body);\n    });\n}\nexport function remove(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'DELETE', url, options, parameters, body);\n    });\n}\n//# sourceMappingURL=fetch.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isStorageError, StorageError } from '../lib/errors';\nimport { get, post, remove } from '../lib/fetch';\nimport { resolveFetch } from '../lib/helpers';\nconst DEFAULT_SEARCH_OPTIONS = {\n    limit: 100,\n    offset: 0,\n    sortBy: {\n        column: 'name',\n        order: 'asc',\n    },\n};\nconst DEFAULT_FILE_OPTIONS = {\n    cacheControl: '3600',\n    contentType: 'text/plain;charset=UTF-8',\n    upsert: false,\n};\nexport default class StorageFileApi {\n    constructor(url, headers = {}, bucketId, fetch) {\n        this.url = url;\n        this.headers = headers;\n        this.bucketId = bucketId;\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Uploads a file to an existing bucket or replaces an existing file at the specified path with a new one.\n     *\n     * @param method HTTP method.\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    uploadOrUpdate(method, path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let body;\n                const options = Object.assign(Object.assign({}, DEFAULT_FILE_OPTIONS), fileOptions);\n                const headers = Object.assign(Object.assign({}, this.headers), (method === 'POST' && { 'x-upsert': String(options.upsert) }));\n                if (typeof Blob !== 'undefined' && fileBody instanceof Blob) {\n                    body = new FormData();\n                    body.append('cacheControl', options.cacheControl);\n                    body.append('', fileBody);\n                }\n                else if (typeof FormData !== 'undefined' && fileBody instanceof FormData) {\n                    body = fileBody;\n                    body.append('cacheControl', options.cacheControl);\n                }\n                else {\n                    body = fileBody;\n                    headers['cache-control'] = `max-age=${options.cacheControl}`;\n                    headers['content-type'] = options.contentType;\n                }\n                const cleanPath = this._removeEmptyFolders(path);\n                const _path = this._getFinalPath(cleanPath);\n                const res = yield this.fetch(`${this.url}/object/${_path}`, Object.assign({ method, body: body, headers }, ((options === null || options === void 0 ? void 0 : options.duplex) ? { duplex: options.duplex } : {})));\n                if (res.ok) {\n                    return {\n                        data: { path: cleanPath },\n                        error: null,\n                    };\n                }\n                else {\n                    const error = yield res.json();\n                    return { data: null, error };\n                }\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Uploads a file to an existing bucket.\n     *\n     * @param path The file path, including the file name. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    upload(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('POST', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Upload a file with a token generated from `createSignedUploadUrl`.\n     * @param path The file path, including the file name. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param token The token generated from `createSignedUploadUrl`\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    uploadToSignedUrl(path, token, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const cleanPath = this._removeEmptyFolders(path);\n            const _path = this._getFinalPath(cleanPath);\n            const url = new URL(this.url + `/object/upload/sign/${_path}`);\n            url.searchParams.set('token', token);\n            try {\n                let body;\n                const options = Object.assign({ upsert: DEFAULT_FILE_OPTIONS.upsert }, fileOptions);\n                const headers = Object.assign(Object.assign({}, this.headers), { 'x-upsert': String(options.upsert) });\n                if (typeof Blob !== 'undefined' && fileBody instanceof Blob) {\n                    body = new FormData();\n                    body.append('cacheControl', options.cacheControl);\n                    body.append('', fileBody);\n                }\n                else if (typeof FormData !== 'undefined' && fileBody instanceof FormData) {\n                    body = fileBody;\n                    body.append('cacheControl', options.cacheControl);\n                }\n                else {\n                    body = fileBody;\n                    headers['cache-control'] = `max-age=${options.cacheControl}`;\n                    headers['content-type'] = options.contentType;\n                }\n                const res = yield this.fetch(url.toString(), {\n                    method: 'PUT',\n                    body: body,\n                    headers,\n                });\n                if (res.ok) {\n                    return {\n                        data: { path: cleanPath },\n                        error: null,\n                    };\n                }\n                else {\n                    const error = yield res.json();\n                    return { data: null, error };\n                }\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a signed upload URL.\n     * Signed upload URLs can be used to upload files to the bucket without further authentication.\n     * They are valid for one minute.\n     * @param path The file path, including the current file name. For example `folder/image.png`.\n     */\n    createSignedUploadUrl(path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let _path = this._getFinalPath(path);\n                const data = yield post(this.fetch, `${this.url}/object/upload/sign/${_path}`, {}, { headers: this.headers });\n                const url = new URL(this.url + data.url);\n                const token = url.searchParams.get('token');\n                if (!token) {\n                    throw new StorageError('No token returned by API');\n                }\n                return { data: { signedUrl: url.toString(), path, token }, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Replaces an existing file at the specified path with a new one.\n     *\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to update.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    update(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('PUT', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Moves an existing file to a new path in the same bucket.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-new.png`.\n     */\n    move(fromPath, toPath) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/move`, { bucketId: this.bucketId, sourceKey: fromPath, destinationKey: toPath }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Copies an existing file to a new path in the same bucket.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-copy.png`.\n     */\n    copy(fromPath, toPath) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/copy`, { bucketId: this.bucketId, sourceKey: fromPath, destinationKey: toPath }, { headers: this.headers });\n                return { data: { path: data.Key }, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a signed URL. Use a signed URL to share a file for a fixed amount of time.\n     *\n     * @param path The file path, including the current file name. For example `folder/image.png`.\n     * @param expiresIn The number of seconds until the signed URL expires. For example, `60` for a URL which is valid for one minute.\n     * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     * @param options.transform Transform the asset before serving it to the client.\n     */\n    createSignedUrl(path, expiresIn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let _path = this._getFinalPath(path);\n                let data = yield post(this.fetch, `${this.url}/object/sign/${_path}`, Object.assign({ expiresIn }, ((options === null || options === void 0 ? void 0 : options.transform) ? { transform: options.transform } : {})), { headers: this.headers });\n                const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n                    ? `&download=${options.download === true ? '' : options.download}`\n                    : '';\n                const signedUrl = encodeURI(`${this.url}${data.signedURL}${downloadQueryParam}`);\n                data = { signedUrl };\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates multiple signed URLs. Use a signed URL to share a file for a fixed amount of time.\n     *\n     * @param paths The file paths to be downloaded, including the current file names. For example `['folder/image.png', 'folder2/image2.png']`.\n     * @param expiresIn The number of seconds until the signed URLs expire. For example, `60` for URLs which are valid for one minute.\n     * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     */\n    createSignedUrls(paths, expiresIn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/sign/${this.bucketId}`, { expiresIn, paths }, { headers: this.headers });\n                const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n                    ? `&download=${options.download === true ? '' : options.download}`\n                    : '';\n                return {\n                    data: data.map((datum) => (Object.assign(Object.assign({}, datum), { signedUrl: datum.signedURL\n                            ? encodeURI(`${this.url}${datum.signedURL}${downloadQueryParam}`)\n                            : null }))),\n                    error: null,\n                };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Downloads a file from a private bucket. For public buckets, make a request to the URL returned from `getPublicUrl` instead.\n     *\n     * @param path The full path and file name of the file to be downloaded. For example `folder/image.png`.\n     * @param options.transform Transform the asset before serving it to the client.\n     */\n    download(path, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const wantsTransformation = typeof (options === null || options === void 0 ? void 0 : options.transform) !== 'undefined';\n            const renderPath = wantsTransformation ? 'render/image/authenticated' : 'object';\n            const transformationQuery = this.transformOptsToQueryString((options === null || options === void 0 ? void 0 : options.transform) || {});\n            const queryString = transformationQuery ? `?${transformationQuery}` : '';\n            try {\n                const _path = this._getFinalPath(path);\n                const res = yield get(this.fetch, `${this.url}/${renderPath}/${_path}${queryString}`, {\n                    headers: this.headers,\n                    noResolveJson: true,\n                });\n                const data = yield res.blob();\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * A simple convenience function to get the URL for an asset in a public bucket. If you do not want to use this function, you can construct the public URL by concatenating the bucket URL with the path to the asset.\n     * This function does not verify if the bucket is public. If a public URL is created for a bucket which is not public, you will not be able to download the asset.\n     *\n     * @param path The path and name of the file to generate the public URL for. For example `folder/image.png`.\n     * @param options.download Triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     * @param options.transform Transform the asset before serving it to the client.\n     */\n    getPublicUrl(path, options) {\n        const _path = this._getFinalPath(path);\n        const _queryString = [];\n        const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n            ? `download=${options.download === true ? '' : options.download}`\n            : '';\n        if (downloadQueryParam !== '') {\n            _queryString.push(downloadQueryParam);\n        }\n        const wantsTransformation = typeof (options === null || options === void 0 ? void 0 : options.transform) !== 'undefined';\n        const renderPath = wantsTransformation ? 'render/image' : 'object';\n        const transformationQuery = this.transformOptsToQueryString((options === null || options === void 0 ? void 0 : options.transform) || {});\n        if (transformationQuery !== '') {\n            _queryString.push(transformationQuery);\n        }\n        let queryString = _queryString.join('&');\n        if (queryString !== '') {\n            queryString = `?${queryString}`;\n        }\n        return {\n            data: { publicUrl: encodeURI(`${this.url}/${renderPath}/public/${_path}${queryString}`) },\n        };\n    }\n    /**\n     * Deletes files within the same bucket\n     *\n     * @param paths An array of files to delete, including the path and file name. For example [`'folder/image.png'`].\n     */\n    remove(paths) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/object/${this.bucketId}`, { prefixes: paths }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get file metadata\n     * @param id the file id to retrieve metadata\n     */\n    // async getMetadata(\n    //   id: string\n    // ): Promise<\n    //   | {\n    //       data: Metadata\n    //       error: null\n    //     }\n    //   | {\n    //       data: null\n    //       error: StorageError\n    //     }\n    // > {\n    //   try {\n    //     const data = await get(this.fetch, `${this.url}/metadata/${id}`, { headers: this.headers })\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     if (isStorageError(error)) {\n    //       return { data: null, error }\n    //     }\n    //     throw error\n    //   }\n    // }\n    /**\n     * Update file metadata\n     * @param id the file id to update metadata\n     * @param meta the new file metadata\n     */\n    // async updateMetadata(\n    //   id: string,\n    //   meta: Metadata\n    // ): Promise<\n    //   | {\n    //       data: Metadata\n    //       error: null\n    //     }\n    //   | {\n    //       data: null\n    //       error: StorageError\n    //     }\n    // > {\n    //   try {\n    //     const data = await post(\n    //       this.fetch,\n    //       `${this.url}/metadata/${id}`,\n    //       { ...meta },\n    //       { headers: this.headers }\n    //     )\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     if (isStorageError(error)) {\n    //       return { data: null, error }\n    //     }\n    //     throw error\n    //   }\n    // }\n    /**\n     * Lists all the files within a bucket.\n     * @param path The folder path.\n     */\n    list(path, options, parameters) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const body = Object.assign(Object.assign(Object.assign({}, DEFAULT_SEARCH_OPTIONS), options), { prefix: path || '' });\n                const data = yield post(this.fetch, `${this.url}/object/list/${this.bucketId}`, body, { headers: this.headers }, parameters);\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _getFinalPath(path) {\n        return `${this.bucketId}/${path}`;\n    }\n    _removeEmptyFolders(path) {\n        return path.replace(/^\\/|\\/$/g, '').replace(/\\/+/g, '/');\n    }\n    transformOptsToQueryString(transform) {\n        const params = [];\n        if (transform.width) {\n            params.push(`width=${transform.width}`);\n        }\n        if (transform.height) {\n            params.push(`height=${transform.height}`);\n        }\n        if (transform.resize) {\n            params.push(`resize=${transform.resize}`);\n        }\n        if (transform.format) {\n            params.push(`format=${transform.format}`);\n        }\n        if (transform.quality) {\n            params.push(`quality=${transform.quality}`);\n        }\n        return params.join('&');\n    }\n}\n//# sourceMappingURL=StorageFileApi.js.map","// generated by genversion\nexport const version = '2.5.1';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `storage-js/${version}` };\n//# sourceMappingURL=constants.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DEFAULT_HEADERS } from '../lib/constants';\nimport { isStorageError } from '../lib/errors';\nimport { get, post, put, remove } from '../lib/fetch';\nimport { resolveFetch } from '../lib/helpers';\nexport default class StorageBucketApi {\n    constructor(url, headers = {}, fetch) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Retrieves the details of all Storage buckets within an existing project.\n     */\n    listBuckets() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/bucket`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Retrieves the details of an existing Storage bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to retrieve.\n     */\n    getBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/bucket/${id}`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a new Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are creating.\n     * @param options.public The visibility of the bucket. Public buckets don't require an authorization token to download objects, but still require a valid token for all other operations. By default, buckets are private.\n     * @param options.fileSizeLimit specifies the max file size in bytes that can be uploaded to this bucket.\n     * The global file size limit takes precedence over this value.\n     * The default value is null, which doesn't set a per bucket file size limit.\n     * @param options.allowedMimeTypes specifies the allowed mime types that this bucket can accept during upload.\n     * The default value is null, which allows files with all mime types to be uploaded.\n     * Each mime type specified can be a wildcard, e.g. image/*, or a specific mime type, e.g. image/png.\n     * @returns newly created bucket id\n     */\n    createBucket(id, options = {\n        public: false,\n    }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/bucket`, {\n                    id,\n                    name: id,\n                    public: options.public,\n                    file_size_limit: options.fileSizeLimit,\n                    allowed_mime_types: options.allowedMimeTypes,\n                }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates a Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are updating.\n     * @param options.public The visibility of the bucket. Public buckets don't require an authorization token to download objects, but still require a valid token for all other operations.\n     * @param options.fileSizeLimit specifies the max file size in bytes that can be uploaded to this bucket.\n     * The global file size limit takes precedence over this value.\n     * The default value is null, which doesn't set a per bucket file size limit.\n     * @param options.allowedMimeTypes specifies the allowed mime types that this bucket can accept during upload.\n     * The default value is null, which allows files with all mime types to be uploaded.\n     * Each mime type specified can be a wildcard, e.g. image/*, or a specific mime type, e.g. image/png.\n     */\n    updateBucket(id, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield put(this.fetch, `${this.url}/bucket/${id}`, {\n                    id,\n                    name: id,\n                    public: options.public,\n                    file_size_limit: options.fileSizeLimit,\n                    allowed_mime_types: options.allowedMimeTypes,\n                }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Removes all objects inside a single bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to empty.\n     */\n    emptyBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/bucket/${id}/empty`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Deletes an existing bucket. A bucket can't be deleted with existing objects inside it.\n     * You must first `empty()` the bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to delete.\n     */\n    deleteBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/bucket/${id}`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n}\n//# sourceMappingURL=StorageBucketApi.js.map","import StorageFileApi from './packages/StorageFileApi';\nimport StorageBucketApi from './packages/StorageBucketApi';\nexport class StorageClient extends StorageBucketApi {\n    constructor(url, headers = {}, fetch) {\n        super(url, headers, fetch);\n    }\n    /**\n     * Perform file operation in a bucket.\n     *\n     * @param id The bucket id to operate on.\n     */\n    from(id) {\n        return new StorageFileApi(this.url, this.headers, id, this.fetch);\n    }\n}\n//# sourceMappingURL=StorageClient.js.map","export const version = '2.24.0';\n//# sourceMappingURL=version.js.map","// constants.ts\nimport { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `supabase-js/${version}` };\n//# sourceMappingURL=constants.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport crossFetch, { Headers as CrossFetchHeaders } from 'cross-fetch';\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = crossFetch;\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const resolveHeadersConstructor = () => {\n    if (typeof Headers === 'undefined') {\n        return CrossFetchHeaders;\n    }\n    return Headers;\n};\nexport const fetchWithAuth = (supabaseKey, getAccessToken, customFetch) => {\n    const fetch = resolveFetch(customFetch);\n    const HeadersConstructor = resolveHeadersConstructor();\n    return (input, init) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        const accessToken = (_a = (yield getAccessToken())) !== null && _a !== void 0 ? _a : supabaseKey;\n        let headers = new HeadersConstructor(init === null || init === void 0 ? void 0 : init.headers);\n        if (!headers.has('apikey')) {\n            headers.set('apikey', supabaseKey);\n        }\n        if (!headers.has('Authorization')) {\n            headers.set('Authorization', `Bearer ${accessToken}`);\n        }\n        return fetch(input, Object.assign(Object.assign({}, init), { headers }));\n    });\n};\n//# sourceMappingURL=fetch.js.map","export function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexport function stripTrailingSlash(url) {\n    return url.replace(/\\/$/, '');\n}\nexport const isBrowser = () => typeof window !== 'undefined';\nexport function applySettingDefaults(options, defaults) {\n    const { db: dbOptions, auth: authOptions, realtime: realtimeOptions, global: globalOptions, } = options;\n    const { db: DEFAULT_DB_OPTIONS, auth: DEFAULT_AUTH_OPTIONS, realtime: DEFAULT_REALTIME_OPTIONS, global: DEFAULT_GLOBAL_OPTIONS, } = defaults;\n    return {\n        db: Object.assign(Object.assign({}, DEFAULT_DB_OPTIONS), dbOptions),\n        auth: Object.assign(Object.assign({}, DEFAULT_AUTH_OPTIONS), authOptions),\n        realtime: Object.assign(Object.assign({}, DEFAULT_REALTIME_OPTIONS), realtimeOptions),\n        global: Object.assign(Object.assign({}, DEFAULT_GLOBAL_OPTIONS), globalOptions),\n    };\n}\n//# sourceMappingURL=helpers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function expiresAt(expiresIn) {\n    const timeNow = Math.round(Date.now() / 1000);\n    return timeNow + expiresIn;\n}\nexport function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        const r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexport const isBrowser = () => typeof document !== 'undefined';\nconst localStorageWriteTests = {\n    tested: false,\n    writable: false,\n};\n/**\n * Checks whether localStorage is supported on this browser.\n */\nexport const supportsLocalStorage = () => {\n    if (!isBrowser()) {\n        return false;\n    }\n    try {\n        if (typeof globalThis.localStorage !== 'object') {\n            return false;\n        }\n    }\n    catch (e) {\n        // DOM exception when accessing `localStorage`\n        return false;\n    }\n    if (localStorageWriteTests.tested) {\n        return localStorageWriteTests.writable;\n    }\n    const randomKey = `lswt-${Math.random()}${Math.random()}`;\n    try {\n        globalThis.localStorage.setItem(randomKey, randomKey);\n        globalThis.localStorage.removeItem(randomKey);\n        localStorageWriteTests.tested = true;\n        localStorageWriteTests.writable = true;\n    }\n    catch (e) {\n        // localStorage can't be written to\n        // https://www.chromium.org/for-testers/bug-reporting-guidelines/uncaught-securityerror-failed-to-read-the-localstorage-property-from-window-access-is-denied-for-this-document\n        localStorageWriteTests.tested = true;\n        localStorageWriteTests.writable = false;\n    }\n    return localStorageWriteTests.writable;\n};\nexport function getParameterByName(name, url) {\n    var _a;\n    if (!url)\n        url = ((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.href) || '';\n    // eslint-disable-next-line no-useless-escape\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n    const regex = new RegExp('[?&#]' + name + '(=([^&#]*)|&|#|$)'), results = regex.exec(url);\n    if (!results)\n        return null;\n    if (!results[2])\n        return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const looksLikeFetchResponse = (maybeResponse) => {\n    return (typeof maybeResponse === 'object' &&\n        maybeResponse !== null &&\n        'status' in maybeResponse &&\n        'ok' in maybeResponse &&\n        'json' in maybeResponse &&\n        typeof maybeResponse.json === 'function');\n};\n// Storage helpers\nexport const setItemAsync = (storage, key, data) => __awaiter(void 0, void 0, void 0, function* () {\n    yield storage.setItem(key, JSON.stringify(data));\n});\nexport const getItemAsync = (storage, key) => __awaiter(void 0, void 0, void 0, function* () {\n    const value = yield storage.getItem(key);\n    if (!value) {\n        return null;\n    }\n    try {\n        return JSON.parse(value);\n    }\n    catch (_a) {\n        return value;\n    }\n});\nexport const removeItemAsync = (storage, key) => __awaiter(void 0, void 0, void 0, function* () {\n    yield storage.removeItem(key);\n});\nexport function decodeBase64URL(value) {\n    const key = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    let base64 = '';\n    let chr1, chr2, chr3;\n    let enc1, enc2, enc3, enc4;\n    let i = 0;\n    value = value.replace('-', '+').replace('_', '/');\n    while (i < value.length) {\n        enc1 = key.indexOf(value.charAt(i++));\n        enc2 = key.indexOf(value.charAt(i++));\n        enc3 = key.indexOf(value.charAt(i++));\n        enc4 = key.indexOf(value.charAt(i++));\n        chr1 = (enc1 << 2) | (enc2 >> 4);\n        chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n        chr3 = ((enc3 & 3) << 6) | enc4;\n        base64 = base64 + String.fromCharCode(chr1);\n        if (enc3 != 64 && chr2 != 0) {\n            base64 = base64 + String.fromCharCode(chr2);\n        }\n        if (enc4 != 64 && chr3 != 0) {\n            base64 = base64 + String.fromCharCode(chr3);\n        }\n    }\n    return base64;\n}\n/**\n * A deferred represents some asynchronous work that is not yet finished, which\n * may or may not culminate in a value.\n * Taken from: https://github.com/mike-north/types/blob/master/src/async.ts\n */\nexport class Deferred {\n    constructor() {\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi\n        ;\n        this.promise = new Deferred.promiseConstructor((res, rej) => {\n            // eslint-disable-next-line @typescript-eslint/no-extra-semi\n            ;\n            this.resolve = res;\n            this.reject = rej;\n        });\n    }\n}\nDeferred.promiseConstructor = Promise;\n// Taken from: https://stackoverflow.com/questions/38552003/how-to-decode-jwt-token-in-javascript-without-using-a-library\nexport function decodeJWTPayload(token) {\n    // Regex checks for base64url format\n    const base64UrlRegex = /^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i;\n    const parts = token.split('.');\n    if (parts.length !== 3) {\n        throw new Error('JWT is not valid: not a JWT structure');\n    }\n    if (!base64UrlRegex.test(parts[1])) {\n        throw new Error('JWT is not valid: payload is not in base64url format');\n    }\n    const base64Url = parts[1];\n    return JSON.parse(decodeBase64URL(base64Url));\n}\n/**\n * Creates a promise that resolves to null after some time.\n */\nexport function sleep(time) {\n    return new Promise((accept) => {\n        setTimeout(() => accept(null), time);\n    });\n}\n/**\n * Converts the provided async function into a retryable function. Each result\n * or thrown error is sent to the isRetryable function which should return true\n * if the function should run again.\n */\nexport function retryable(fn, isRetryable) {\n    const promise = new Promise((accept, reject) => {\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi\n        ;\n        (() => __awaiter(this, void 0, void 0, function* () {\n            for (let attempt = 0; attempt < Infinity; attempt++) {\n                try {\n                    const result = yield fn(attempt);\n                    if (!isRetryable(attempt, null, result)) {\n                        accept(result);\n                        return;\n                    }\n                }\n                catch (e) {\n                    if (!isRetryable(attempt, e)) {\n                        reject(e);\n                        return;\n                    }\n                }\n            }\n        }))();\n    });\n    return promise;\n}\nfunction dec2hex(dec) {\n    return ('0' + dec.toString(16)).substr(-2);\n}\n// Functions below taken from: https://stackoverflow.com/questions/63309409/creating-a-code-verifier-and-challenge-for-pkce-auth-on-spotify-api-in-reactjs\nexport function generatePKCEVerifier() {\n    const verifierLength = 56;\n    const array = new Uint32Array(verifierLength);\n    if (typeof crypto === 'undefined') {\n        const charSet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~';\n        const charSetLen = charSet.length;\n        let verifier = '';\n        for (let i = 0; i < verifierLength; i++) {\n            verifier += charSet.charAt(Math.floor(Math.random() * charSetLen));\n        }\n        return verifier;\n    }\n    crypto.getRandomValues(array);\n    return Array.from(array, dec2hex).join('');\n}\nfunction sha256(randomString) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const encoder = new TextEncoder();\n        const encodedData = encoder.encode(randomString);\n        const hash = yield crypto.subtle.digest('SHA-256', encodedData);\n        const bytes = new Uint8Array(hash);\n        return Array.from(bytes)\n            .map((c) => String.fromCharCode(c))\n            .join('');\n    });\n}\nfunction base64urlencode(str) {\n    return btoa(str).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n}\nexport function generatePKCEChallenge(verifier) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (typeof crypto === 'undefined') {\n            console.warn('WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256.');\n            return verifier;\n        }\n        const hashed = yield sha256(verifier);\n        return base64urlencode(hashed);\n    });\n}\n//# sourceMappingURL=helpers.js.map","export class AuthError extends Error {\n    constructor(message, status) {\n        super(message);\n        this.__isAuthError = true;\n        this.name = 'AuthError';\n        this.status = status;\n    }\n}\nexport function isAuthError(error) {\n    return typeof error === 'object' && error !== null && '__isAuthError' in error;\n}\nexport class AuthApiError extends AuthError {\n    constructor(message, status) {\n        super(message, status);\n        this.name = 'AuthApiError';\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport function isAuthApiError(error) {\n    return isAuthError(error) && error.name === 'AuthApiError';\n}\nexport class AuthUnknownError extends AuthError {\n    constructor(message, originalError) {\n        super(message);\n        this.name = 'AuthUnknownError';\n        this.originalError = originalError;\n    }\n}\nexport class CustomAuthError extends AuthError {\n    constructor(message, name, status) {\n        super(message);\n        this.name = name;\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport class AuthSessionMissingError extends CustomAuthError {\n    constructor() {\n        super('Auth session missing!', 'AuthSessionMissingError', 400);\n    }\n}\nexport class AuthInvalidCredentialsError extends CustomAuthError {\n    constructor(message) {\n        super(message, 'AuthInvalidCredentialsError', 400);\n    }\n}\nexport class AuthImplicitGrantRedirectError extends CustomAuthError {\n    constructor(message, details = null) {\n        super(message, 'AuthImplicitGrantRedirectError', 500);\n        this.details = null;\n        this.details = details;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n            details: this.details,\n        };\n    }\n}\nexport class AuthPKCEGrantCodeExchangeError extends CustomAuthError {\n    constructor(message, details = null) {\n        super(message, 'AuthPKCEGrantCodeExchangeError', 500);\n        this.details = null;\n        this.details = details;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n            details: this.details,\n        };\n    }\n}\nexport class AuthRetryableFetchError extends CustomAuthError {\n    constructor(message, status) {\n        super(message, 'AuthRetryableFetchError', status);\n    }\n}\n//# sourceMappingURL=errors.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { expiresAt, looksLikeFetchResponse } from './helpers';\nimport { AuthApiError, AuthRetryableFetchError, AuthUnknownError } from './errors';\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError = (error, reject) => __awaiter(void 0, void 0, void 0, function* () {\n    const NETWORK_ERROR_CODES = [502, 503, 504];\n    if (!looksLikeFetchResponse(error)) {\n        reject(new AuthRetryableFetchError(_getErrorMessage(error), 0));\n    }\n    else if (NETWORK_ERROR_CODES.includes(error.status)) {\n        // status in 500...599 range - server had an error, request might be retryed.\n        reject(new AuthRetryableFetchError(_getErrorMessage(error), error.status));\n    }\n    else {\n        // got a response from server that is not in the 500...599 range - should not retry\n        error\n            .json()\n            .then((err) => {\n            reject(new AuthApiError(_getErrorMessage(err), error.status || 500));\n        })\n            .catch((e) => {\n            // not a valid json response\n            reject(new AuthUnknownError(_getErrorMessage(e), e));\n        });\n    }\n});\nconst _getRequestParams = (method, options, parameters, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'application/json;charset=UTF-8' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return Object.assign(Object.assign({}, params), parameters);\n};\nexport function _request(fetcher, method, url, options) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const headers = Object.assign({}, options === null || options === void 0 ? void 0 : options.headers);\n        if (options === null || options === void 0 ? void 0 : options.jwt) {\n            headers['Authorization'] = `Bearer ${options.jwt}`;\n        }\n        const qs = (_a = options === null || options === void 0 ? void 0 : options.query) !== null && _a !== void 0 ? _a : {};\n        if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n            qs['redirect_to'] = options.redirectTo;\n        }\n        const queryString = Object.keys(qs).length ? '?' + new URLSearchParams(qs).toString() : '';\n        const data = yield _handleRequest(fetcher, method, url + queryString, { headers, noResolveJson: options === null || options === void 0 ? void 0 : options.noResolveJson }, {}, options === null || options === void 0 ? void 0 : options.body);\n        return (options === null || options === void 0 ? void 0 : options.xform) ? options === null || options === void 0 ? void 0 : options.xform(data) : { data: Object.assign({}, data), error: null };\n    });\n}\nfunction _handleRequest(fetcher, method, url, options, parameters, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetcher(url, _getRequestParams(method, options, parameters, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return result;\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError(error, reject));\n        });\n    });\n}\nexport function _sessionResponse(data) {\n    var _a;\n    let session = null;\n    if (hasSession(data)) {\n        session = Object.assign({}, data);\n        session.expires_at = expiresAt(data.expires_in);\n    }\n    const user = (_a = data.user) !== null && _a !== void 0 ? _a : data;\n    return { data: { session, user }, error: null };\n}\nexport function _userResponse(data) {\n    var _a;\n    const user = (_a = data.user) !== null && _a !== void 0 ? _a : data;\n    return { data: { user }, error: null };\n}\nexport function _ssoResponse(data) {\n    return { data, error: null };\n}\nexport function _generateLinkResponse(data) {\n    const { action_link, email_otp, hashed_token, redirect_to, verification_type } = data, rest = __rest(data, [\"action_link\", \"email_otp\", \"hashed_token\", \"redirect_to\", \"verification_type\"]);\n    const properties = {\n        action_link,\n        email_otp,\n        hashed_token,\n        redirect_to,\n        verification_type,\n    };\n    const user = Object.assign({}, rest);\n    return {\n        data: {\n            properties,\n            user,\n        },\n        error: null,\n    };\n}\nexport function _noResolveJsonResponse(data) {\n    return data;\n}\n/**\n * hasSession checks if the response object contains a valid session\n * @param data A response object\n * @returns true if a session is in the response\n */\nfunction hasSession(data) {\n    return data.access_token && data.refresh_token && data.expires_in;\n}\n//# sourceMappingURL=fetch.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { _generateLinkResponse, _noResolveJsonResponse, _request, _userResponse, } from './lib/fetch';\nimport { resolveFetch } from './lib/helpers';\nimport { isAuthError } from './lib/errors';\nexport default class GoTrueAdminApi {\n    constructor({ url = '', headers = {}, fetch, }) {\n        this.url = url;\n        this.headers = headers;\n        this.fetch = resolveFetch(fetch);\n        this.mfa = {\n            listFactors: this._listFactors.bind(this),\n            deleteFactor: this._deleteFactor.bind(this),\n        };\n    }\n    /**\n     * Removes a logged-in session.\n     * @param jwt A valid, logged-in JWT.\n     */\n    signOut(jwt) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield _request(this.fetch, 'POST', `${this.url}/logout`, {\n                    headers: this.headers,\n                    jwt,\n                    noResolveJson: true,\n                });\n                return { data: null, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Sends an invite link to an email address.\n     * @param email The email address of the user.\n     * @param options Additional options to be included when inviting.\n     */\n    inviteUserByEmail(email, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/invite`, {\n                    body: { email, data: options.data },\n                    headers: this.headers,\n                    redirectTo: options.redirectTo,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Generates email links and OTPs to be sent via a custom email provider.\n     * @param email The user's email.\n     * @param options.password User password. For signup only.\n     * @param options.data Optional user metadata. For signup only.\n     * @param options.redirectTo The redirect url which should be appended to the generated link\n     */\n    generateLink(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { options } = params, rest = __rest(params, [\"options\"]);\n                const body = Object.assign(Object.assign({}, rest), options);\n                if ('newEmail' in rest) {\n                    // replace newEmail with new_email in request body\n                    body.new_email = rest === null || rest === void 0 ? void 0 : rest.newEmail;\n                    delete body['newEmail'];\n                }\n                return yield _request(this.fetch, 'POST', `${this.url}/admin/generate_link`, {\n                    body: body,\n                    headers: this.headers,\n                    xform: _generateLinkResponse,\n                    redirectTo: options === null || options === void 0 ? void 0 : options.redirectTo,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return {\n                        data: {\n                            properties: null,\n                            user: null,\n                        },\n                        error,\n                    };\n                }\n                throw error;\n            }\n        });\n    }\n    // User Admin API\n    /**\n     * Creates a new user.\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    createUser(attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/admin/users`, {\n                    body: attributes,\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get a list of users.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     * @param params An object which supports `page` and `perPage` as numbers, to alter the paginated results.\n     */\n    listUsers(params) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const pagination = { nextPage: null, lastPage: 0, total: 0 };\n                const response = yield _request(this.fetch, 'GET', `${this.url}/admin/users`, {\n                    headers: this.headers,\n                    noResolveJson: true,\n                    query: {\n                        page: (_b = (_a = params === null || params === void 0 ? void 0 : params.page) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : '',\n                        per_page: (_d = (_c = params === null || params === void 0 ? void 0 : params.perPage) === null || _c === void 0 ? void 0 : _c.toString()) !== null && _d !== void 0 ? _d : '',\n                    },\n                    xform: _noResolveJsonResponse,\n                });\n                if (response.error)\n                    throw response.error;\n                const users = yield response.json();\n                const total = (_e = response.headers.get('x-total-count')) !== null && _e !== void 0 ? _e : 0;\n                const links = (_g = (_f = response.headers.get('link')) === null || _f === void 0 ? void 0 : _f.split(',')) !== null && _g !== void 0 ? _g : [];\n                if (links.length > 0) {\n                    links.forEach((link) => {\n                        const page = parseInt(link.split(';')[0].split('=')[1].substring(0, 1));\n                        const rel = JSON.parse(link.split(';')[1].split('=')[1]);\n                        pagination[`${rel}Page`] = page;\n                    });\n                    pagination.total = parseInt(total);\n                }\n                return { data: Object.assign(Object.assign({}, users), pagination), error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { users: [] }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get user by id.\n     *\n     * @param uid The user's unique identifier\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    getUserById(uid) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'GET', `${this.url}/admin/users/${uid}`, {\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates the user data.\n     *\n     * @param attributes The data you want to update.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    updateUserById(uid, attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'PUT', `${this.url}/admin/users/${uid}`, {\n                    body: attributes,\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Delete a user. Requires a `service_role` key.\n     *\n     * @param id The user id you want to remove.\n     * @param shouldSoftDelete If true, then the user will be soft-deleted from the auth schema.\n     * Defaults to false for backward compatibility.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    deleteUser(id, shouldSoftDelete = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'DELETE', `${this.url}/admin/users/${id}`, {\n                    headers: this.headers,\n                    body: {\n                        should_soft_delete: shouldSoftDelete,\n                    },\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _listFactors(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data, error } = yield _request(this.fetch, 'GET', `${this.url}/admin/users/${params.userId}/factors`, {\n                    headers: this.headers,\n                    xform: (factors) => {\n                        return { data: { factors }, error: null };\n                    },\n                });\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _deleteFactor(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield _request(this.fetch, 'DELETE', `${this.url}/admin/users/${params.userId}/factors/${params.id}`, {\n                    headers: this.headers,\n                });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n}\n//# sourceMappingURL=GoTrueAdminApi.js.map","// Generated by genversion.\nexport const version = '2.28.1';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const GOTRUE_URL = 'http://localhost:9999';\nexport const STORAGE_KEY = 'supabase.auth.token';\nexport const AUDIENCE = '';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `gotrue-js/${version}` };\nexport const EXPIRY_MARGIN = 10; // in seconds\nexport const NETWORK_FAILURE = {\n    MAX_RETRIES: 10,\n    RETRY_INTERVAL: 2, // in deciseconds\n};\n//# sourceMappingURL=constants.js.map","import { supportsLocalStorage } from './helpers';\nconst localStorageAdapter = {\n    getItem: (key) => {\n        if (!supportsLocalStorage()) {\n            return null;\n        }\n        return globalThis.localStorage.getItem(key);\n    },\n    setItem: (key, value) => {\n        if (!supportsLocalStorage()) {\n            return;\n        }\n        globalThis.localStorage.setItem(key, value);\n    },\n    removeItem: (key) => {\n        if (!supportsLocalStorage()) {\n            return;\n        }\n        globalThis.localStorage.removeItem(key);\n    },\n};\nexport default localStorageAdapter;\n//# sourceMappingURL=local-storage.js.map","/**\n * https://mathiasbynens.be/notes/globalthis\n */\nexport function polyfillGlobalThis() {\n    if (typeof globalThis === 'object')\n        return;\n    try {\n        Object.defineProperty(Object.prototype, '__magic__', {\n            get: function () {\n                return this;\n            },\n            configurable: true,\n        });\n        // @ts-expect-error 'Allow access to magic'\n        __magic__.globalThis = __magic__;\n        // @ts-expect-error 'Allow access to magic'\n        delete Object.prototype.__magic__;\n    }\n    catch (e) {\n        if (typeof self !== 'undefined') {\n            // @ts-expect-error 'Allow access to globals'\n            self.globalThis = self;\n        }\n    }\n}\n//# sourceMappingURL=polyfills.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport GoTrueAdminApi from './GoTrueAdminApi';\nimport { DEFAULT_HEADERS, EXPIRY_MARGIN, GOTRUE_URL, STORAGE_KEY } from './lib/constants';\nimport { AuthImplicitGrantRedirectError, AuthPKCEGrantCodeExchangeError, AuthInvalidCredentialsError, AuthRetryableFetchError, AuthSessionMissingError, AuthUnknownError, isAuthApiError, isAuthError, } from './lib/errors';\nimport { _request, _sessionResponse, _userResponse, _ssoResponse } from './lib/fetch';\nimport { decodeJWTPayload, Deferred, getItemAsync, getParameterByName, isBrowser, removeItemAsync, resolveFetch, setItemAsync, uuid, retryable, sleep, generatePKCEVerifier, generatePKCEChallenge, supportsLocalStorage, } from './lib/helpers';\nimport localStorageAdapter from './lib/local-storage';\nimport { polyfillGlobalThis } from './lib/polyfills';\npolyfillGlobalThis(); // Make \"globalThis\" available\nconst DEFAULT_OPTIONS = {\n    url: GOTRUE_URL,\n    storageKey: STORAGE_KEY,\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n    headers: DEFAULT_HEADERS,\n    flowType: 'implicit',\n};\n/** Current session will be checked for refresh at this interval. */\nconst AUTO_REFRESH_TICK_DURATION = 30 * 1000;\n/**\n * A token refresh will be attempted this many ticks before the current session expires. */\nconst AUTO_REFRESH_TICK_THRESHOLD = 3;\nexport default class GoTrueClient {\n    /**\n     * Create a new client for use in the browser.\n     */\n    constructor(options) {\n        var _a;\n        this.stateChangeEmitters = new Map();\n        this.autoRefreshTicker = null;\n        this.visibilityChangedCallback = null;\n        this.refreshingDeferred = null;\n        /**\n         * Keeps track of the async client initialization.\n         * When null or not yet resolved the auth state is `unknown`\n         * Once resolved the the auth state is known and it's save to call any further client methods.\n         * Keep extra care to never reject or throw uncaught errors\n         */\n        this.initializePromise = null;\n        this.detectSessionInUrl = true;\n        /**\n         * Used to broadcast state change events to other tabs listening.\n         */\n        this.broadcastChannel = null;\n        const settings = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n        this.inMemorySession = null;\n        this.storageKey = settings.storageKey;\n        this.autoRefreshToken = settings.autoRefreshToken;\n        this.persistSession = settings.persistSession;\n        this.storage = settings.storage || localStorageAdapter;\n        this.admin = new GoTrueAdminApi({\n            url: settings.url,\n            headers: settings.headers,\n            fetch: settings.fetch,\n        });\n        this.url = settings.url;\n        this.headers = settings.headers;\n        this.fetch = resolveFetch(settings.fetch);\n        this.detectSessionInUrl = settings.detectSessionInUrl;\n        this.flowType = settings.flowType;\n        this.mfa = {\n            verify: this._verify.bind(this),\n            enroll: this._enroll.bind(this),\n            unenroll: this._unenroll.bind(this),\n            challenge: this._challenge.bind(this),\n            listFactors: this._listFactors.bind(this),\n            challengeAndVerify: this._challengeAndVerify.bind(this),\n            getAuthenticatorAssuranceLevel: this._getAuthenticatorAssuranceLevel.bind(this),\n        };\n        if (this.persistSession && this.storage === localStorageAdapter && !supportsLocalStorage()) {\n            console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.\n        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`);\n        }\n        if (isBrowser() && globalThis.BroadcastChannel && this.persistSession && this.storageKey) {\n            try {\n                this.broadcastChannel = new globalThis.BroadcastChannel(this.storageKey);\n            }\n            catch (e) {\n                console.error('Failed to create a new BroadcastChannel, multi-tab state changes will not be available', e);\n            }\n            (_a = this.broadcastChannel) === null || _a === void 0 ? void 0 : _a.addEventListener('message', (event) => {\n                this._notifyAllSubscribers(event.data.event, event.data.session, false); // broadcast = false so we don't get an endless loop of messages\n            });\n        }\n        this.initialize();\n    }\n    /**\n     * Initializes the client session either from the url or from storage.\n     * This method is automatically called when instantiating the client, but should also be called\n     * manually when checking for an error from an auth redirect (oauth, magiclink, password recovery, etc).\n     */\n    initialize() {\n        if (!this.initializePromise) {\n            this.initializePromise = this._initialize();\n        }\n        return this.initializePromise;\n    }\n    /**\n     * IMPORTANT:\n     * 1. Never throw in this method, as it is called from the constructor\n     * 2. Never return a session from this method as it would be cached over\n     *    the whole lifetime of the client\n     */\n    _initialize() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.initializePromise) {\n                return this.initializePromise;\n            }\n            try {\n                const isPKCEFlow = yield this._isPKCEFlow();\n                if ((this.detectSessionInUrl && this._isImplicitGrantFlow()) || isPKCEFlow) {\n                    const { data, error } = yield this._getSessionFromUrl(isPKCEFlow);\n                    if (error) {\n                        // failed login attempt via url,\n                        // remove old session as in verifyOtp, signUp and signInWith*\n                        yield this._removeSession();\n                        return { error };\n                    }\n                    const { session, redirectType } = data;\n                    yield this._saveSession(session);\n                    setTimeout(() => {\n                        if (redirectType === 'recovery') {\n                            this._notifyAllSubscribers('PASSWORD_RECOVERY', session);\n                        }\n                        else {\n                            this._notifyAllSubscribers('SIGNED_IN', session);\n                        }\n                    }, 0);\n                    return { error: null };\n                }\n                // no login attempt via callback url try to recover session from storage\n                yield this._recoverAndRefresh();\n                return { error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { error };\n                }\n                return {\n                    error: new AuthUnknownError('Unexpected error during initialization', error),\n                };\n            }\n            finally {\n                yield this._handleVisibilityChange();\n            }\n        });\n    }\n    /**\n     * Creates a new user.\n     *\n     * Be aware that if a user account exists in the system you may get back an\n     * error message that attempts to hide this information from the user.\n     * This method has support for PKCE via email signups. The PKCE flow cannot be used when autoconfirm is enabled.\n     *\n     * @returns A logged-in session if the server has \"autoconfirm\" ON\n     * @returns A user if the server has \"autoconfirm\" OFF\n     */\n    signUp(credentials) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                let res;\n                if ('email' in credentials) {\n                    const { email, password, options } = credentials;\n                    let codeChallenge = null;\n                    let codeChallengeMethod = null;\n                    if (this.flowType === 'pkce') {\n                        const codeVerifier = generatePKCEVerifier();\n                        yield setItemAsync(this.storage, `${this.storageKey}-code-verifier`, codeVerifier);\n                        codeChallenge = yield generatePKCEChallenge(codeVerifier);\n                        codeChallengeMethod = codeVerifier === codeChallenge ? 'plain' : 's256';\n                    }\n                    res = yield _request(this.fetch, 'POST', `${this.url}/signup`, {\n                        headers: this.headers,\n                        redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                        body: {\n                            email,\n                            password,\n                            data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                            code_challenge: codeChallenge,\n                            code_challenge_method: codeChallengeMethod,\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else if ('phone' in credentials) {\n                    const { phone, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/signup`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            password,\n                            data: (_b = options === null || options === void 0 ? void 0 : options.data) !== null && _b !== void 0 ? _b : {},\n                            channel: (_c = options === null || options === void 0 ? void 0 : options.channel) !== null && _c !== void 0 ? _c : 'sms',\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else {\n                    throw new AuthInvalidCredentialsError('You must provide either an email or phone number and a password');\n                }\n                const { data, error } = res;\n                if (error || !data) {\n                    return { data: { user: null, session: null }, error: error };\n                }\n                const session = data.session;\n                const user = data.user;\n                if (data.session) {\n                    yield this._saveSession(data.session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                }\n                return { data: { user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in an existing user with an email and password or phone and password.\n     *\n     * Be aware that you may get back an error message that will not distinguish\n     * between the cases where the account does not exist or that the\n     * email/phone and password combination is wrong or that the account can only\n     * be accessed via social login.\n     */\n    signInWithPassword(credentials) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                let res;\n                if ('email' in credentials) {\n                    const { email, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=password`, {\n                        headers: this.headers,\n                        body: {\n                            email,\n                            password,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else if ('phone' in credentials) {\n                    const { phone, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=password`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            password,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else {\n                    throw new AuthInvalidCredentialsError('You must provide either an email or phone number and a password');\n                }\n                const { data, error } = res;\n                if (error || !data)\n                    return { data: { user: null, session: null }, error };\n                if (data.session) {\n                    yield this._saveSession(data.session);\n                    this._notifyAllSubscribers('SIGNED_IN', data.session);\n                }\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in an existing user via a third-party provider.\n     * This method supports the PKCE flow.\n     */\n    signInWithOAuth(credentials) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._removeSession();\n            return yield this._handleProviderSignIn(credentials.provider, {\n                redirectTo: (_a = credentials.options) === null || _a === void 0 ? void 0 : _a.redirectTo,\n                scopes: (_b = credentials.options) === null || _b === void 0 ? void 0 : _b.scopes,\n                queryParams: (_c = credentials.options) === null || _c === void 0 ? void 0 : _c.queryParams,\n                skipBrowserRedirect: (_d = credentials.options) === null || _d === void 0 ? void 0 : _d.skipBrowserRedirect,\n            });\n        });\n    }\n    /**\n     * Log in an existing user by exchanging an Auth Code issued during the PKCE flow.\n     */\n    exchangeCodeForSession(authCode) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const codeVerifier = yield getItemAsync(this.storage, `${this.storageKey}-code-verifier`);\n            const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=pkce`, {\n                headers: this.headers,\n                body: {\n                    auth_code: authCode,\n                    code_verifier: codeVerifier,\n                },\n                xform: _sessionResponse,\n            });\n            yield removeItemAsync(this.storage, `${this.storageKey}-code-verifier`);\n            if (error || !data)\n                return { data: { user: null, session: null }, error };\n            if (data.session) {\n                yield this._saveSession(data.session);\n                this._notifyAllSubscribers('SIGNED_IN', data.session);\n            }\n            return { data, error };\n        });\n    }\n    /**\n     * Allows signing in with an ID token issued by certain supported providers.\n     * The ID token is verified for validity and a new session is established.\n     *\n     * @experimental\n     */\n    signInWithIdToken(credentials) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._removeSession();\n            try {\n                const { options, provider, token, nonce } = credentials;\n                const res = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=id_token`, {\n                    headers: this.headers,\n                    body: {\n                        provider,\n                        id_token: token,\n                        nonce,\n                        gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                    },\n                    xform: _sessionResponse,\n                });\n                const { data, error } = res;\n                if (error || !data)\n                    return { data: { user: null, session: null }, error };\n                if (data.session) {\n                    yield this._saveSession(data.session);\n                    this._notifyAllSubscribers('SIGNED_IN', data.session);\n                }\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in a user using magiclink or a one-time password (OTP).\n     *\n     * If the `{{ .ConfirmationURL }}` variable is specified in the email template, a magiclink will be sent.\n     * If the `{{ .Token }}` variable is specified in the email template, an OTP will be sent.\n     * If you're using phone sign-ins, only an OTP will be sent. You won't be able to send a magiclink for phone sign-ins.\n     *\n     * Be aware that you may get back an error message that will not distinguish\n     * between the cases where the account does not exist or, that the account\n     * can only be accessed via social login.\n     *\n     * Do note that you will need to configure a Whatsapp sender on Twilio\n     * if you are using phone sign in with the 'whatsapp' channel. The whatsapp\n     * channel is not supported on other providers\n     * at this time.\n     * This method supports PKCE when an email is passed.\n     */\n    signInWithOtp(credentials) {\n        var _a, _b, _c, _d, _e;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                if ('email' in credentials) {\n                    const { email, options } = credentials;\n                    let codeChallenge = null;\n                    let codeChallengeMethod = null;\n                    if (this.flowType === 'pkce') {\n                        const codeVerifier = generatePKCEVerifier();\n                        yield setItemAsync(this.storage, `${this.storageKey}-code-verifier`, codeVerifier);\n                        codeChallenge = yield generatePKCEChallenge(codeVerifier);\n                        codeChallengeMethod = codeVerifier === codeChallenge ? 'plain' : 's256';\n                    }\n                    const { error } = yield _request(this.fetch, 'POST', `${this.url}/otp`, {\n                        headers: this.headers,\n                        body: {\n                            email,\n                            data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                            create_user: (_b = options === null || options === void 0 ? void 0 : options.shouldCreateUser) !== null && _b !== void 0 ? _b : true,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                            code_challenge: codeChallenge,\n                            code_challenge_method: codeChallengeMethod,\n                        },\n                        redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                    });\n                    return { data: { user: null, session: null }, error };\n                }\n                if ('phone' in credentials) {\n                    const { phone, options } = credentials;\n                    const { error } = yield _request(this.fetch, 'POST', `${this.url}/otp`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            data: (_c = options === null || options === void 0 ? void 0 : options.data) !== null && _c !== void 0 ? _c : {},\n                            create_user: (_d = options === null || options === void 0 ? void 0 : options.shouldCreateUser) !== null && _d !== void 0 ? _d : true,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                            channel: (_e = options === null || options === void 0 ? void 0 : options.channel) !== null && _e !== void 0 ? _e : 'sms',\n                        },\n                    });\n                    return { data: { user: null, session: null }, error };\n                }\n                throw new AuthInvalidCredentialsError('You must provide either an email or phone number.');\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in a user given a User supplied OTP received via mobile.\n     */\n    verifyOtp(params) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (params.type !== 'email_change' && params.type !== 'phone_change') {\n                    // we don't want to remove the authenticated session if the user is performing an email_change or phone_change verification\n                    yield this._removeSession();\n                }\n                const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/verify`, {\n                    headers: this.headers,\n                    body: Object.assign(Object.assign({}, params), { gotrue_meta_security: { captcha_token: (_a = params.options) === null || _a === void 0 ? void 0 : _a.captchaToken } }),\n                    redirectTo: (_b = params.options) === null || _b === void 0 ? void 0 : _b.redirectTo,\n                    xform: _sessionResponse,\n                });\n                if (error) {\n                    throw error;\n                }\n                if (!data) {\n                    throw new Error('An error occurred on token verification.');\n                }\n                const session = data.session;\n                const user = data.user;\n                if (session === null || session === void 0 ? void 0 : session.access_token) {\n                    yield this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                }\n                return { data: { user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Attempts a single-sign on using an enterprise Identity Provider. A\n     * successful SSO attempt will redirect the current page to the identity\n     * provider authorization page. The redirect URL is implementation and SSO\n     * protocol specific.\n     *\n     * You can use it by providing a SSO domain. Typically you can extract this\n     * domain by asking users for their email address. If this domain is\n     * registered on the Auth instance the redirect will use that organization's\n     * currently active SSO Identity Provider for the login.\n     *\n     * If you have built an organization-specific login page, you can use the\n     * organization's SSO Identity Provider UUID directly instead.\n     */\n    signInWithSSO(params) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                return yield _request(this.fetch, 'POST', `${this.url}/sso`, {\n                    body: Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, ('providerId' in params ? { provider_id: params.providerId } : null)), ('domain' in params ? { domain: params.domain } : null)), { redirect_to: (_b = (_a = params.options) === null || _a === void 0 ? void 0 : _a.redirectTo) !== null && _b !== void 0 ? _b : undefined }), (((_c = params === null || params === void 0 ? void 0 : params.options) === null || _c === void 0 ? void 0 : _c.captchaToken)\n                        ? { gotrue_meta_security: { captcha_token: params.options.captchaToken } }\n                        : null)), { skip_http_redirect: true }),\n                    headers: this.headers,\n                    xform: _ssoResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Sends a reauthentication OTP to the user's email or phone number.\n     * Requires the user to be signed-in.\n     */\n    reauthenticate() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: { session }, error: sessionError, } = yield this.getSession();\n                if (sessionError)\n                    throw sessionError;\n                if (!session)\n                    throw new AuthSessionMissingError();\n                const { error } = yield _request(this.fetch, 'GET', `${this.url}/reauthenticate`, {\n                    headers: this.headers,\n                    jwt: session.access_token,\n                });\n                return { data: { user: null, session: null }, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Resends an existing signup confirmation email, email change email, SMS OTP or phone change OTP.\n     */\n    resend(credentials) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                const endpoint = `${this.url}/resend`;\n                if ('email' in credentials) {\n                    const { email, type, options } = credentials;\n                    const { error } = yield _request(this.fetch, 'POST', endpoint, {\n                        headers: this.headers,\n                        body: {\n                            email,\n                            type,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                    });\n                    return { data: { user: null, session: null }, error };\n                }\n                else if ('phone' in credentials) {\n                    const { phone, type, options } = credentials;\n                    const { error } = yield _request(this.fetch, 'POST', endpoint, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            type,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                    });\n                    return { data: { user: null, session: null }, error };\n                }\n                throw new AuthInvalidCredentialsError('You must provide either an email or phone number and a type');\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Returns the session, refreshing it if necessary.\n     * The session returned can be null if the session is not detected which can happen in the event a user is not signed-in or has logged out.\n     */\n    getSession() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // make sure we've read the session from the url if there is one\n            // save to just await, as long we make sure _initialize() never throws\n            yield this.initializePromise;\n            let currentSession = null;\n            if (this.persistSession) {\n                const maybeSession = yield getItemAsync(this.storage, this.storageKey);\n                if (maybeSession !== null) {\n                    if (this._isValidSession(maybeSession)) {\n                        currentSession = maybeSession;\n                    }\n                    else {\n                        yield this._removeSession();\n                    }\n                }\n            }\n            else {\n                currentSession = this.inMemorySession;\n            }\n            if (!currentSession) {\n                return { data: { session: null }, error: null };\n            }\n            const hasExpired = currentSession.expires_at\n                ? currentSession.expires_at <= Date.now() / 1000\n                : false;\n            if (!hasExpired) {\n                return { data: { session: currentSession }, error: null };\n            }\n            const { session, error } = yield this._callRefreshToken(currentSession.refresh_token);\n            if (error) {\n                return { data: { session: null }, error };\n            }\n            return { data: { session }, error: null };\n        });\n    }\n    /**\n     * Gets the current user details if there is an existing session.\n     * @param jwt Takes in an optional access token jwt. If no jwt is provided, getUser() will attempt to get the jwt from the current session.\n     */\n    getUser(jwt) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!jwt) {\n                    const { data, error } = yield this.getSession();\n                    if (error) {\n                        throw error;\n                    }\n                    // Default to Authorization header if there is no existing session\n                    jwt = (_b = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : undefined;\n                }\n                return yield _request(this.fetch, 'GET', `${this.url}/user`, {\n                    headers: this.headers,\n                    jwt: jwt,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates user data for a logged in user.\n     */\n    updateUser(attributes, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    throw sessionError;\n                }\n                if (!sessionData.session) {\n                    throw new AuthSessionMissingError();\n                }\n                const session = sessionData.session;\n                const { data, error: userError } = yield _request(this.fetch, 'PUT', `${this.url}/user`, {\n                    headers: this.headers,\n                    redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                    body: attributes,\n                    jwt: session.access_token,\n                    xform: _userResponse,\n                });\n                if (userError)\n                    throw userError;\n                session.user = data.user;\n                yield this._saveSession(session);\n                this._notifyAllSubscribers('USER_UPDATED', session);\n                return { data: { user: session.user }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Decodes a JWT (without performing any validation).\n     */\n    _decodeJWT(jwt) {\n        return decodeJWTPayload(jwt);\n    }\n    /**\n     * Sets the session data from the current session. If the current session is expired, setSession will take care of refreshing it to obtain a new session.\n     * If the refresh token or access token in the current session is invalid, an error will be thrown.\n     * @param currentSession The current session that minimally contains an access token and refresh token.\n     */\n    setSession(currentSession) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!currentSession.access_token || !currentSession.refresh_token) {\n                    throw new AuthSessionMissingError();\n                }\n                const timeNow = Date.now() / 1000;\n                let expiresAt = timeNow;\n                let hasExpired = true;\n                let session = null;\n                const payload = decodeJWTPayload(currentSession.access_token);\n                if (payload.exp) {\n                    expiresAt = payload.exp;\n                    hasExpired = expiresAt <= timeNow;\n                }\n                if (hasExpired) {\n                    const { session: refreshedSession, error } = yield this._callRefreshToken(currentSession.refresh_token);\n                    if (error) {\n                        return { data: { user: null, session: null }, error: error };\n                    }\n                    if (!refreshedSession) {\n                        return { data: { user: null, session: null }, error: null };\n                    }\n                    session = refreshedSession;\n                }\n                else {\n                    const { data, error } = yield this.getUser(currentSession.access_token);\n                    if (error) {\n                        throw error;\n                    }\n                    session = {\n                        access_token: currentSession.access_token,\n                        refresh_token: currentSession.refresh_token,\n                        user: data.user,\n                        token_type: 'bearer',\n                        expires_in: expiresAt - timeNow,\n                        expires_at: expiresAt,\n                    };\n                    yield this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                }\n                return { data: { user: session.user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Returns a new session, regardless of expiry status.\n     * Takes in an optional current session. If not passed in, then refreshSession() will attempt to retrieve it from getSession().\n     * If the current session's refresh token is invalid, an error will be thrown.\n     * @param currentSession The current session. If passed in, it must contain a refresh token.\n     */\n    refreshSession(currentSession) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!currentSession) {\n                    const { data, error } = yield this.getSession();\n                    if (error) {\n                        throw error;\n                    }\n                    currentSession = (_a = data.session) !== null && _a !== void 0 ? _a : undefined;\n                }\n                if (!(currentSession === null || currentSession === void 0 ? void 0 : currentSession.refresh_token)) {\n                    throw new AuthSessionMissingError();\n                }\n                const { session, error } = yield this._callRefreshToken(currentSession.refresh_token);\n                if (error) {\n                    return { data: { user: null, session: null }, error: error };\n                }\n                if (!session) {\n                    return { data: { user: null, session: null }, error: null };\n                }\n                return { data: { user: session.user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Gets the session data from a URL string\n     */\n    _getSessionFromUrl(isPKCEFlow) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!isBrowser())\n                    throw new AuthImplicitGrantRedirectError('No browser detected.');\n                if (this.flowType === 'implicit' && !this._isImplicitGrantFlow()) {\n                    throw new AuthImplicitGrantRedirectError('Not a valid implicit grant flow url.');\n                }\n                else if (this.flowType == 'pkce' && !isPKCEFlow) {\n                    throw new AuthPKCEGrantCodeExchangeError('Not a valid PKCE flow url.');\n                }\n                if (isPKCEFlow) {\n                    const authCode = getParameterByName('code');\n                    if (!authCode)\n                        throw new AuthPKCEGrantCodeExchangeError('No code detected.');\n                    const { data, error } = yield this.exchangeCodeForSession(authCode);\n                    if (error)\n                        throw error;\n                    if (!data.session)\n                        throw new AuthPKCEGrantCodeExchangeError('No session detected.');\n                    let url = new URL(window.location.href);\n                    url.searchParams.delete('code');\n                    window.history.replaceState(window.history.state, '', url.toString());\n                    return { data: { session: data.session, redirectType: null }, error: null };\n                }\n                const error_description = getParameterByName('error_description');\n                if (error_description) {\n                    const error_code = getParameterByName('error_code');\n                    if (!error_code)\n                        throw new AuthImplicitGrantRedirectError('No error_code detected.');\n                    const error = getParameterByName('error');\n                    if (!error)\n                        throw new AuthImplicitGrantRedirectError('No error detected.');\n                    throw new AuthImplicitGrantRedirectError(error_description, { error, code: error_code });\n                }\n                const provider_token = getParameterByName('provider_token');\n                const provider_refresh_token = getParameterByName('provider_refresh_token');\n                const access_token = getParameterByName('access_token');\n                if (!access_token)\n                    throw new AuthImplicitGrantRedirectError('No access_token detected.');\n                const expires_in = getParameterByName('expires_in');\n                if (!expires_in)\n                    throw new AuthImplicitGrantRedirectError('No expires_in detected.');\n                const refresh_token = getParameterByName('refresh_token');\n                if (!refresh_token)\n                    throw new AuthImplicitGrantRedirectError('No refresh_token detected.');\n                const token_type = getParameterByName('token_type');\n                if (!token_type)\n                    throw new AuthImplicitGrantRedirectError('No token_type detected.');\n                const timeNow = Math.round(Date.now() / 1000);\n                const expires_at = timeNow + parseInt(expires_in);\n                const { data, error } = yield this.getUser(access_token);\n                if (error)\n                    throw error;\n                const user = data.user;\n                const session = {\n                    provider_token,\n                    provider_refresh_token,\n                    access_token,\n                    expires_in: parseInt(expires_in),\n                    expires_at,\n                    refresh_token,\n                    token_type,\n                    user,\n                };\n                const redirectType = getParameterByName('type');\n                // Remove tokens from URL\n                window.location.hash = '';\n                return { data: { session, redirectType }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, redirectType: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Checks if the current URL contains parameters given by an implicit oauth grant flow (https://www.rfc-editor.org/rfc/rfc6749.html#section-4.2)\n     */\n    _isImplicitGrantFlow() {\n        return (isBrowser() &&\n            (Boolean(getParameterByName('access_token')) ||\n                Boolean(getParameterByName('error_description'))));\n    }\n    /**\n     * Checks if the current URL and backing storage contain parameters given by a PKCE flow\n     */\n    _isPKCEFlow() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const currentStorageContent = yield getItemAsync(this.storage, `${this.storageKey}-code-verifier`);\n            return isBrowser() && Boolean(getParameterByName('code')) && Boolean(currentStorageContent);\n        });\n    }\n    /**\n     * Inside a browser context, `signOut()` will remove the logged in user from the browser session\n     * and log them out - removing all items from localstorage and then trigger a `\"SIGNED_OUT\"` event.\n     *\n     * For server-side management, you can revoke all refresh tokens for a user by passing a user's JWT through to `auth.api.signOut(JWT: string)`.\n     * There is no way to revoke a user's access token jwt until it expires. It is recommended to set a shorter expiry on the jwt for this reason.\n     */\n    signOut() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data, error: sessionError } = yield this.getSession();\n            if (sessionError) {\n                return { error: sessionError };\n            }\n            const accessToken = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token;\n            if (accessToken) {\n                const { error } = yield this.admin.signOut(accessToken);\n                if (error) {\n                    // ignore 404s since user might not exist anymore\n                    // ignore 401s since an invalid or expired JWT should sign out the current session\n                    if (!(isAuthApiError(error) && (error.status === 404 || error.status === 401))) {\n                        return { error };\n                    }\n                }\n            }\n            yield this._removeSession();\n            yield removeItemAsync(this.storage, `${this.storageKey}-code-verifier`);\n            this._notifyAllSubscribers('SIGNED_OUT', null);\n            return { error: null };\n        });\n    }\n    /**\n     * Receive a notification every time an auth event happens.\n     * @param callback A callback function to be invoked when an auth event happens.\n     */\n    onAuthStateChange(callback) {\n        const id = uuid();\n        const subscription = {\n            id,\n            callback,\n            unsubscribe: () => {\n                this.stateChangeEmitters.delete(id);\n            },\n        };\n        this.stateChangeEmitters.set(id, subscription);\n        this.emitInitialSession(id);\n        return { data: { subscription } };\n    }\n    emitInitialSession(id) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: { session }, error, } = yield this.getSession();\n                if (error)\n                    throw error;\n                (_a = this.stateChangeEmitters.get(id)) === null || _a === void 0 ? void 0 : _a.callback('INITIAL_SESSION', session);\n            }\n            catch (err) {\n                (_b = this.stateChangeEmitters.get(id)) === null || _b === void 0 ? void 0 : _b.callback('INITIAL_SESSION', null);\n                console.error(err);\n            }\n        });\n    }\n    /**\n     * Sends a password reset request to an email address.\n     * This method supports the PKCE flow.\n     * @param email The email address of the user.\n     * @param options.redirectTo The URL to send the user to after they click the password reset link.\n     * @param options.captchaToken Verification token received when the user completes the captcha on the site.\n     */\n    resetPasswordForEmail(email, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let codeChallenge = null;\n            let codeChallengeMethod = null;\n            if (this.flowType === 'pkce') {\n                const codeVerifier = generatePKCEVerifier();\n                yield setItemAsync(this.storage, `${this.storageKey}-code-verifier`, codeVerifier);\n                codeChallenge = yield generatePKCEChallenge(codeVerifier);\n                codeChallengeMethod = codeVerifier === codeChallenge ? 'plain' : 's256';\n            }\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/recover`, {\n                    body: {\n                        email,\n                        code_challenge: codeChallenge,\n                        code_challenge_method: codeChallengeMethod,\n                        gotrue_meta_security: { captcha_token: options.captchaToken },\n                    },\n                    headers: this.headers,\n                    redirectTo: options.redirectTo,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Generates a new JWT.\n     * @param refreshToken A valid refresh token that was returned on login.\n     */\n    _refreshAccessToken(refreshToken) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const startedAt = Date.now();\n                // will attempt to refresh the token with exponential backoff\n                return yield retryable((attempt) => __awaiter(this, void 0, void 0, function* () {\n                    yield sleep(attempt * 200); // 0, 200, 400, 800, ...\n                    return yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=refresh_token`, {\n                        body: { refresh_token: refreshToken },\n                        headers: this.headers,\n                        xform: _sessionResponse,\n                    });\n                }), (attempt, _, result) => result &&\n                    result.error &&\n                    result.error instanceof AuthRetryableFetchError &&\n                    // retryable only if the request can be sent before the backoff overflows the tick duration\n                    Date.now() + (attempt + 1) * 200 - startedAt < AUTO_REFRESH_TICK_DURATION);\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _isValidSession(maybeSession) {\n        const isValidSession = typeof maybeSession === 'object' &&\n            maybeSession !== null &&\n            'access_token' in maybeSession &&\n            'refresh_token' in maybeSession &&\n            'expires_at' in maybeSession;\n        return isValidSession;\n    }\n    _handleProviderSignIn(provider, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const url = yield this._getUrlForProvider(provider, {\n                redirectTo: options.redirectTo,\n                scopes: options.scopes,\n                queryParams: options.queryParams,\n            });\n            // try to open on the browser\n            if (isBrowser() && !options.skipBrowserRedirect) {\n                window.location.assign(url);\n            }\n            return { data: { provider, url }, error: null };\n        });\n    }\n    /**\n     * Recovers the session from LocalStorage and refreshes\n     * Note: this method is async to accommodate for AsyncStorage e.g. in React native.\n     */\n    _recoverAndRefresh() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const currentSession = yield getItemAsync(this.storage, this.storageKey);\n                if (!this._isValidSession(currentSession)) {\n                    if (currentSession !== null) {\n                        yield this._removeSession();\n                    }\n                    return;\n                }\n                const timeNow = Math.round(Date.now() / 1000);\n                if (((_a = currentSession.expires_at) !== null && _a !== void 0 ? _a : Infinity) < timeNow + EXPIRY_MARGIN) {\n                    if (this.autoRefreshToken && currentSession.refresh_token) {\n                        const { error } = yield this._callRefreshToken(currentSession.refresh_token);\n                        if (error) {\n                            console.log(error.message);\n                            yield this._removeSession();\n                        }\n                    }\n                }\n                else {\n                    if (this.persistSession) {\n                        yield this._saveSession(currentSession);\n                    }\n                    this._notifyAllSubscribers('SIGNED_IN', currentSession);\n                }\n            }\n            catch (err) {\n                console.error(err);\n                return;\n            }\n        });\n    }\n    _callRefreshToken(refreshToken) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            // refreshing is already in progress\n            if (this.refreshingDeferred) {\n                return this.refreshingDeferred.promise;\n            }\n            try {\n                this.refreshingDeferred = new Deferred();\n                if (!refreshToken) {\n                    throw new AuthSessionMissingError();\n                }\n                const { data, error } = yield this._refreshAccessToken(refreshToken);\n                if (error)\n                    throw error;\n                if (!data.session)\n                    throw new AuthSessionMissingError();\n                yield this._saveSession(data.session);\n                this._notifyAllSubscribers('TOKEN_REFRESHED', data.session);\n                const result = { session: data.session, error: null };\n                this.refreshingDeferred.resolve(result);\n                return result;\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    const result = { session: null, error };\n                    (_a = this.refreshingDeferred) === null || _a === void 0 ? void 0 : _a.resolve(result);\n                    return result;\n                }\n                (_b = this.refreshingDeferred) === null || _b === void 0 ? void 0 : _b.reject(error);\n                throw error;\n            }\n            finally {\n                this.refreshingDeferred = null;\n            }\n        });\n    }\n    _notifyAllSubscribers(event, session, broadcast = true) {\n        if (this.broadcastChannel && broadcast) {\n            this.broadcastChannel.postMessage({ event, session });\n        }\n        this.stateChangeEmitters.forEach((x) => x.callback(event, session));\n    }\n    /**\n     * set currentSession and currentUser\n     * process to _startAutoRefreshToken if possible\n     */\n    _saveSession(session) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.persistSession) {\n                this.inMemorySession = session;\n            }\n            if (this.persistSession && session.expires_at) {\n                yield this._persistSession(session);\n            }\n        });\n    }\n    _persistSession(currentSession) {\n        return setItemAsync(this.storage, this.storageKey, currentSession);\n    }\n    _removeSession() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.persistSession) {\n                yield removeItemAsync(this.storage, this.storageKey);\n            }\n            else {\n                this.inMemorySession = null;\n            }\n        });\n    }\n    /**\n     * Removes any registered visibilitychange callback.\n     *\n     * {@see #startAutoRefresh}\n     * {@see #stopAutoRefresh}\n     */\n    _removeVisibilityChangedCallback() {\n        const callback = this.visibilityChangedCallback;\n        this.visibilityChangedCallback = null;\n        try {\n            if (callback && isBrowser() && (window === null || window === void 0 ? void 0 : window.removeEventListener)) {\n                window.removeEventListener('visibilitychange', callback);\n            }\n        }\n        catch (e) {\n            console.error('removing visibilitychange callback failed', e);\n        }\n    }\n    /**\n     * This is the private implementation of {@link #startAutoRefresh}. Use this\n     * within the library.\n     */\n    _startAutoRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._stopAutoRefresh();\n            const ticker = setInterval(() => this._autoRefreshTokenTick(), AUTO_REFRESH_TICK_DURATION);\n            this.autoRefreshTicker = ticker;\n            if (ticker && typeof ticker === 'object' && typeof ticker.unref === 'function') {\n                // ticker is a NodeJS Timeout object that has an `unref` method\n                // https://nodejs.org/api/timers.html#timeoutunref\n                // When auto refresh is used in NodeJS (like for testing) the\n                // `setInterval` is preventing the process from being marked as\n                // finished and tests run endlessly. This can be prevented by calling\n                // `unref()` on the returned object.\n                ticker.unref();\n                // @ts-ignore\n            }\n            else if (typeof Deno !== 'undefined' && typeof Deno.unrefTimer === 'function') {\n                // similar like for NodeJS, but with the Deno API\n                // https://deno.land/api@latest?unstable&s=Deno.unrefTimer\n                // @ts-ignore\n                Deno.unrefTimer(ticker);\n            }\n            // run the tick immediately\n            yield this._autoRefreshTokenTick();\n        });\n    }\n    /**\n     * This is the private implementation of {@link #stopAutoRefresh}. Use this\n     * within the library.\n     */\n    _stopAutoRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const ticker = this.autoRefreshTicker;\n            this.autoRefreshTicker = null;\n            if (ticker) {\n                clearInterval(ticker);\n            }\n        });\n    }\n    /**\n     * Starts an auto-refresh process in the background. The session is checked\n     * every few seconds. Close to the time of expiration a process is started to\n     * refresh the session. If refreshing fails it will be retried for as long as\n     * necessary.\n     *\n     * If you set the {@link GoTrueClientOptions#autoRefreshToken} you don't need\n     * to call this function, it will be called for you.\n     *\n     * On browsers the refresh process works only when the tab/window is in the\n     * foreground to conserve resources as well as prevent race conditions and\n     * flooding auth with requests. If you call this method any managed\n     * visibility change callback will be removed and you must manage visibility\n     * changes on your own.\n     *\n     * On non-browser platforms the refresh process works *continuously* in the\n     * background, which may not be desirable. You should hook into your\n     * platform's foreground indication mechanism and call these methods\n     * appropriately to conserve resources.\n     *\n     * {@see #stopAutoRefresh}\n     */\n    startAutoRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._removeVisibilityChangedCallback();\n            yield this._startAutoRefresh();\n        });\n    }\n    /**\n     * Stops an active auto refresh process running in the background (if any).\n     *\n     * If you call this method any managed visibility change callback will be\n     * removed and you must manage visibility changes on your own.\n     *\n     * See {@link #startAutoRefresh} for more details.\n     */\n    stopAutoRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._removeVisibilityChangedCallback();\n            yield this._stopAutoRefresh();\n        });\n    }\n    /**\n     * Runs the auto refresh token tick.\n     */\n    _autoRefreshTokenTick() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const now = Date.now();\n            try {\n                const { data: { session }, } = yield this.getSession();\n                if (!session || !session.refresh_token || !session.expires_at) {\n                    return;\n                }\n                // session will expire in this many ticks (or has already expired if <= 0)\n                const expiresInTicks = Math.floor((session.expires_at * 1000 - now) / AUTO_REFRESH_TICK_DURATION);\n                if (expiresInTicks < AUTO_REFRESH_TICK_THRESHOLD) {\n                    yield this._callRefreshToken(session.refresh_token);\n                }\n            }\n            catch (e) {\n                console.error('Auto refresh tick failed with error. This is likely a transient error.', e);\n            }\n        });\n    }\n    /**\n     * Registers callbacks on the browser / platform, which in-turn run\n     * algorithms when the browser window/tab are in foreground. On non-browser\n     * platforms it assumes always foreground.\n     */\n    _handleVisibilityChange() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!isBrowser() || !(window === null || window === void 0 ? void 0 : window.addEventListener)) {\n                if (this.autoRefreshToken) {\n                    // in non-browser environments the refresh token ticker runs always\n                    this.startAutoRefresh();\n                }\n                return false;\n            }\n            try {\n                this.visibilityChangedCallback = () => __awaiter(this, void 0, void 0, function* () { return yield this._onVisibilityChanged(false); });\n                window === null || window === void 0 ? void 0 : window.addEventListener('visibilitychange', this.visibilityChangedCallback);\n                // now immediately call the visbility changed callback to setup with the\n                // current visbility state\n                yield this._onVisibilityChanged(true); // initial call\n            }\n            catch (error) {\n                console.error('_handleVisibilityChange', error);\n            }\n        });\n    }\n    /**\n     * Callback registered with `window.addEventListener('visibilitychange')`.\n     */\n    _onVisibilityChanged(isInitial) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (document.visibilityState === 'visible') {\n                if (!isInitial) {\n                    // initial visibility change setup is handled in another flow under #initialize()\n                    yield this.initializePromise;\n                    yield this._recoverAndRefresh();\n                }\n                if (this.autoRefreshToken) {\n                    // in browser environments the refresh token ticker runs only on focused tabs\n                    // which prevents race conditions\n                    this._startAutoRefresh();\n                }\n            }\n            else if (document.visibilityState === 'hidden') {\n                if (this.autoRefreshToken) {\n                    this._stopAutoRefresh();\n                }\n            }\n        });\n    }\n    /**\n     * Generates the relevant login URL for a third-party provider.\n     * @param options.redirectTo A URL or mobile address to send the user to after they are confirmed.\n     * @param options.scopes A space-separated list of scopes granted to the OAuth application.\n     * @param options.queryParams An object of key-value pairs containing query parameters granted to the OAuth application.\n     */\n    _getUrlForProvider(provider, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const urlParams = [`provider=${encodeURIComponent(provider)}`];\n            if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n                urlParams.push(`redirect_to=${encodeURIComponent(options.redirectTo)}`);\n            }\n            if (options === null || options === void 0 ? void 0 : options.scopes) {\n                urlParams.push(`scopes=${encodeURIComponent(options.scopes)}`);\n            }\n            if (this.flowType === 'pkce') {\n                const codeVerifier = generatePKCEVerifier();\n                yield setItemAsync(this.storage, `${this.storageKey}-code-verifier`, codeVerifier);\n                const codeChallenge = yield generatePKCEChallenge(codeVerifier);\n                const codeChallengeMethod = codeVerifier === codeChallenge ? 'plain' : 's256';\n                const flowParams = new URLSearchParams({\n                    code_challenge: `${encodeURIComponent(codeChallenge)}`,\n                    code_challenge_method: `${encodeURIComponent(codeChallengeMethod)}`,\n                });\n                urlParams.push(flowParams.toString());\n            }\n            if (options === null || options === void 0 ? void 0 : options.queryParams) {\n                const query = new URLSearchParams(options.queryParams);\n                urlParams.push(query.toString());\n            }\n            return `${this.url}/authorize?${urlParams.join('&')}`;\n        });\n    }\n    _unenroll(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                return yield _request(this.fetch, 'DELETE', `${this.url}/factors/${params.factorId}`, {\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#enroll}\n     */\n    _enroll(params) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/factors`, {\n                    body: {\n                        friendly_name: params.friendlyName,\n                        factor_type: params.factorType,\n                        issuer: params.issuer,\n                    },\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n                if (error) {\n                    return { data: null, error };\n                }\n                if ((_b = data === null || data === void 0 ? void 0 : data.totp) === null || _b === void 0 ? void 0 : _b.qr_code) {\n                    data.totp.qr_code = `data:image/svg+xml;utf-8,${data.totp.qr_code}`;\n                }\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#verify}\n     */\n    _verify(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/factors/${params.factorId}/verify`, {\n                    body: { code: params.code, challenge_id: params.challengeId },\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n                if (error) {\n                    return { data: null, error };\n                }\n                yield this._saveSession(Object.assign({ expires_at: Math.round(Date.now() / 1000) + data.expires_in }, data));\n                this._notifyAllSubscribers('MFA_CHALLENGE_VERIFIED', data);\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#challenge}\n     */\n    _challenge(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                return yield _request(this.fetch, 'POST', `${this.url}/factors/${params.factorId}/challenge`, {\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#challengeAndVerify}\n     */\n    _challengeAndVerify(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: challengeData, error: challengeError } = yield this._challenge({\n                factorId: params.factorId,\n            });\n            if (challengeError) {\n                return { data: null, error: challengeError };\n            }\n            return yield this._verify({\n                factorId: params.factorId,\n                challengeId: challengeData.id,\n                code: params.code,\n            });\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#listFactors}\n     */\n    _listFactors() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: { user }, error: userError, } = yield this.getUser();\n            if (userError) {\n                return { data: null, error: userError };\n            }\n            const factors = (user === null || user === void 0 ? void 0 : user.factors) || [];\n            const totp = factors.filter((factor) => factor.factor_type === 'totp' && factor.status === 'verified');\n            return {\n                data: {\n                    all: factors,\n                    totp,\n                },\n                error: null,\n            };\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#getAuthenticatorAssuranceLevel}\n     */\n    _getAuthenticatorAssuranceLevel() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: { session }, error: sessionError, } = yield this.getSession();\n            if (sessionError) {\n                return { data: null, error: sessionError };\n            }\n            if (!session) {\n                return {\n                    data: { currentLevel: null, nextLevel: null, currentAuthenticationMethods: [] },\n                    error: null,\n                };\n            }\n            const payload = this._decodeJWT(session.access_token);\n            let currentLevel = null;\n            if (payload.aal) {\n                currentLevel = payload.aal;\n            }\n            let nextLevel = currentLevel;\n            const verifiedFactors = (_b = (_a = session.user.factors) === null || _a === void 0 ? void 0 : _a.filter((factor) => factor.status === 'verified')) !== null && _b !== void 0 ? _b : [];\n            if (verifiedFactors.length > 0) {\n                nextLevel = 'aal2';\n            }\n            const currentAuthenticationMethods = payload.amr || [];\n            return { data: { currentLevel, nextLevel, currentAuthenticationMethods }, error: null };\n        });\n    }\n}\n//# sourceMappingURL=GoTrueClient.js.map","import GoTrueAdminApi from './GoTrueAdminApi';\nimport GoTrueClient from './GoTrueClient';\nexport { GoTrueAdminApi, GoTrueClient };\nexport * from './lib/types';\nexport * from './lib/errors';\n//# sourceMappingURL=index.js.map","import { GoTrueClient } from '@supabase/gotrue-js';\nexport class SupabaseAuthClient extends GoTrueClient {\n    constructor(options) {\n        super(options);\n    }\n}\n//# sourceMappingURL=SupabaseAuthClient.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { FunctionsClient } from '@supabase/functions-js';\nimport { PostgrestClient, } from '@supabase/postgrest-js';\nimport { RealtimeClient, } from '@supabase/realtime-js';\nimport { StorageClient as SupabaseStorageClient } from '@supabase/storage-js';\nimport { DEFAULT_HEADERS } from './lib/constants';\nimport { fetchWithAuth } from './lib/fetch';\nimport { stripTrailingSlash, applySettingDefaults } from './lib/helpers';\nimport { SupabaseAuthClient } from './lib/SupabaseAuthClient';\nconst DEFAULT_GLOBAL_OPTIONS = {\n    headers: DEFAULT_HEADERS,\n};\nconst DEFAULT_DB_OPTIONS = {\n    schema: 'public',\n};\nconst DEFAULT_AUTH_OPTIONS = {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n    flowType: 'implicit',\n};\nconst DEFAULT_REALTIME_OPTIONS = {};\n/**\n * Supabase Client.\n *\n * An isomorphic Javascript client for interacting with Postgres.\n */\nexport default class SupabaseClient {\n    /**\n     * Create a new client for use in the browser.\n     * @param supabaseUrl The unique Supabase URL which is supplied when you create a new project in your project dashboard.\n     * @param supabaseKey The unique Supabase Key which is supplied when you create a new project in your project dashboard.\n     * @param options.db.schema You can switch in between schemas. The schema needs to be on the list of exposed schemas inside Supabase.\n     * @param options.auth.autoRefreshToken Set to \"true\" if you want to automatically refresh the token before expiring.\n     * @param options.auth.persistSession Set to \"true\" if you want to automatically save the user session into local storage.\n     * @param options.auth.detectSessionInUrl Set to \"true\" if you want to automatically detects OAuth grants in the URL and signs in the user.\n     * @param options.realtime Options passed along to realtime-js constructor.\n     * @param options.global.fetch A custom fetch implementation.\n     * @param options.global.headers Any additional headers to send with each network request.\n     */\n    constructor(supabaseUrl, supabaseKey, options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        this.supabaseUrl = supabaseUrl;\n        this.supabaseKey = supabaseKey;\n        if (!supabaseUrl)\n            throw new Error('supabaseUrl is required.');\n        if (!supabaseKey)\n            throw new Error('supabaseKey is required.');\n        const _supabaseUrl = stripTrailingSlash(supabaseUrl);\n        this.realtimeUrl = `${_supabaseUrl}/realtime/v1`.replace(/^http/i, 'ws');\n        this.authUrl = `${_supabaseUrl}/auth/v1`;\n        this.storageUrl = `${_supabaseUrl}/storage/v1`;\n        this.functionsUrl = `${_supabaseUrl}/functions/v1`;\n        // default storage key uses the supabase project ref as a namespace\n        const defaultStorageKey = `sb-${new URL(this.authUrl).hostname.split('.')[0]}-auth-token`;\n        const DEFAULTS = {\n            db: DEFAULT_DB_OPTIONS,\n            realtime: DEFAULT_REALTIME_OPTIONS,\n            auth: Object.assign(Object.assign({}, DEFAULT_AUTH_OPTIONS), { storageKey: defaultStorageKey }),\n            global: DEFAULT_GLOBAL_OPTIONS,\n        };\n        const settings = applySettingDefaults(options !== null && options !== void 0 ? options : {}, DEFAULTS);\n        this.storageKey = (_b = (_a = settings.auth) === null || _a === void 0 ? void 0 : _a.storageKey) !== null && _b !== void 0 ? _b : '';\n        this.headers = (_d = (_c = settings.global) === null || _c === void 0 ? void 0 : _c.headers) !== null && _d !== void 0 ? _d : {};\n        this.auth = this._initSupabaseAuthClient((_e = settings.auth) !== null && _e !== void 0 ? _e : {}, this.headers, (_f = settings.global) === null || _f === void 0 ? void 0 : _f.fetch);\n        this.fetch = fetchWithAuth(supabaseKey, this._getAccessToken.bind(this), (_g = settings.global) === null || _g === void 0 ? void 0 : _g.fetch);\n        this.realtime = this._initRealtimeClient(Object.assign({ headers: this.headers }, settings.realtime));\n        this.rest = new PostgrestClient(`${_supabaseUrl}/rest/v1`, {\n            headers: this.headers,\n            schema: (_h = settings.db) === null || _h === void 0 ? void 0 : _h.schema,\n            fetch: this.fetch,\n        });\n        this._listenForAuthEvents();\n    }\n    /**\n     * Supabase Functions allows you to deploy and invoke edge functions.\n     */\n    get functions() {\n        return new FunctionsClient(this.functionsUrl, {\n            headers: this.headers,\n            customFetch: this.fetch,\n        });\n    }\n    /**\n     * Supabase Storage allows you to manage user-generated content, such as photos or videos.\n     */\n    get storage() {\n        return new SupabaseStorageClient(this.storageUrl, this.headers, this.fetch);\n    }\n    /**\n     * Perform a query on a table or a view.\n     *\n     * @param relation - The table or view name to query\n     */\n    from(relation) {\n        return this.rest.from(relation);\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn - The function name to call\n     * @param args - The arguments to pass to the function call\n     * @param options - Named parameters\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     * @param options.count - Count algorithm to use to count rows returned by the\n     * function. Only applicable for [set-returning\n     * functions](https://www.postgresql.org/docs/current/functions-srf.html).\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    rpc(fn, args = {}, options) {\n        return this.rest.rpc(fn, args, options);\n    }\n    /**\n     * Creates a Realtime channel with Broadcast, Presence, and Postgres Changes.\n     *\n     * @param {string} name - The name of the Realtime channel.\n     * @param {Object} opts - The options to pass to the Realtime channel.\n     *\n     */\n    channel(name, opts = { config: {} }) {\n        return this.realtime.channel(name, opts);\n    }\n    /**\n     * Returns all Realtime channels.\n     */\n    getChannels() {\n        return this.realtime.getChannels();\n    }\n    /**\n     * Unsubscribes and removes Realtime channel from Realtime client.\n     *\n     * @param {RealtimeChannel} channel - The name of the Realtime channel.\n     *\n     */\n    removeChannel(channel) {\n        return this.realtime.removeChannel(channel);\n    }\n    /**\n     * Unsubscribes and removes all Realtime channels from Realtime client.\n     */\n    removeAllChannels() {\n        return this.realtime.removeAllChannels();\n    }\n    _getAccessToken() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.auth.getSession();\n            return (_b = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : null;\n        });\n    }\n    _initSupabaseAuthClient({ autoRefreshToken, persistSession, detectSessionInUrl, storage, storageKey, flowType, }, headers, fetch) {\n        const authHeaders = {\n            Authorization: `Bearer ${this.supabaseKey}`,\n            apikey: `${this.supabaseKey}`,\n        };\n        return new SupabaseAuthClient({\n            url: this.authUrl,\n            headers: Object.assign(Object.assign({}, authHeaders), headers),\n            storageKey: storageKey,\n            autoRefreshToken,\n            persistSession,\n            detectSessionInUrl,\n            storage,\n            flowType,\n            fetch,\n        });\n    }\n    _initRealtimeClient(options) {\n        return new RealtimeClient(this.realtimeUrl, Object.assign(Object.assign({}, options), { params: Object.assign({ apikey: this.supabaseKey }, options === null || options === void 0 ? void 0 : options.params) }));\n    }\n    _listenForAuthEvents() {\n        let data = this.auth.onAuthStateChange((event, session) => {\n            this._handleTokenChanged(event, session === null || session === void 0 ? void 0 : session.access_token, 'CLIENT');\n        });\n        return data;\n    }\n    _handleTokenChanged(event, token, source) {\n        if ((event === 'TOKEN_REFRESHED' || event === 'SIGNED_IN') &&\n            this.changedAccessToken !== token) {\n            // Token has changed\n            this.realtime.setAuth(token !== null && token !== void 0 ? token : null);\n            this.changedAccessToken = token;\n        }\n        else if (event === 'SIGNED_OUT') {\n            // Token is removed\n            this.realtime.setAuth(this.supabaseKey);\n            if (source == 'STORAGE')\n                this.auth.signOut();\n            this.changedAccessToken = undefined;\n        }\n    }\n}\n//# sourceMappingURL=SupabaseClient.js.map","import SupabaseClient from './SupabaseClient';\nexport * from '@supabase/gotrue-js';\nexport { FunctionsHttpError, FunctionsFetchError, FunctionsRelayError, FunctionsError, } from '@supabase/functions-js';\nexport * from '@supabase/realtime-js';\nexport { default as SupabaseClient } from './SupabaseClient';\n/**\n * Creates a new Supabase Client.\n */\nexport const createClient = (supabaseUrl, supabaseKey, options) => {\n    return new SupabaseClient(supabaseUrl, supabaseKey, options);\n};\n//# sourceMappingURL=index.js.map","var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\n\n// ../../node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js\nvar require_cookie = __commonJS({\n  \"../../node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js\"(exports) {\n    \"use strict\";\n    exports.parse = parse3;\n    exports.serialize = serialize3;\n    var __toString = Object.prototype.toString;\n    var fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n    function parse3(str, options) {\n      if (typeof str !== \"string\") {\n        throw new TypeError(\"argument str must be a string\");\n      }\n      var obj = {};\n      var opt = options || {};\n      var dec = opt.decode || decode;\n      var index = 0;\n      while (index < str.length) {\n        var eqIdx = str.indexOf(\"=\", index);\n        if (eqIdx === -1) {\n          break;\n        }\n        var endIdx = str.indexOf(\";\", index);\n        if (endIdx === -1) {\n          endIdx = str.length;\n        } else if (endIdx < eqIdx) {\n          index = str.lastIndexOf(\";\", eqIdx - 1) + 1;\n          continue;\n        }\n        var key = str.slice(index, eqIdx).trim();\n        if (void 0 === obj[key]) {\n          var val = str.slice(eqIdx + 1, endIdx).trim();\n          if (val.charCodeAt(0) === 34) {\n            val = val.slice(1, -1);\n          }\n          obj[key] = tryDecode(val, dec);\n        }\n        index = endIdx + 1;\n      }\n      return obj;\n    }\n    function serialize3(name, val, options) {\n      var opt = options || {};\n      var enc = opt.encode || encode;\n      if (typeof enc !== \"function\") {\n        throw new TypeError(\"option encode is invalid\");\n      }\n      if (!fieldContentRegExp.test(name)) {\n        throw new TypeError(\"argument name is invalid\");\n      }\n      var value = enc(val);\n      if (value && !fieldContentRegExp.test(value)) {\n        throw new TypeError(\"argument val is invalid\");\n      }\n      var str = name + \"=\" + value;\n      if (null != opt.maxAge) {\n        var maxAge = opt.maxAge - 0;\n        if (isNaN(maxAge) || !isFinite(maxAge)) {\n          throw new TypeError(\"option maxAge is invalid\");\n        }\n        str += \"; Max-Age=\" + Math.floor(maxAge);\n      }\n      if (opt.domain) {\n        if (!fieldContentRegExp.test(opt.domain)) {\n          throw new TypeError(\"option domain is invalid\");\n        }\n        str += \"; Domain=\" + opt.domain;\n      }\n      if (opt.path) {\n        if (!fieldContentRegExp.test(opt.path)) {\n          throw new TypeError(\"option path is invalid\");\n        }\n        str += \"; Path=\" + opt.path;\n      }\n      if (opt.expires) {\n        var expires = opt.expires;\n        if (!isDate(expires) || isNaN(expires.valueOf())) {\n          throw new TypeError(\"option expires is invalid\");\n        }\n        str += \"; Expires=\" + expires.toUTCString();\n      }\n      if (opt.httpOnly) {\n        str += \"; HttpOnly\";\n      }\n      if (opt.secure) {\n        str += \"; Secure\";\n      }\n      if (opt.priority) {\n        var priority = typeof opt.priority === \"string\" ? opt.priority.toLowerCase() : opt.priority;\n        switch (priority) {\n          case \"low\":\n            str += \"; Priority=Low\";\n            break;\n          case \"medium\":\n            str += \"; Priority=Medium\";\n            break;\n          case \"high\":\n            str += \"; Priority=High\";\n            break;\n          default:\n            throw new TypeError(\"option priority is invalid\");\n        }\n      }\n      if (opt.sameSite) {\n        var sameSite = typeof opt.sameSite === \"string\" ? opt.sameSite.toLowerCase() : opt.sameSite;\n        switch (sameSite) {\n          case true:\n            str += \"; SameSite=Strict\";\n            break;\n          case \"lax\":\n            str += \"; SameSite=Lax\";\n            break;\n          case \"strict\":\n            str += \"; SameSite=Strict\";\n            break;\n          case \"none\":\n            str += \"; SameSite=None\";\n            break;\n          default:\n            throw new TypeError(\"option sameSite is invalid\");\n        }\n      }\n      return str;\n    }\n    function decode(str) {\n      return str.indexOf(\"%\") !== -1 ? decodeURIComponent(str) : str;\n    }\n    function encode(val) {\n      return encodeURIComponent(val);\n    }\n    function isDate(val) {\n      return __toString.call(val) === \"[object Date]\" || val instanceof Date;\n    }\n    function tryDecode(str, decode2) {\n      try {\n        return decode2(str);\n      } catch (e) {\n        return str;\n      }\n    }\n  }\n});\n\n// src/browserCookieStorage.ts\nvar import_cookie2 = __toESM(require_cookie());\n\n// src/utils/cookies.ts\nvar import_cookie = __toESM(require_cookie());\nimport { base64url } from \"jose\";\nfunction parseSupabaseCookie(str) {\n  if (!str) {\n    return null;\n  }\n  try {\n    const session = JSON.parse(str);\n    if (!session) {\n      return null;\n    }\n    if (session.constructor.name === \"Object\") {\n      return session;\n    }\n    if (session.constructor.name !== \"Array\") {\n      throw new Error(`Unexpected format: ${session.constructor.name}`);\n    }\n    const [_header, payloadStr, _signature] = session[0].split(\".\");\n    const payload = base64url.decode(payloadStr);\n    const decoder = new TextDecoder();\n    const { exp, sub, ...user } = JSON.parse(decoder.decode(payload));\n    return {\n      expires_at: exp,\n      expires_in: exp - Math.round(Date.now() / 1e3),\n      token_type: \"bearer\",\n      access_token: session[0],\n      refresh_token: session[1],\n      provider_token: session[2],\n      provider_refresh_token: session[3],\n      user: {\n        id: sub,\n        factors: session[4],\n        ...user\n      }\n    };\n  } catch (err) {\n    console.warn(\"Failed to parse cookie string:\", err);\n    return null;\n  }\n}\nfunction stringifySupabaseSession(session) {\n  var _a;\n  return JSON.stringify([\n    session.access_token,\n    session.refresh_token,\n    session.provider_token,\n    session.provider_refresh_token,\n    ((_a = session.user) == null ? void 0 : _a.factors) ?? null\n  ]);\n}\n\n// src/utils/helpers.ts\nfunction isBrowser() {\n  return typeof window !== \"undefined\" && typeof window.document !== \"undefined\";\n}\n\n// src/utils/constants.ts\nvar DEFAULT_COOKIE_OPTIONS = {\n  path: \"/\",\n  maxAge: 60 * 60 * 24 * 365 * 1e3\n};\n\n// src/cookieAuthStorageAdapter.ts\nvar CookieAuthStorageAdapter = class {\n  constructor(cookieOptions) {\n    this.cookieOptions = {\n      ...DEFAULT_COOKIE_OPTIONS,\n      ...cookieOptions\n    };\n  }\n  getItem(key) {\n    const value = this.getCookie(key);\n    if (!value)\n      return null;\n    if (key.endsWith(\"-code-verifier\")) {\n      return value;\n    }\n    return JSON.stringify(parseSupabaseCookie(value));\n  }\n  setItem(key, value) {\n    if (key.endsWith(\"-code-verifier\")) {\n      this.setCookie(key, value);\n      return;\n    }\n    let session = JSON.parse(value);\n    const sessionStr = stringifySupabaseSession(session);\n    this.setCookie(key, sessionStr);\n  }\n  removeItem(key) {\n    this.deleteCookie(key);\n  }\n};\n\n// src/browserCookieStorage.ts\nvar BrowserCookieAuthStorageAdapter = class extends CookieAuthStorageAdapter {\n  constructor(cookieOptions) {\n    super(cookieOptions);\n  }\n  getCookie(name) {\n    if (!isBrowser())\n      return null;\n    const cookies = (0, import_cookie2.parse)(document.cookie);\n    return cookies[name];\n  }\n  setCookie(name, value) {\n    if (!isBrowser())\n      return null;\n    document.cookie = (0, import_cookie2.serialize)(name, value, {\n      ...this.cookieOptions,\n      httpOnly: false\n    });\n  }\n  deleteCookie(name) {\n    if (!isBrowser())\n      return null;\n    document.cookie = (0, import_cookie2.serialize)(name, \"\", {\n      ...this.cookieOptions,\n      maxAge: 0,\n      httpOnly: false\n    });\n  }\n};\n\n// src/createClient.ts\nimport { createClient } from \"@supabase/supabase-js\";\nfunction createSupabaseClient(supabaseUrl, supabaseKey, options) {\n  var _a;\n  const bowser = isBrowser();\n  return createClient(supabaseUrl, supabaseKey, {\n    ...options,\n    auth: {\n      flowType: \"pkce\",\n      autoRefreshToken: bowser,\n      detectSessionInUrl: bowser,\n      persistSession: true,\n      storage: options.auth.storage,\n      ...((_a = options.auth) == null ? void 0 : _a.storageKey) ? {\n        storageKey: options.auth.storageKey\n      } : {}\n    }\n  });\n}\nvar export_parseCookies = import_cookie.parse;\nvar export_serializeCookie = import_cookie.serialize;\nexport {\n  BrowserCookieAuthStorageAdapter,\n  CookieAuthStorageAdapter,\n  DEFAULT_COOKIE_OPTIONS,\n  createSupabaseClient,\n  isBrowser,\n  export_parseCookies as parseCookies,\n  parseSupabaseCookie,\n  export_serializeCookie as serializeCookie,\n  stringifySupabaseSession\n};\n/*!\n * cookie\n * Copyright(c) 2012-2014 Roman Shtylman\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n//# sourceMappingURL=index.mjs.map"],"names":["registerInstrumentation","globalThis","_ENTRIES","middleware_instrumentation","register","err","message","registerInstrumentationPromise","ensureInstrumentationRegistered","getUnsupportedModuleErrorMessage","module","__import_unsupported","moduleName","proxy","Proxy","get","_obj","prop","Error","construct","apply","_target","_this","args","enhanceGlobals","process","global","env","Object","defineProperty","value","enumerable","configurable","PageSignatureError","constructor","page","RemovedPageError","RemovedUAError","fromNodeOutgoingHttpHeaders","nodeHeaders","headers","Headers","key","entries","values","Array","isArray","v","toString","append","splitCookiesString","cookiesString","cookiesStrings","pos","start","ch","lastComma","nextStart","cookiesSeparatorFound","skipWhitespace","length","test","charAt","notSpecialChar","push","substring","toNodeOutgoingHttpHeaders","cookies","toLowerCase","validateURL","url","String","URL","error","cause","responseSymbol","Symbol","passThroughSymbol","waitUntilSymbol","FetchEvent","_request","respondWith","response","Promise","resolve","passThroughOnException","waitUntil","promise","NextFetchEvent","params","request","sourcePage","detectDomainLocale","domainItems","hostname","detectedLocale","item","_item_domain","_item_locales","domainHostname","domain","split","defaultLocale","locales","some","locale","removeTrailingSlash","route","replace","parsePath","path","hashIndex","indexOf","queryIndex","hasQuery","pathname","query","undefined","hash","slice","addPathPrefix","prefix","startsWith","addPathSuffix","suffix","pathHasPrefix","addLocale","ignorePrefix","lower","formatNextPathnameInfo","info","buildId","trailingSlash","basePath","endsWith","getHostname","parsed","host","normalizeLocalePath","pathnameParts","splice","join","removePathPrefix","withoutPrefix","getNextPathnameInfo","options","_options_nextConfig","i18n","nextConfig","pathnameNoDataPrefix","paths","parseData","result","i18nProvider","analyze","_result_pathname","REGEX_LOCALHOST_HOSTNAME","parseURL","base","Internal","NextURL","input","baseOrOpts","opts","_this_Internal_options_nextConfig_i18n","_this_Internal_options_nextConfig","_this_Internal_domainLocale","_this_Internal_options_nextConfig_i18n1","_this_Internal_options_nextConfig1","__NEXT_NO_MIDDLEWARE_URL_NORMALIZE","domainLocale","domains","formatPathname","forceLocale","formatSearch","search","includes","TypeError","searchParams","port","protocol","href","origin","password","username","toJSON","for","clone","RequestCookies","ResponseCookies","INTERNALS","NextRequest","Request","init","nextUrl","geo","ip","bodyUsed","cache","credentials","destination","fromEntries","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","ua","REDIRECTS","Set","handleMiddlewareField","_init_request","keys","set","NextResponse","Response","body","ok","redirected","status","statusText","type","json","has","RangeError","initObj","rewrite","next","relativizeURL","baseURL","relative","RSC","ACTION","NEXT_ROUTER_STATE_TREE","NEXT_ROUTER_PREFETCH","NEXT_URL","RSC_CONTENT_TYPE_HEADER","RSC_VARY_HEADER","FLIGHT_PARAMETERS","NEXT_RSC_UNION_QUERY","INTERNAL_QUERY_NAMES","EDGE_EXTENDED_INTERNAL_QUERY_NAMES","stripInternalQueries","name","stripInternalSearchParams","isEdge","isStringUrl","instance","delete","INTERNAL_HEADERS","stripInternalHeaders","ensureLeadingSlash","isGroupSegment","normalizeAppPath","reduce","segment","index","segments","normalizeRscPath","enabled","NEXT_QUERY_PARAM_PREFIX","PRERENDER_REVALIDATE_HEADER","PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER","NEXT_CACHE_TAGS_HEADER","NEXT_CACHE_SOFT_TAGS_HEADER","NEXT_CACHE_REVALIDATED_TAGS_HEADER","NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER","NEXT_CACHE_TAG_MAX_LENGTH","NEXT_CACHE_SOFT_TAG_MAX_LENGTH","NEXT_CACHE_IMPLICIT_TAG_ID","CACHE_ONE_YEAR","MIDDLEWARE_FILENAME","MIDDLEWARE_LOCATION_REGEXP","INSTRUMENTATION_HOOK_FILENAME","PAGES_DIR_ALIAS","DOT_NEXT_ALIAS","ROOT_DIR_ALIAS","APP_DIR_ALIAS","RSC_MOD_REF_PROXY_ALIAS","RSC_ACTION_VALIDATE_ALIAS","RSC_ACTION_PROXY_ALIAS","RSC_ACTION_CLIENT_WRAPPER_ALIAS","PUBLIC_DIR_MIDDLEWARE_CONFLICT","SSG_GET_INITIAL_PROPS_CONFLICT","SERVER_PROPS_GET_INIT_PROPS_CONFLICT","SERVER_PROPS_SSG_CONFLICT","STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR","SERVER_PROPS_EXPORT_ERROR","GSP_NO_RETURNED_VALUE","GSSP_NO_RETURNED_VALUE","UNSTABLE_REVALIDATE_RENAME_ERROR","GSSP_COMPONENT_MEMBER_ERROR","NON_STANDARD_NODE_ENV","SSG_FALLBACK_EXPORT_ERROR","ESLINT_DEFAULT_DIRS","ESLINT_PROMPT_VALUES","title","recommended","config","extends","SERVER_RUNTIME","edge","experimentalEdge","nodejs","WEBPACK_LAYERS_NAMES","shared","reactServerComponents","serverSideRendering","actionBrowser","api","middleware","edgeAsset","appPagesBrowser","appMetadataRoute","appRouteHandler","WEBPACK_LAYERS","GROUP","server","nonClientServerTarget","app","WEBPACK_RESOURCE_QUERIES","edgeSSREntry","metadata","metadataRoute","metadataImageMeta","ReflectAdapter","target","receiver","Reflect","bind","deleteProperty","ReadonlyHeadersError","callable","HeadersAdapter","lowercased","original","find","o","seal","merge","from","existing","forEach","callbackfn","thisArg","call","iterator","ReadonlyRequestCookiesError","RequestCookiesAdapter","SYMBOL_MODIFY_COOKIE_VALUES","getModifiedCookieValues","modified","appendMutableCookies","mutableCookies","modifiedCookieValues","resCookies","returnedCookies","getAll","cookie","MutableRequestCookiesAdapter","wrap","onUpdateCookies","responseCookes","modifiedValues","modifiedCookies","updateResponseCookies","_fetch___nextGetStaticStore","staticGenerationAsyncStore","fetch","__nextGetStaticStore","getStore","pathWasRevalidated","allCookies","filter","c","serializedCookies","tempCookies","add","sendStatusCode","res","statusCode","statusOrUrl","writeHead","Location","write","end","checkIsOnDemandRevalidate","req","previewProps","previewModeId","isOnDemandRevalidate","revalidateOnlyGenerated","COOKIE_NAME_PRERENDER_BYPASS","COOKIE_NAME_PRERENDER_DATA","RESPONSE_LIMIT_DEFAULT","SYMBOL_PREVIEW_DATA","SYMBOL_CLEARED_COOKIES","clearPreviewData","serialize","require","previous","getHeader","setHeader","expires","Date","httpOnly","sameSite","secure","ApiError","sendError","statusMessage","setLazyProp","getter","optsReset","writable","DraftModeProvider","_cookies_get","cookieValue","isEnabled","Boolean","_previewModeId","_mutableCookies","enable","disable","getHeaders","cleaned","param","getCookies","getMutableCookies","RequestAsyncStorageWrapper","storage","renderOpts","callback","defaultOnUpdateCookies","store","draftMode","run","sharedAsyncLocalStorageNotAvailableError","FakeAsyncLocalStorage","exit","enterWith","maybeGlobalAsyncLocalStorage","AsyncLocalStorage","createAsyncLocalStorage","requestAsyncStorage","NextRequestHint","adapter","isEdgeRendering","self","__BUILD_MANIFEST","prerenderManifest","__PRERENDER_MANIFEST","JSON","parse","requestUrl","normalizedKey","val","isDataReq","requestHeaders","flightHeaders","Map","normalizeUrl","__incrementalCache","IncrementalCache","appDir","fetchCache","minimalMode","fetchCacheKeyPrefix","__NEXT_FETCH_CACHE_KEY_PREFIX","dev","requestProtocol","getPrerenderManifest","version","routes","dynamicRoutes","notFoundRoutes","preview","event","cookiesFromResponse","isMiddleware","previewModeEncryptionKey","previewModeSigningKey","handler","rewriteUrl","relativizedRewrite","__NEXT_EXTERNAL_MIDDLEWARE_REWRITE_RESOLVE","match","redirectURL","finalResponse","middlewareOverrideHeaders","overwrittenHeaders","all","default","createMiddlewareClient","supabase","data","session","auth","getSession","matcher","__defProp","__getOwnPropDesc","getOwnPropertyDescriptor","__getOwnPropNames","getOwnPropertyNames","__hasOwnProp","prototype","hasOwnProperty","__export","__copyProps","to","except","desc","__toCommonJS","mod","src_exports","createBrowserSupabaseClient","createClientComponentClient","createMiddlewareSupabaseClient","createPagesBrowserClient","createPagesServerClient","createRouteHandlerClient","createServerActionClient","createServerComponentClient","createServerSupabaseClient","exports","import_auth_helpers_shared","supabaseUrl","NEXT_PUBLIC_SUPABASE_URL","supabaseKey","NEXT_PUBLIC_SUPABASE_ANON_KEY","cookieOptions","isSingleton","createNewClient","_a","createSupabaseClient","storageKey","BrowserCookieAuthStorageAdapter","_supabase","import_auth_helpers_shared2","import_set_cookie_parser","NextServerAuthStorageAdapter","CookieAuthStorageAdapter","context","getCookie","setCookie","map","parseCookies","_setCookie","deleteCookie","maxAge","setCookies","cookieStr","serializeCookie","import_auth_helpers_shared3","import_set_cookie_parser2","NextMiddlewareAuthStorageAdapter","newSessionStr","import_auth_helpers_shared4","NextServerComponentAuthStorageAdapter","nextCookies","import_auth_helpers_shared5","NextRouteHandlerAuthStorageAdapter","console","warn","__self__","F","DOMException","irrelevant","support","iterable","blob","Blob","e","formData","arrayBuffer","isDataView","obj","DataView","isPrototypeOf","viewClasses","isArrayBufferView","ArrayBuffer","isView","normalizeName","normalizeValue","iteratorFor","items","shift","done","header","oldValue","consumed","reject","fileReaderReady","reader","onload","onerror","readBlobAsArrayBuffer","FileReader","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","view","Uint8Array","chars","i","fromCharCode","bufferClone","byteLength","buffer","Body","_initBody","_bodyInit","_bodyText","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","rejected","then","text","decode","methods","normalizeMethod","upcased","toUpperCase","form","trim","bytes","decodeURIComponent","parseHeaders","rawHeaders","preProcessedHeaders","line","parts","bodyInit","redirectStatuses","location","stack","create","aborted","xhr","XMLHttpRequest","abortXhr","abort","getAllResponseHeaders","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","ponyfill","ctx","naiveFallback","window","__global__","parseCookie","parseSetCookie","stringifyCookie","attrs","toUTCString","encodeURIComponent","pair","splitAt","attributes","httponly","maxage","samesite","value2","Number","parseSameSite","compact","t","newT","SAME_SITE","string","_parsed","_headers","size","_","n","names","clear","stringify","responseHeaders","_b","getSetCookie","cookieStrings","cookieString","normalizeCookie","bag","serialized","now","__nccwpck_require__","ab","__dirname","r","a","s","p","f","u","substr","tryDecode","encode","isNaN","isFinite","Math","floor","defaultParseOptions","decodeValues","silent","isNonEmptyString","str","parseString","setCookieValue","nameValuePairStr","parseNameValuePair","assign","part","sides","trimLeft","parseInt","nameValueArr","sch","_globalThis","NativeWebSocket","WebSocket","MozWebSocket","websocket_version","W3CWebSocket","uri","protocols","native_instance","digest","encoder","TextEncoder","decoder","TextDecoder","MAX_INT32","concat","buffers","acc","p2s","alg","p2sInput","writeUInt32BE","offset","uint64be","high","low","uint32be","lengthAndInput","concatKdf","secret","bits","iterations","ceil","iter","encodeBase64","unencoded","CHUNK_SIZE","arr","subarray","btoa","decodeBase64","encoded","binary","atob","charCodeAt","JOSEError","code","captureStackTrace","JWTClaimValidationFailed","claim","reason","JWTExpired","JOSEAlgNotAllowed","arguments","JOSENotSupported","JWEDecryptionFailed","JWEInvalid","JWSInvalid","JWTInvalid","JWKInvalid","JWKSInvalid","JWKSNoMatchingKey","JWKSMultipleMatchingKeys","asyncIterator","JWKSTimeout","JWSSignatureVerificationFailed","crypto","isCryptoKey","CryptoKey","getRandomValues","random","bitLength","checkIvLength","enc","iv","checkCekLength","cek","expected","actual","timingSafeEqual","checkEncCryptoKey","invalidKeyInput","types","cbcDecrypt","ciphertext","tag","aad","keySize","encKey","subtle","importKey","macKey","macData","expectedTag","sign","macCheckPassed","plaintext","decrypt","gcmDecrypt","additionalData","tagLength","inflate","deflate","bogusWebCrypto","checkKeySize","algorithm","getCryptoKey","usage","cryptoKey","cryptoKeyCek","wrapKey","unwrap","encryptedKey","unwrapKey","exportKey","deriveKey","publicKey","privateKey","keyLength","apu","apv","namedCurve","sharedSecret","deriveBits","public","generateEpk","generateKey","ecdhAllowed","checkP2s","concatSalt","base64url","p2c","salt","keylen","subtleAlg","wrapAlg","usages","encrypt","derived","subtleRsaEs","subtleAlgorithm","checkKeyLength","formatPEM","genericExport","keyType","keyFormat","extractable","toSPKI","toPKCS8","findOid","keyData","oid","unshift","sub","every","getNamedCurve","genericImport","pem","keyUsages","isPublic","fromPKCS8","fromSPKI","getElement","seq","nextPart","parseElement","position","contents","raw","numberOfDigits","spkiFromX509","tbsCertificate","getSPKI","x509","fromX509","spki","subtleMapping","jwk","kty","d","crv","rest","ext","key_ops","k","use","decodeBase64URL","asKeyObject","isObject","importSPKI","importX509","importPKCS8","pkcs8","importJWK","octAsKeyObject","oth","cbcEncrypt","gcmEncrypt","encrypted","generateIv","jweAlgorithm","aesKw","ECDH","pbes2Kw","rsaEs","cekLength","checkKeyType","aesGcmKw","decryptKeyManagement","joseHeader","epk","partyUInfo","partyVInfo","p2cLimit","maxPBES2Count","validateCrit","Err","recognizedDefault","recognizedOption","protectedHeader","crit","recognized","parameter","isDisjoint","generateCek","validateAlgorithms","flattenedDecrypt","jwe","protected","unprotected","encrypted_key","parsedProt","zip","keyManagementAlgorithms","contentEncryptionAlgorithms","resolvedKey","inflateRaw","additionalAuthenticatedData","sharedUnprotectedHeader","unprotectedHeader","compactDecrypt","decrypted","generalDecrypt","recipients","recipient","keyToJWK","exportPublic","exportPrivate","exportSPKI","exportPKCS8","exportJWK","encryptKeyManagement","providedCek","providedParameters","parameters","ephemeralKey","x","y","kwAlg","FlattenedEncrypt","_plaintext","setKeyManagementParameters","_keyManagementParameters","setProtectedHeader","_protectedHeader","setSharedUnprotectedHeader","_sharedUnprotectedHeader","setUnprotectedHeader","_unprotectedHeader","setAdditionalAuthenticatedData","_aad","setContentEncryptionKey","_cek","setInitializationVector","_iv","aadMember","deflated","deflateRaw","IndividualRecipient","parent","addRecipient","GeneralEncrypt","_recipients","_c","flattened","subtleDsa","saltLength","getVerifyKey","verify","signature","flattenedVerify","jws","payload","extensions","b64","algorithms","verified","compactVerify","generalVerify","signatures","minute","hour","day","week","year","REGEX","matched","exec","parseFloat","unit","round","epoch","secs","normalizeTyp","checkAudiencePresence","audPayload","audOption","encodedPayload","typ","requiredClaims","issuer","subject","audience","maxTokenAge","reverse","iss","aud","tolerance","clockTolerance","currentDate","iat","nbf","exp","age","max","jwtPayload","jwtVerify","jwt","jwtDecrypt","CompactEncrypt","_flattened","getSignKey","FlattenedSign","_payload","CompactSign","IndividualSignature","sig","addSignature","GeneralSign","_signatures","ProduceJWT","setIssuer","setSubject","setAudience","setJti","jwtId","jti","setNotBefore","setExpirationTime","setIssuedAt","SignJWT","EncryptJWT","replicateIssuerAsHeader","_replicateIssuerAsHeader","replicateSubjectAsHeader","_replicateSubjectAsHeader","replicateAudienceAsHeader","_replicateAudienceAsHeader","check","description","calculateJwkThumbprint","digestAlgorithm","components","calculateJwkThumbprintUri","thumbprint","EmbeddedJWK","token","getKtyFromAlg","isJWKSLike","jwks","isJWKLike","structuredClone","LocalJWKSet","_cached","WeakMap","_jwks","getKey","kid","candidates","candidate","importWithAlgCache","cached","createLocalJWKSet","fetchJwks","timeout","controller","id","timedOut","AbortController","setTimeout","catch","clearTimeout","isCloudflareWorkers","WebSocketPair","navigator","userAgent","EdgeRuntime","RemoteJWKSet","_url","_options","agent","_timeoutDuration","timeoutDuration","_cooldownDuration","cooldownDuration","_cacheMaxAge","cacheMaxAge","coolingDown","_jwksTimestamp","fresh","reload","_pendingFetch","createRemoteJWKSet","UnsecuredJWT","encodedHeader","decodeProtectedHeader","protectedB64u","decodeJwt","decoded","generateSecret","getModulusLengthOption","modulusLength","generateKeyPair","publicExponent","generate","errors_1","errors","base64url_1","__awaiter","_arguments","P","generator","adopt","fulfilled","step","resolveFetch","customFetch","_fetch","FunctionsError","FunctionsFetchError","FunctionsRelayError","FunctionsHttpError","FunctionsClient","setAuth","Authorization","invoke","functionName","functionArgs","fetchError","isRelayError","crossFetch","PostgrestBuilder","builder","shouldThrowOnError","schema","isMaybeSingle","throwOnError","onfulfilled","onrejected","count","countHeader","contentRange","details","hint","_d","postgrestResponse","PostgrestTransformBuilder","select","columns","quoted","cleanedColumns","order","column","ascending","nullsFirst","foreignTable","existingOrder","limit","range","keyOffset","keyLimit","abortSignal","single","maybeSingle","csv","geojson","explain","verbose","settings","wal","format","forMediatype","rollback","returns","PostgrestFilterBuilder","eq","neq","gt","gte","lt","lte","like","pattern","likeAllOf","patterns","likeAnyOf","ilike","ilikeAllOf","ilikeAnyOf","is","in","cleanedValues","RegExp","contains","containedBy","rangeGt","rangeGte","rangeLt","rangeLte","rangeAdjacent","overlaps","textSearch","typePart","configPart","not","operator","or","filters","PostgrestQueryBuilder","head","allowEmpty","insert","defaultToNull","prefersHeaders","uniqueColumns","upsert","onConflict","ignoreDuplicates","update","DEFAULT_HEADERS","PostgrestClient","relation","rpc","fn","VSN","DEFAULT_TIMEOUT","WS_CLOSE_NORMAL","SOCKET_STATES","CHANNEL_STATES","CHANNEL_EVENTS","TRANSPORTS","CONNECTION_STATE","Timer","timerCalc","timer","tries","reset","scheduleTimeout","Serializer","HEADER_LENGTH","rawPayload","_binaryDecode","_decodeBroadcast","topicSize","getUint8","eventSize","topic","ref","Push","channel","sent","timeoutTimer","receivedResp","recHooks","refEvent","rateLimited","resend","_cancelRefEvent","_hasReceived","startTimeout","socket","join_ref","_joinRef","updatePayload","receive","_makeRef","_replyEventName","_cancelTimeout","_matchReceive","_on","trigger","_trigger","destroy","_off","h","REALTIME_PRESENCE_LISTEN_EVENTS","RealtimePresence","state","pendingDiffs","joinRef","caller","onJoin","onLeave","onSync","events","diff","newState","syncState","syncDiff","inPendingSyncState","currentPresences","newPresences","leftPresences","currentState","cloneDeep","transformedState","transformState","joins","leaves","presences","newPresenceRefs","m","presence_ref","curPresenceRefs","joinedPresences","joinedPresenceRefs","curPresences","presenceRefsToRemove","func","metas","presence","PostgresTypes","convertChangeData","record","skipTypes","rec_key","convertColumn","columnName","colType","convertCell","noop","dataType","toArray","bool","toBoolean","float4","float8","int2","int4","int8","numeric","toNumber","jsonb","toJson","timestamp","toTimestampString","abstime","date","daterange","int4range","int8range","money","reltime","time","timestamptz","timetz","tsrange","tstzrange","parsedValue","log","lastIdx","closeBrace","openBrace","valTrim","Transformers","REALTIME_POSTGRES_CHANGES_LISTEN_EVENT","REALTIME_LISTEN_TYPES","REALTIME_SUBSCRIBE_STATES","RealtimeChannel","bindings","closed","joinedOnce","pushBuffer","broadcast","ack","joinPush","rejoinTimer","_rejoinUntilConnected","reconnectAfterMs","joined","pushEvent","_onClose","_remove","_onError","_isLeaving","_isClosed","errored","_isJoining","reply","subscribe","accessTokenPayload","postgres_changes","accessToken","access_token","updateJoinPayload","_rejoin","serverPostgresFilters","clientPostgresBindings","bindingsLen","newPostgresBindings","clientPostgresBinding","table","serverPostgresFilter","unsubscribe","presenceState","track","untrack","on","_push","leaving","onClose","close","leavePush","leave","_canPush","_onMessage","_event","_ref","_isMember","typeLower","toLocaleLowerCase","handledPayload","_e","_f","bindId","bindEvent","ids","postgresChanges","commit_timestamp","enrichedPayload","eventType","new","old","_getPayloadRecords","_isJoined","joining","binding","isEqual","obj1","obj2","isConnected","_leaveOpenTopic","records","old_record","w3cwebsocket","RealtimeClient","endPoint","channels","transport","heartbeatIntervalMs","heartbeatTimer","pendingHeartbeatRef","logger","conn","sendBuffer","serializer","stateChangeCallbacks","eventsPerSecondLimitMs","inThrottle","websocket","eventsPerSecond","reconnectTimer","disconnect","connect","_endPointURL","binaryType","onopen","_onConnOpen","_onConnError","onmessage","_onConnMessage","onclose","_onConnClose","clearInterval","getChannels","removeChannel","removeAllChannels","values_1","kind","msg","connectionState","connecting","Connecting","Open","closing","Closing","Closed","chan","isThrottled","_throttle","newRef","dupChannel","_appendParams","vsn","rawMessage","_flushSendBuffer","setInterval","_sendHeartbeat","_triggerChanError","StorageError","__isStorageError","isStorageError","StorageApiError","StorageUnknownError","originalError","resolveResponse","_getErrorMessage","error_description","handleError","Res","_getRequestParams","_handleRequest","fetcher","noResolveJson","post","put","remove","DEFAULT_SEARCH_OPTIONS","sortBy","DEFAULT_FILE_OPTIONS","cacheControl","contentType","StorageFileApi","bucketId","uploadOrUpdate","fileBody","fileOptions","cleanPath","_removeEmptyFolders","_path","_getFinalPath","duplex","upload","uploadToSignedUrl","createSignedUploadUrl","signedUrl","move","fromPath","toPath","sourceKey","destinationKey","copy","Key","createSignedUrl","expiresIn","transform","downloadQueryParam","download","encodeURI","signedURL","createSignedUrls","datum","wantsTransformation","renderPath","transformationQuery","transformOptsToQueryString","queryString","getPublicUrl","_queryString","publicUrl","prefixes","list","width","height","resize","quality","StorageBucketApi","listBuckets","getBucket","createBucket","file_size_limit","fileSizeLimit","allowed_mime_types","allowedMimeTypes","updateBucket","emptyBucket","deleteBucket","StorageClient","CrossFetchHeaders","resolveHeadersConstructor","fetchWithAuth","getAccessToken","HeadersConstructor","uuid","stripTrailingSlash","isBrowser","applySettingDefaults","defaults","db","dbOptions","authOptions","realtime","realtimeOptions","globalOptions","DEFAULT_DB_OPTIONS","DEFAULT_AUTH_OPTIONS","DEFAULT_REALTIME_OPTIONS","DEFAULT_GLOBAL_OPTIONS","expiresAt","timeNow","document","localStorageWriteTests","tested","supportsLocalStorage","localStorage","randomKey","setItem","removeItem","getParameterByName","regex","results","looksLikeFetchResponse","maybeResponse","setItemAsync","getItemAsync","getItem","removeItemAsync","base64","chr1","chr2","chr3","enc1","enc2","enc3","enc4","Deferred","promiseConstructor","rej","decodeJWTPayload","base64UrlRegex","base64Url","sleep","accept","retryable","isRetryable","attempt","Infinity","dec2hex","dec","generatePKCEVerifier","verifierLength","array","Uint32Array","charSet","charSetLen","verifier","sha256","randomString","encodedData","base64urlencode","generatePKCEChallenge","hashed","AuthError","__isAuthError","isAuthError","AuthApiError","isAuthApiError","AuthUnknownError","CustomAuthError","AuthSessionMissingError","AuthInvalidCredentialsError","AuthImplicitGrantRedirectError","AuthPKCEGrantCodeExchangeError","AuthRetryableFetchError","__rest","getOwnPropertySymbols","propertyIsEnumerable","NETWORK_ERROR_CODES","qs","redirectTo","xform","_sessionResponse","hasSession","expires_at","expires_in","user","_userResponse","_ssoResponse","_generateLinkResponse","action_link","email_otp","hashed_token","redirect_to","verification_type","properties","_noResolveJsonResponse","refresh_token","GoTrueAdminApi","mfa","listFactors","_listFactors","deleteFactor","_deleteFactor","signOut","inviteUserByEmail","email","generateLink","new_email","newEmail","createUser","listUsers","_g","pagination","nextPage","lastPage","total","per_page","perPage","users","links","link","rel","getUserById","uid","updateUserById","deleteUser","shouldSoftDelete","should_soft_delete","userId","factors","GOTRUE_URL","STORAGE_KEY","AUDIENCE","EXPIRY_MARGIN","NETWORK_FAILURE","MAX_RETRIES","RETRY_INTERVAL","localStorageAdapter","polyfillGlobalThis","__magic__","DEFAULT_OPTIONS","autoRefreshToken","persistSession","detectSessionInUrl","flowType","AUTO_REFRESH_TICK_DURATION","AUTO_REFRESH_TICK_THRESHOLD","GoTrueClient","stateChangeEmitters","autoRefreshTicker","visibilityChangedCallback","refreshingDeferred","initializePromise","broadcastChannel","inMemorySession","admin","_verify","enroll","_enroll","unenroll","_unenroll","challenge","_challenge","challengeAndVerify","_challengeAndVerify","getAuthenticatorAssuranceLevel","_getAuthenticatorAssuranceLevel","BroadcastChannel","_notifyAllSubscribers","initialize","_initialize","isPKCEFlow","_isPKCEFlow","_isImplicitGrantFlow","_getSessionFromUrl","_removeSession","redirectType","_saveSession","_recoverAndRefresh","_handleVisibilityChange","signUp","codeChallenge","codeChallengeMethod","codeVerifier","emailRedirectTo","gotrue_meta_security","captcha_token","captchaToken","code_challenge","code_challenge_method","phone","signInWithPassword","signInWithOAuth","_handleProviderSignIn","provider","scopes","queryParams","skipBrowserRedirect","exchangeCodeForSession","authCode","auth_code","code_verifier","signInWithIdToken","nonce","id_token","signInWithOtp","create_user","shouldCreateUser","verifyOtp","signInWithSSO","provider_id","providerId","skip_http_redirect","reauthenticate","sessionError","endpoint","currentSession","maybeSession","_isValidSession","hasExpired","_callRefreshToken","getUser","updateUser","sessionData","userError","_decodeJWT","setSession","refreshedSession","token_type","refreshSession","history","replaceState","error_code","provider_token","provider_refresh_token","currentStorageContent","onAuthStateChange","subscription","emitInitialSession","resetPasswordForEmail","_refreshAccessToken","refreshToken","startedAt","isValidSession","_getUrlForProvider","postMessage","_persistSession","_removeVisibilityChangedCallback","_startAutoRefresh","_stopAutoRefresh","ticker","_autoRefreshTokenTick","unref","Deno","unrefTimer","startAutoRefresh","stopAutoRefresh","expiresInTicks","_onVisibilityChanged","isInitial","visibilityState","urlParams","flowParams","factorId","friendly_name","friendlyName","factor_type","factorType","totp","qr_code","challenge_id","challengeId","challengeData","challengeError","factor","currentLevel","nextLevel","currentAuthenticationMethods","aal","verifiedFactors","amr","SupabaseAuthClient","SupabaseStorageClient","SupabaseClient","_h","_supabaseUrl","realtimeUrl","authUrl","storageUrl","functionsUrl","defaultStorageKey","DEFAULTS","_initSupabaseAuthClient","_getAccessToken","_initRealtimeClient","_listenForAuthEvents","functions","authHeaders","apikey","_handleTokenChanged","source","changedAccessToken","createClient","__create","__getProtoOf","getPrototypeOf","__commonJS","cb","__require","__toESM","isNodeMode","__esModule","require_cookie","parse3","serialize3","__toString","fieldContentRegExp","opt","eqIdx","endIdx","lastIndexOf","isDate","valueOf","priority","decode2","import_cookie2","import_cookie","parseSupabaseCookie","_header","payloadStr","_signature","stringifySupabaseSession","DEFAULT_COOKIE_OPTIONS","sessionStr","bowser","export_parseCookies","export_serializeCookie"],"sourceRoot":""}