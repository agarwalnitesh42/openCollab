"use strict";exports.id=7083,exports.ids=[7083],exports.modules={12150:(e,t,s)=>{s.d(t,{Z:()=>r});class r{constructor(e){this.supabase=e}}},51409:(e,t,s)=>{s.d(t,{F:()=>l});var r=s(75573),a=s.n(r);let l=new class{async get(e,t,s=30){let r=this._cache.get(e);if(null!=r)return r;let a=await t();return this._cache.set(e,a,s),a}async del(e){this._cache.del(e)}constructor(){this._cache=new(a())({stdTTL:30})}}},87083:(e,t,s)=>{s.d(t,{Z:()=>l});var r=s(12150),a=s(51409);class l extends r.Z{async getById(e){let t=`users-${e}`;return a.F.get(t,async()=>{let{data:t}=await this.supabase.from("profiles").select().eq("id",e).single();return t},180)}async getByUsername(e){let t=`users-username-${e}`;return a.F.get(t,async()=>{let{data:t,error:s}=await this.supabase.from("profiles").select().eq("username",e).single();return t},180)}async getProfiles(){let{data:e,error:t}=await this.supabase.from("profiles").select();return e}async getUserActivityById(e){let{data:t,error:s}=await this.supabase.from("comment").select("*, profiles(full_name, avatar_url), products(name, slug, slogan, logo_url, votes_count, deleted, demo_url)").eq("user_id",e);if(null!==s)throw Error(s.message);return(t||[]).filter(e=>!e.products.deleted)}async getUserVoteTools(e){let{data:t,error:s}=await this.supabase.from("product_votes_view").select(`
        *,
        product_pricing_types (title),
        product_category_product (
          product_categories (
            name
          )
        )
        `).eq("user_id",e);if(null!==s)throw Error(s.message);return t}async update(e,t){let{data:s,error:r}=await this.supabase.from("profiles").update(t).eq("id",e).select().single();if(null!=r)throw Error(r.message);return s}async updateAvatar(e,t){let{data:s,error:r}=await this.supabase.storage.from("avatars").upload(`${e}/picture`,t,{cacheControl:"0",upsert:!0});if(null!=r)throw Error(r.message);return await this.update(e,{avatar_url:this.supabase.storage.from("avatars").getPublicUrl(`${e}/picture`).data.publicUrl}),s.path}}}};